{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _server = _interopRequireDefault(require(\"./server\"));\n\nvar _mongodb = require(\"mongodb\");\n\nvar _moviesDAO = _interopRequireDefault(require(\"../src/dao/moviesDAO\"));\n\nvar _usersDAO = _interopRequireDefault(require(\"./dao/usersDAO\"));\n\nvar _commentsDAO = _interopRequireDefault(require(\"./dao/commentsDAO\"));\n\nvar port = process.env.PORT || 8000;\n/**\nTicket: Connection Pooling\n\nPlease change the configuration of the MongoClient object by setting the\nmaximum connection pool size to 50 active connections.\n*/\n\n/**\nTicket: Timeouts\n\nPlease prevent the program from waiting indefinitely by setting the write\nconcern timeout limit to 2500 milliseconds.\n*/\n\n_mongodb.MongoClient.connect(process.env.MFLIX_DB_URI, // TODO: Connection Pooling\n// Set the poolSize to 50 connections.\n// TODO: Timeouts\n// Set the write timeout limit to 2500 milliseconds.\n{\n  useNewUrlParser: true,\n  poolSize: 50,\n  wtimeout: 2500\n})[\"catch\"](function (err) {\n  console.error(err.stack);\n  process.exit(1);\n}).then( /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(client) {\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _moviesDAO[\"default\"].injectDB(client);\n\n          case 2:\n            _context.next = 4;\n            return _usersDAO[\"default\"].injectDB(client);\n\n          case 4:\n            _context.next = 6;\n            return _commentsDAO[\"default\"].injectDB(client);\n\n          case 6:\n            _server[\"default\"].listen(port, function () {\n              console.log(\"listening on port \".concat(port));\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJNb25nb0NsaWVudCIsImNvbm5lY3QiLCJNRkxJWF9EQl9VUkkiLCJ1c2VOZXdVcmxQYXJzZXIiLCJwb29sU2l6ZSIsInd0aW1lb3V0IiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwic3RhY2siLCJleGl0IiwidGhlbiIsImNsaWVudCIsIk1vdmllc0RBTyIsImluamVjdERCIiwiVXNlcnNEQU8iLCJDb21tZW50c0RBTyIsImFwcCIsImxpc3RlbiIsImxvZyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFwzMzYxNlxcT25lRHJpdmVcXEJ1cmVhdVxcbWZsaXgtanNcXHNyY1xcIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXBwIGZyb20gXCIuL3NlcnZlclwiXG5pbXBvcnQgeyBNb25nb0NsaWVudCB9IGZyb20gXCJtb25nb2RiXCJcbmltcG9ydCBNb3ZpZXNEQU8gZnJvbSBcIi4uL3NyYy9kYW8vbW92aWVzREFPXCJcbmltcG9ydCBVc2Vyc0RBTyBmcm9tIFwiLi9kYW8vdXNlcnNEQU9cIlxuaW1wb3J0IENvbW1lbnRzREFPIGZyb20gXCIuL2Rhby9jb21tZW50c0RBT1wiXG5cbmNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDgwMDBcblxuLyoqXG5UaWNrZXQ6IENvbm5lY3Rpb24gUG9vbGluZ1xuXG5QbGVhc2UgY2hhbmdlIHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSBNb25nb0NsaWVudCBvYmplY3QgYnkgc2V0dGluZyB0aGVcbm1heGltdW0gY29ubmVjdGlvbiBwb29sIHNpemUgdG8gNTAgYWN0aXZlIGNvbm5lY3Rpb25zLlxuKi9cblxuLyoqXG5UaWNrZXQ6IFRpbWVvdXRzXG5cblBsZWFzZSBwcmV2ZW50IHRoZSBwcm9ncmFtIGZyb20gd2FpdGluZyBpbmRlZmluaXRlbHkgYnkgc2V0dGluZyB0aGUgd3JpdGVcbmNvbmNlcm4gdGltZW91dCBsaW1pdCB0byAyNTAwIG1pbGxpc2Vjb25kcy5cbiovXG5cbk1vbmdvQ2xpZW50LmNvbm5lY3QoXG4gIHByb2Nlc3MuZW52Lk1GTElYX0RCX1VSSSxcblxuICAvLyBUT0RPOiBDb25uZWN0aW9uIFBvb2xpbmdcbiAgLy8gU2V0IHRoZSBwb29sU2l6ZSB0byA1MCBjb25uZWN0aW9ucy5cbiAgLy8gVE9ETzogVGltZW91dHNcbiAgLy8gU2V0IHRoZSB3cml0ZSB0aW1lb3V0IGxpbWl0IHRvIDI1MDAgbWlsbGlzZWNvbmRzLlxuICB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgcG9vbFNpemU6IDUwLCB3dGltZW91dDogMjUwMCB9LFxuKVxuICAuY2F0Y2goZXJyID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVyci5zdGFjaylcbiAgICBwcm9jZXNzLmV4aXQoMSlcbiAgfSlcbiAgLnRoZW4oYXN5bmMgY2xpZW50ID0+IHtcbiAgICBhd2FpdCBNb3ZpZXNEQU8uaW5qZWN0REIoY2xpZW50KVxuICAgIGF3YWl0IFVzZXJzREFPLmluamVjdERCKGNsaWVudClcbiAgICBhd2FpdCBDb21tZW50c0RBTy5pbmplY3REQihjbGllbnQpXG4gICAgYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgbGlzdGVuaW5nIG9uIHBvcnQgJHtwb3J0fWApXG4gICAgfSlcbiAgfSlcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQSxJQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxJQUFaLElBQW9CLElBQWpDO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQUMsb0JBQUEsQ0FBWUMsT0FBWixDQUNFSixPQUFPLENBQUNDLEdBQVIsQ0FBWUksWUFEZCxFQUdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFBRUMsZUFBZSxFQUFFLElBQW5CO0VBQXlCQyxRQUFRLEVBQUUsRUFBbkM7RUFBdUNDLFFBQVEsRUFBRTtBQUFqRCxDQVBGLFdBU1MsVUFBQUMsR0FBRyxFQUFJO0VBQ1pDLE9BQU8sQ0FBQ0MsS0FBUixDQUFjRixHQUFHLENBQUNHLEtBQWxCO0VBQ0FaLE9BQU8sQ0FBQ2EsSUFBUixDQUFhLENBQWI7QUFDRCxDQVpILEVBYUdDLElBYkg7RUFBQSx5RkFhUSxpQkFBTUMsTUFBTjtJQUFBO01BQUE7UUFBQTtVQUFBO1lBQUE7WUFBQSxPQUNFQyxxQkFBQSxDQUFVQyxRQUFWLENBQW1CRixNQUFuQixDQURGOztVQUFBO1lBQUE7WUFBQSxPQUVFRyxvQkFBQSxDQUFTRCxRQUFULENBQWtCRixNQUFsQixDQUZGOztVQUFBO1lBQUE7WUFBQSxPQUdFSSx1QkFBQSxDQUFZRixRQUFaLENBQXFCRixNQUFyQixDQUhGOztVQUFBO1lBSUpLLGtCQUFBLENBQUlDLE1BQUosQ0FBV3RCLElBQVgsRUFBaUIsWUFBTTtjQUNyQlcsT0FBTyxDQUFDWSxHQUFSLDZCQUFpQ3ZCLElBQWpDO1lBQ0QsQ0FGRDs7VUFKSTtVQUFBO1lBQUE7UUFBQTtNQUFBO0lBQUE7RUFBQSxDQWJSOztFQUFBO0lBQUE7RUFBQTtBQUFBIn0=","map":{"version":3,"names":["port","process","env","PORT","MongoClient","connect","MFLIX_DB_URI","useNewUrlParser","poolSize","wtimeout","err","console","error","stack","exit","then","client","MoviesDAO","injectDB","UsersDAO","CommentsDAO","app","listen","log"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\","sources":["index.js"],"sourcesContent":["import app from \"./server\"\nimport { MongoClient } from \"mongodb\"\nimport MoviesDAO from \"../src/dao/moviesDAO\"\nimport UsersDAO from \"./dao/usersDAO\"\nimport CommentsDAO from \"./dao/commentsDAO\"\n\nconst port = process.env.PORT || 8000\n\n/**\nTicket: Connection Pooling\n\nPlease change the configuration of the MongoClient object by setting the\nmaximum connection pool size to 50 active connections.\n*/\n\n/**\nTicket: Timeouts\n\nPlease prevent the program from waiting indefinitely by setting the write\nconcern timeout limit to 2500 milliseconds.\n*/\n\nMongoClient.connect(\n  process.env.MFLIX_DB_URI,\n\n  // TODO: Connection Pooling\n  // Set the poolSize to 50 connections.\n  // TODO: Timeouts\n  // Set the write timeout limit to 2500 milliseconds.\n  { useNewUrlParser: true, poolSize: 50, wtimeout: 2500 },\n)\n  .catch(err => {\n    console.error(err.stack)\n    process.exit(1)\n  })\n  .then(async client => {\n    await MoviesDAO.injectDB(client)\n    await UsersDAO.injectDB(client)\n    await CommentsDAO.injectDB(client)\n    app.listen(port, () => {\n      console.log(`listening on port ${port}`)\n    })\n  })\n"],"mappings":";;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAZ,IAAoB,IAAjC;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEAC,oBAAA,CAAYC,OAAZ,CACEJ,OAAO,CAACC,GAAR,CAAYI,YADd,EAGE;AACA;AACA;AACA;AACA;EAAEC,eAAe,EAAE,IAAnB;EAAyBC,QAAQ,EAAE,EAAnC;EAAuCC,QAAQ,EAAE;AAAjD,CAPF,WASS,UAAAC,GAAG,EAAI;EACZC,OAAO,CAACC,KAAR,CAAcF,GAAG,CAACG,KAAlB;EACAZ,OAAO,CAACa,IAAR,CAAa,CAAb;AACD,CAZH,EAaGC,IAbH;EAAA,yFAaQ,iBAAMC,MAAN;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,OACEC,qBAAA,CAAUC,QAAV,CAAmBF,MAAnB,CADF;;UAAA;YAAA;YAAA,OAEEG,oBAAA,CAASD,QAAT,CAAkBF,MAAlB,CAFF;;UAAA;YAAA;YAAA,OAGEI,uBAAA,CAAYF,QAAZ,CAAqBF,MAArB,CAHF;;UAAA;YAIJK,kBAAA,CAAIC,MAAJ,CAAWtB,IAAX,EAAiB,YAAM;cACrBW,OAAO,CAACY,GAAR,6BAAiCvB,IAAjC;YACD,CAFD;;UAJI;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAbR;;EAAA;IAAA;EAAA;AAAA"}},"mtime":1656340047619},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\n\nvar _movies = _interopRequireDefault(require(\"../src/api/movies.route\"));\n\nvar _users = _interopRequireDefault(require(\"../src/api/users.route\"));\n\nvar app = (0, _express[\"default\"])();\napp.use((0, _cors[\"default\"])());\nprocess.env.NODE_ENV !== \"prod\" && app.use((0, _morgan[\"default\"])(\"dev\"));\napp.use(_bodyParser[\"default\"].json());\napp.use(_bodyParser[\"default\"].urlencoded({\n  extended: true\n})); // Register api routes\n\napp.use(\"/api/v1/movies\", _movies[\"default\"]);\napp.use(\"/api/v1/user\", _users[\"default\"]);\napp.use(\"/status\", _express[\"default\"][\"static\"](\"build\"));\napp.use(\"/\", _express[\"default\"][\"static\"](\"build\"));\napp.use(\"*\", function (req, res) {\n  return res.status(404).json({\n    error: \"not found\"\n  });\n});\nvar _default = app;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHAiLCJleHByZXNzIiwidXNlIiwiY29ycyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsIm1vcmdhbiIsImJvZHlQYXJzZXIiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwibW92aWVzIiwidXNlcnMiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFwzMzYxNlxcT25lRHJpdmVcXEJ1cmVhdVxcbWZsaXgtanNcXHNyY1xcIiwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIlxuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSBcImJvZHktcGFyc2VyXCJcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCJcbmltcG9ydCBtb3JnYW4gZnJvbSBcIm1vcmdhblwiXG5pbXBvcnQgbW92aWVzIGZyb20gXCIuLi9zcmMvYXBpL21vdmllcy5yb3V0ZVwiXG5pbXBvcnQgdXNlcnMgZnJvbSBcIi4uL3NyYy9hcGkvdXNlcnMucm91dGVcIlxuXG5jb25zdCBhcHAgPSBleHByZXNzKClcblxuYXBwLnVzZShjb3JzKCkpXG5wcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kXCIgJiYgYXBwLnVzZShtb3JnYW4oXCJkZXZcIikpXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKVxuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSlcblxuLy8gUmVnaXN0ZXIgYXBpIHJvdXRlc1xuYXBwLnVzZShcIi9hcGkvdjEvbW92aWVzXCIsIG1vdmllcylcbmFwcC51c2UoXCIvYXBpL3YxL3VzZXJcIiwgdXNlcnMpXG5hcHAudXNlKFwiL3N0YXR1c1wiLCBleHByZXNzLnN0YXRpYyhcImJ1aWxkXCIpKVxuYXBwLnVzZShcIi9cIiwgZXhwcmVzcy5zdGF0aWMoXCJidWlsZFwiKSlcbmFwcC51c2UoXCIqXCIsIChyZXEsIHJlcykgPT4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJub3QgZm91bmRcIiB9KSlcblxuZXhwb3J0IGRlZmF1bHQgYXBwXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBLElBQU1BLEdBQUcsR0FBRyxJQUFBQyxtQkFBQSxHQUFaO0FBRUFELEdBQUcsQ0FBQ0UsR0FBSixDQUFRLElBQUFDLGdCQUFBLEdBQVI7QUFDQUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFFBQVosS0FBeUIsTUFBekIsSUFBbUNOLEdBQUcsQ0FBQ0UsR0FBSixDQUFRLElBQUFLLGtCQUFBLEVBQU8sS0FBUCxDQUFSLENBQW5DO0FBQ0FQLEdBQUcsQ0FBQ0UsR0FBSixDQUFRTSxzQkFBQSxDQUFXQyxJQUFYLEVBQVI7QUFDQVQsR0FBRyxDQUFDRSxHQUFKLENBQVFNLHNCQUFBLENBQVdFLFVBQVgsQ0FBc0I7RUFBRUMsUUFBUSxFQUFFO0FBQVosQ0FBdEIsQ0FBUixFLENBRUE7O0FBQ0FYLEdBQUcsQ0FBQ0UsR0FBSixDQUFRLGdCQUFSLEVBQTBCVSxrQkFBMUI7QUFDQVosR0FBRyxDQUFDRSxHQUFKLENBQVEsY0FBUixFQUF3QlcsaUJBQXhCO0FBQ0FiLEdBQUcsQ0FBQ0UsR0FBSixDQUFRLFNBQVIsRUFBbUJELG1CQUFBLFdBQWUsT0FBZixDQUFuQjtBQUNBRCxHQUFHLENBQUNFLEdBQUosQ0FBUSxHQUFSLEVBQWFELG1CQUFBLFdBQWUsT0FBZixDQUFiO0FBQ0FELEdBQUcsQ0FBQ0UsR0FBSixDQUFRLEdBQVIsRUFBYSxVQUFDWSxHQUFELEVBQU1DLEdBQU47RUFBQSxPQUFjQSxHQUFHLENBQUNDLE1BQUosQ0FBVyxHQUFYLEVBQWdCUCxJQUFoQixDQUFxQjtJQUFFUSxLQUFLLEVBQUU7RUFBVCxDQUFyQixDQUFkO0FBQUEsQ0FBYjtlQUVlakIsRyJ9","map":{"version":3,"names":["app","express","use","cors","process","env","NODE_ENV","morgan","bodyParser","json","urlencoded","extended","movies","users","req","res","status","error"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\","sources":["server.js"],"sourcesContent":["import express from \"express\"\nimport bodyParser from \"body-parser\"\nimport cors from \"cors\"\nimport morgan from \"morgan\"\nimport movies from \"../src/api/movies.route\"\nimport users from \"../src/api/users.route\"\n\nconst app = express()\n\napp.use(cors())\nprocess.env.NODE_ENV !== \"prod\" && app.use(morgan(\"dev\"))\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({ extended: true }))\n\n// Register api routes\napp.use(\"/api/v1/movies\", movies)\napp.use(\"/api/v1/user\", users)\napp.use(\"/status\", express.static(\"build\"))\napp.use(\"/\", express.static(\"build\"))\napp.use(\"*\", (req, res) => res.status(404).json({ error: \"not found\" }))\n\nexport default app\n"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,GAAG,GAAG,IAAAC,mBAAA,GAAZ;AAEAD,GAAG,CAACE,GAAJ,CAAQ,IAAAC,gBAAA,GAAR;AACAC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,MAAzB,IAAmCN,GAAG,CAACE,GAAJ,CAAQ,IAAAK,kBAAA,EAAO,KAAP,CAAR,CAAnC;AACAP,GAAG,CAACE,GAAJ,CAAQM,sBAAA,CAAWC,IAAX,EAAR;AACAT,GAAG,CAACE,GAAJ,CAAQM,sBAAA,CAAWE,UAAX,CAAsB;EAAEC,QAAQ,EAAE;AAAZ,CAAtB,CAAR,E,CAEA;;AACAX,GAAG,CAACE,GAAJ,CAAQ,gBAAR,EAA0BU,kBAA1B;AACAZ,GAAG,CAACE,GAAJ,CAAQ,cAAR,EAAwBW,iBAAxB;AACAb,GAAG,CAACE,GAAJ,CAAQ,SAAR,EAAmBD,mBAAA,WAAe,OAAf,CAAnB;AACAD,GAAG,CAACE,GAAJ,CAAQ,GAAR,EAAaD,mBAAA,WAAe,OAAf,CAAb;AACAD,GAAG,CAACE,GAAJ,CAAQ,GAAR,EAAa,UAACY,GAAD,EAAMC,GAAN;EAAA,OAAcA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBP,IAAhB,CAAqB;IAAEQ,KAAK,EAAE;EAAT,CAArB,CAAd;AAAA,CAAb;eAEejB,G"}},"mtime":1655825402803},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\movies.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _express = require(\"express\");\n\nvar _movies = _interopRequireDefault(require(\"./movies.controller\"));\n\nvar _comments = _interopRequireDefault(require(\"./comments.controller\"));\n\nvar router = new _express.Router(); // associate put, delete, and get(id)\n\nrouter.route(\"/\").get(_movies[\"default\"].apiGetMovies);\nrouter.route(\"/search\").get(_movies[\"default\"].apiSearchMovies);\nrouter.route(\"/countries\").get(_movies[\"default\"].apiGetMoviesByCountry);\nrouter.route(\"/facet-search\").get(_movies[\"default\"].apiFacetedSearch);\nrouter.route(\"/id/:id\").get(_movies[\"default\"].apiGetMovieById);\nrouter.route(\"/config-options\").get(_movies[\"default\"].getConfig);\nrouter.route(\"/comment\").post(_comments[\"default\"].apiPostComment).put(_comments[\"default\"].apiUpdateComment)[\"delete\"](_comments[\"default\"].apiDeleteComment);\nvar _default = router;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJyb3V0ZSIsImdldCIsIk1vdmllc0N0cmwiLCJhcGlHZXRNb3ZpZXMiLCJhcGlTZWFyY2hNb3ZpZXMiLCJhcGlHZXRNb3ZpZXNCeUNvdW50cnkiLCJhcGlGYWNldGVkU2VhcmNoIiwiYXBpR2V0TW92aWVCeUlkIiwiZ2V0Q29uZmlnIiwicG9zdCIsIkNvbW1lbnRzQ3RybCIsImFwaVBvc3RDb21tZW50IiwicHV0IiwiYXBpVXBkYXRlQ29tbWVudCIsImFwaURlbGV0ZUNvbW1lbnQiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcMzM2MTZcXE9uZURyaXZlXFxCdXJlYXVcXG1mbGl4LWpzXFxzcmNcXGFwaVxcIiwic291cmNlcyI6WyJtb3ZpZXMucm91dGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIlxuaW1wb3J0IE1vdmllc0N0cmwgZnJvbSBcIi4vbW92aWVzLmNvbnRyb2xsZXJcIlxuaW1wb3J0IENvbW1lbnRzQ3RybCBmcm9tIFwiLi9jb21tZW50cy5jb250cm9sbGVyXCJcblxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpXG5cbi8vIGFzc29jaWF0ZSBwdXQsIGRlbGV0ZSwgYW5kIGdldChpZClcbnJvdXRlci5yb3V0ZShcIi9cIikuZ2V0KE1vdmllc0N0cmwuYXBpR2V0TW92aWVzKVxucm91dGVyLnJvdXRlKFwiL3NlYXJjaFwiKS5nZXQoTW92aWVzQ3RybC5hcGlTZWFyY2hNb3ZpZXMpXG5yb3V0ZXIucm91dGUoXCIvY291bnRyaWVzXCIpLmdldChNb3ZpZXNDdHJsLmFwaUdldE1vdmllc0J5Q291bnRyeSlcbnJvdXRlci5yb3V0ZShcIi9mYWNldC1zZWFyY2hcIikuZ2V0KE1vdmllc0N0cmwuYXBpRmFjZXRlZFNlYXJjaClcbnJvdXRlci5yb3V0ZShcIi9pZC86aWRcIikuZ2V0KE1vdmllc0N0cmwuYXBpR2V0TW92aWVCeUlkKVxucm91dGVyLnJvdXRlKFwiL2NvbmZpZy1vcHRpb25zXCIpLmdldChNb3ZpZXNDdHJsLmdldENvbmZpZylcblxucm91dGVyXG4gIC5yb3V0ZShcIi9jb21tZW50XCIpXG4gIC5wb3N0KENvbW1lbnRzQ3RybC5hcGlQb3N0Q29tbWVudClcbiAgLnB1dChDb21tZW50c0N0cmwuYXBpVXBkYXRlQ29tbWVudClcbiAgLmRlbGV0ZShDb21tZW50c0N0cmwuYXBpRGVsZXRlQ29tbWVudClcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUVBLElBQU1BLE1BQU0sR0FBRyxJQUFJQyxlQUFKLEVBQWYsQyxDQUVBOztBQUNBRCxNQUFNLENBQUNFLEtBQVAsQ0FBYSxHQUFiLEVBQWtCQyxHQUFsQixDQUFzQkMsa0JBQUEsQ0FBV0MsWUFBakM7QUFDQUwsTUFBTSxDQUFDRSxLQUFQLENBQWEsU0FBYixFQUF3QkMsR0FBeEIsQ0FBNEJDLGtCQUFBLENBQVdFLGVBQXZDO0FBQ0FOLE1BQU0sQ0FBQ0UsS0FBUCxDQUFhLFlBQWIsRUFBMkJDLEdBQTNCLENBQStCQyxrQkFBQSxDQUFXRyxxQkFBMUM7QUFDQVAsTUFBTSxDQUFDRSxLQUFQLENBQWEsZUFBYixFQUE4QkMsR0FBOUIsQ0FBa0NDLGtCQUFBLENBQVdJLGdCQUE3QztBQUNBUixNQUFNLENBQUNFLEtBQVAsQ0FBYSxTQUFiLEVBQXdCQyxHQUF4QixDQUE0QkMsa0JBQUEsQ0FBV0ssZUFBdkM7QUFDQVQsTUFBTSxDQUFDRSxLQUFQLENBQWEsaUJBQWIsRUFBZ0NDLEdBQWhDLENBQW9DQyxrQkFBQSxDQUFXTSxTQUEvQztBQUVBVixNQUFNLENBQ0hFLEtBREgsQ0FDUyxVQURULEVBRUdTLElBRkgsQ0FFUUMsb0JBQUEsQ0FBYUMsY0FGckIsRUFHR0MsR0FISCxDQUdPRixvQkFBQSxDQUFhRyxnQkFIcEIsWUFJVUgsb0JBQUEsQ0FBYUksZ0JBSnZCO2VBTWVoQixNIn0=","map":{"version":3,"names":["router","Router","route","get","MoviesCtrl","apiGetMovies","apiSearchMovies","apiGetMoviesByCountry","apiFacetedSearch","apiGetMovieById","getConfig","post","CommentsCtrl","apiPostComment","put","apiUpdateComment","apiDeleteComment"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\api\\","sources":["movies.route.js"],"sourcesContent":["import { Router } from \"express\"\nimport MoviesCtrl from \"./movies.controller\"\nimport CommentsCtrl from \"./comments.controller\"\n\nconst router = new Router()\n\n// associate put, delete, and get(id)\nrouter.route(\"/\").get(MoviesCtrl.apiGetMovies)\nrouter.route(\"/search\").get(MoviesCtrl.apiSearchMovies)\nrouter.route(\"/countries\").get(MoviesCtrl.apiGetMoviesByCountry)\nrouter.route(\"/facet-search\").get(MoviesCtrl.apiFacetedSearch)\nrouter.route(\"/id/:id\").get(MoviesCtrl.apiGetMovieById)\nrouter.route(\"/config-options\").get(MoviesCtrl.getConfig)\n\nrouter\n  .route(\"/comment\")\n  .post(CommentsCtrl.apiPostComment)\n  .put(CommentsCtrl.apiUpdateComment)\n  .delete(CommentsCtrl.apiDeleteComment)\n\nexport default router\n"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,MAAM,GAAG,IAAIC,eAAJ,EAAf,C,CAEA;;AACAD,MAAM,CAACE,KAAP,CAAa,GAAb,EAAkBC,GAAlB,CAAsBC,kBAAA,CAAWC,YAAjC;AACAL,MAAM,CAACE,KAAP,CAAa,SAAb,EAAwBC,GAAxB,CAA4BC,kBAAA,CAAWE,eAAvC;AACAN,MAAM,CAACE,KAAP,CAAa,YAAb,EAA2BC,GAA3B,CAA+BC,kBAAA,CAAWG,qBAA1C;AACAP,MAAM,CAACE,KAAP,CAAa,eAAb,EAA8BC,GAA9B,CAAkCC,kBAAA,CAAWI,gBAA7C;AACAR,MAAM,CAACE,KAAP,CAAa,SAAb,EAAwBC,GAAxB,CAA4BC,kBAAA,CAAWK,eAAvC;AACAT,MAAM,CAACE,KAAP,CAAa,iBAAb,EAAgCC,GAAhC,CAAoCC,kBAAA,CAAWM,SAA/C;AAEAV,MAAM,CACHE,KADH,CACS,UADT,EAEGS,IAFH,CAEQC,oBAAA,CAAaC,cAFrB,EAGGC,GAHH,CAGOF,oBAAA,CAAaG,gBAHpB,YAIUH,oBAAA,CAAaI,gBAJvB;eAMehB,M"}},"mtime":1655825402861},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\movies.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _moviesDAO = _interopRequireDefault(require(\"../dao/moviesDAO\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar MoviesController = /*#__PURE__*/function () {\n  function MoviesController() {\n    (0, _classCallCheck2[\"default\"])(this, MoviesController);\n  }\n\n  (0, _createClass2[\"default\"])(MoviesController, null, [{\n    key: \"apiGetMovies\",\n    value: function () {\n      var _apiGetMovies = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res, next) {\n        var MOVIES_PER_PAGE, _yield$MoviesDAO$getM, moviesList, totalNumMovies, response;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                MOVIES_PER_PAGE = 20;\n                _context.next = 3;\n                return _moviesDAO[\"default\"].getMovies();\n\n              case 3:\n                _yield$MoviesDAO$getM = _context.sent;\n                moviesList = _yield$MoviesDAO$getM.moviesList;\n                totalNumMovies = _yield$MoviesDAO$getM.totalNumMovies;\n                response = {\n                  movies: moviesList,\n                  page: 0,\n                  filters: {},\n                  entries_per_page: MOVIES_PER_PAGE,\n                  total_results: totalNumMovies\n                };\n                res.json(response);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function apiGetMovies(_x, _x2, _x3) {\n        return _apiGetMovies.apply(this, arguments);\n      }\n\n      return apiGetMovies;\n    }()\n  }, {\n    key: \"apiGetMoviesByCountry\",\n    value: function () {\n      var _apiGetMoviesByCountry = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res, next) {\n        var countries, countryList, moviesList, response;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                countries = req.query.countries == \"\" ? \"USA\" : req.query.countries;\n                countryList = Array.isArray(countries) ? countries : Array(countries);\n                _context2.next = 4;\n                return _moviesDAO[\"default\"].getMoviesByCountry(countryList);\n\n              case 4:\n                moviesList = _context2.sent;\n                response = {\n                  titles: moviesList\n                };\n                res.json(response);\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function apiGetMoviesByCountry(_x4, _x5, _x6) {\n        return _apiGetMoviesByCountry.apply(this, arguments);\n      }\n\n      return apiGetMoviesByCountry;\n    }()\n  }, {\n    key: \"apiGetMovieById\",\n    value: function () {\n      var _apiGetMovieById = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(req, res, next) {\n        var id, movie, updated_type;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                id = req.params.id || {};\n                _context3.next = 4;\n                return _moviesDAO[\"default\"].getMovieByID(id);\n\n              case 4:\n                movie = _context3.sent;\n\n                if (movie) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                res.status(404).json({\n                  error: \"Not found\"\n                });\n                return _context3.abrupt(\"return\");\n\n              case 8:\n                updated_type = movie.lastupdated instanceof Date ? \"Date\" : \"other\";\n                res.json({\n                  movie: movie,\n                  updated_type: updated_type\n                });\n                _context3.next = 16;\n                break;\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(\"api, \".concat(_context3.t0));\n                res.status(500).json({\n                  error: _context3.t0\n                });\n\n              case 16:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 12]]);\n      }));\n\n      function apiGetMovieById(_x7, _x8, _x9) {\n        return _apiGetMovieById.apply(this, arguments);\n      }\n\n      return apiGetMovieById;\n    }()\n  }, {\n    key: \"apiSearchMovies\",\n    value: function () {\n      var _apiSearchMovies = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res, next) {\n        var MOVIES_PER_PAGE, page, searchType, filters, _yield$MoviesDAO$getM2, moviesList, totalNumMovies, response;\n\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                MOVIES_PER_PAGE = 20;\n\n                try {\n                  page = req.query.page ? parseInt(req.query.page, 10) : 0;\n                } catch (e) {\n                  console.error(\"Got bad value for page:, \".concat(e));\n                  page = 0;\n                }\n\n                try {\n                  searchType = Object.keys(req.query)[0];\n                } catch (e) {\n                  console.error(\"No search keys specified: \".concat(e));\n                }\n\n                filters = {};\n                _context4.t0 = searchType;\n                _context4.next = _context4.t0 === \"genre\" ? 7 : _context4.t0 === \"cast\" ? 9 : _context4.t0 === \"text\" ? 11 : 13;\n                break;\n\n              case 7:\n                if (req.query.genre !== \"\") {\n                  filters.genre = req.query.genre;\n                }\n\n                return _context4.abrupt(\"break\", 13);\n\n              case 9:\n                if (req.query.cast !== \"\") {\n                  filters.cast = req.query.cast;\n                }\n\n                return _context4.abrupt(\"break\", 13);\n\n              case 11:\n                if (req.query.text !== \"\") {\n                  filters.text = req.query.text;\n                }\n\n                return _context4.abrupt(\"break\", 13);\n\n              case 13:\n                _context4.next = 15;\n                return _moviesDAO[\"default\"].getMovies({\n                  filters: filters,\n                  page: page,\n                  MOVIES_PER_PAGE: MOVIES_PER_PAGE\n                });\n\n              case 15:\n                _yield$MoviesDAO$getM2 = _context4.sent;\n                moviesList = _yield$MoviesDAO$getM2.moviesList;\n                totalNumMovies = _yield$MoviesDAO$getM2.totalNumMovies;\n                response = {\n                  movies: moviesList,\n                  page: page,\n                  filters: filters,\n                  entries_per_page: MOVIES_PER_PAGE,\n                  total_results: totalNumMovies\n                };\n                res.json(response);\n\n              case 20:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function apiSearchMovies(_x10, _x11, _x12) {\n        return _apiSearchMovies.apply(this, arguments);\n      }\n\n      return apiSearchMovies;\n    }()\n  }, {\n    key: \"apiFacetedSearch\",\n    value: function () {\n      var _apiFacetedSearch = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(req, res, next) {\n        var MOVIES_PER_PAGE, page, filters, facetedSearchResult, response;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                MOVIES_PER_PAGE = 20;\n\n                try {\n                  page = req.query.page ? parseInt(req.query.page, 10) : 0;\n                } catch (e) {\n                  console.error(\"Got bad value for page, defaulting to 0: \".concat(e));\n                  page = 0;\n                }\n\n                filters = {};\n                filters = req.query.cast !== \"\" ? {\n                  cast: new RegExp(req.query.cast, \"i\")\n                } : {\n                  cast: \"Tom Hanks\"\n                };\n                _context5.next = 6;\n                return _moviesDAO[\"default\"].facetedSearch({\n                  filters: filters,\n                  page: page,\n                  MOVIES_PER_PAGE: MOVIES_PER_PAGE\n                });\n\n              case 6:\n                facetedSearchResult = _context5.sent;\n                response = {\n                  movies: facetedSearchResult.movies,\n                  facets: {\n                    runtime: facetedSearchResult.runtime,\n                    rating: facetedSearchResult.rating\n                  },\n                  page: page,\n                  filters: filters,\n                  entries_per_page: MOVIES_PER_PAGE,\n                  total_results: facetedSearchResult.count\n                };\n                res.json(response);\n\n              case 9:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      function apiFacetedSearch(_x13, _x14, _x15) {\n        return _apiFacetedSearch.apply(this, arguments);\n      }\n\n      return apiFacetedSearch;\n    }()\n  }, {\n    key: \"getConfig\",\n    value: function () {\n      var _getConfig = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(req, res, next) {\n        var _yield$MoviesDAO$getC, poolSize, wtimeout, authInfo, response;\n\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return _moviesDAO[\"default\"].getConfiguration();\n\n              case 2:\n                _yield$MoviesDAO$getC = _context6.sent;\n                poolSize = _yield$MoviesDAO$getC.poolSize;\n                wtimeout = _yield$MoviesDAO$getC.wtimeout;\n                authInfo = _yield$MoviesDAO$getC.authInfo;\n\n                try {\n                  response = _objectSpread({\n                    pool_size: poolSize,\n                    wtimeout: wtimeout\n                  }, authInfo);\n                  res.json(response);\n                } catch (e) {\n                  res.status(500).json({\n                    error: e\n                  });\n                }\n\n              case 7:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      function getConfig(_x16, _x17, _x18) {\n        return _getConfig.apply(this, arguments);\n      }\n\n      return getConfig;\n    }()\n  }]);\n  return MoviesController;\n}();\n\nexports[\"default\"] = MoviesController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb3ZpZXNDb250cm9sbGVyIiwicmVxIiwicmVzIiwibmV4dCIsIk1PVklFU19QRVJfUEFHRSIsIk1vdmllc0RBTyIsImdldE1vdmllcyIsIm1vdmllc0xpc3QiLCJ0b3RhbE51bU1vdmllcyIsInJlc3BvbnNlIiwibW92aWVzIiwicGFnZSIsImZpbHRlcnMiLCJlbnRyaWVzX3Blcl9wYWdlIiwidG90YWxfcmVzdWx0cyIsImpzb24iLCJjb3VudHJpZXMiLCJxdWVyeSIsImNvdW50cnlMaXN0IiwiQXJyYXkiLCJpc0FycmF5IiwiZ2V0TW92aWVzQnlDb3VudHJ5IiwidGl0bGVzIiwiaWQiLCJwYXJhbXMiLCJnZXRNb3ZpZUJ5SUQiLCJtb3ZpZSIsInN0YXR1cyIsImVycm9yIiwidXBkYXRlZF90eXBlIiwibGFzdHVwZGF0ZWQiLCJEYXRlIiwiY29uc29sZSIsImxvZyIsInBhcnNlSW50IiwiZSIsInNlYXJjaFR5cGUiLCJPYmplY3QiLCJrZXlzIiwiZ2VucmUiLCJjYXN0IiwidGV4dCIsIlJlZ0V4cCIsImZhY2V0ZWRTZWFyY2giLCJmYWNldGVkU2VhcmNoUmVzdWx0IiwiZmFjZXRzIiwicnVudGltZSIsInJhdGluZyIsImNvdW50IiwiZ2V0Q29uZmlndXJhdGlvbiIsInBvb2xTaXplIiwid3RpbWVvdXQiLCJhdXRoSW5mbyIsInBvb2xfc2l6ZSJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFwzMzYxNlxcT25lRHJpdmVcXEJ1cmVhdVxcbWZsaXgtanNcXHNyY1xcYXBpXFwiLCJzb3VyY2VzIjpbIm1vdmllcy5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNb3ZpZXNEQU8gZnJvbSBcIi4uL2Rhby9tb3ZpZXNEQU9cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb3ZpZXNDb250cm9sbGVyIHtcbiAgc3RhdGljIGFzeW5jIGFwaUdldE1vdmllcyhyZXEsIHJlcywgbmV4dCkge1xuICAgIGNvbnN0IE1PVklFU19QRVJfUEFHRSA9IDIwXG4gICAgY29uc3QgeyBtb3ZpZXNMaXN0LCB0b3RhbE51bU1vdmllcyB9ID0gYXdhaXQgTW92aWVzREFPLmdldE1vdmllcygpXG4gICAgbGV0IHJlc3BvbnNlID0ge1xuICAgICAgbW92aWVzOiBtb3ZpZXNMaXN0LFxuICAgICAgcGFnZTogMCxcbiAgICAgIGZpbHRlcnM6IHt9LFxuICAgICAgZW50cmllc19wZXJfcGFnZTogTU9WSUVTX1BFUl9QQUdFLFxuICAgICAgdG90YWxfcmVzdWx0czogdG90YWxOdW1Nb3ZpZXMsXG4gICAgfVxuICAgIHJlcy5qc29uKHJlc3BvbnNlKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFwaUdldE1vdmllc0J5Q291bnRyeShyZXEsIHJlcywgbmV4dCkge1xuICAgIGxldCBjb3VudHJpZXMgPSByZXEucXVlcnkuY291bnRyaWVzID09IFwiXCIgPyBcIlVTQVwiIDogcmVxLnF1ZXJ5LmNvdW50cmllc1xuICAgIGxldCBjb3VudHJ5TGlzdCA9IEFycmF5LmlzQXJyYXkoY291bnRyaWVzKSA/IGNvdW50cmllcyA6IEFycmF5KGNvdW50cmllcylcbiAgICBsZXQgbW92aWVzTGlzdCA9IGF3YWl0IE1vdmllc0RBTy5nZXRNb3ZpZXNCeUNvdW50cnkoY291bnRyeUxpc3QpXG4gICAgbGV0IHJlc3BvbnNlID0ge1xuICAgICAgdGl0bGVzOiBtb3ZpZXNMaXN0LFxuICAgIH1cbiAgICByZXMuanNvbihyZXNwb25zZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBhcGlHZXRNb3ZpZUJ5SWQocmVxLCByZXMsIG5leHQpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IGlkID0gcmVxLnBhcmFtcy5pZCB8fCB7fVxuICAgICAgbGV0IG1vdmllID0gYXdhaXQgTW92aWVzREFPLmdldE1vdmllQnlJRChpZClcbiAgICAgIGlmICghbW92aWUpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJOb3QgZm91bmRcIiB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGxldCB1cGRhdGVkX3R5cGUgPSBtb3ZpZS5sYXN0dXBkYXRlZCBpbnN0YW5jZW9mIERhdGUgPyBcIkRhdGVcIiA6IFwib3RoZXJcIlxuICAgICAgcmVzLmpzb24oeyBtb3ZpZSwgdXBkYXRlZF90eXBlIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coYGFwaSwgJHtlfWApXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFwaVNlYXJjaE1vdmllcyhyZXEsIHJlcywgbmV4dCkge1xuICAgIGNvbnN0IE1PVklFU19QRVJfUEFHRSA9IDIwXG4gICAgbGV0IHBhZ2VcbiAgICB0cnkge1xuICAgICAgcGFnZSA9IHJlcS5xdWVyeS5wYWdlID8gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2UsIDEwKSA6IDBcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBHb3QgYmFkIHZhbHVlIGZvciBwYWdlOiwgJHtlfWApXG4gICAgICBwYWdlID0gMFxuICAgIH1cbiAgICBsZXQgc2VhcmNoVHlwZVxuICAgIHRyeSB7XG4gICAgICBzZWFyY2hUeXBlID0gT2JqZWN0LmtleXMocmVxLnF1ZXJ5KVswXVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYE5vIHNlYXJjaCBrZXlzIHNwZWNpZmllZDogJHtlfWApXG4gICAgfVxuXG4gICAgbGV0IGZpbHRlcnMgPSB7fVxuXG4gICAgc3dpdGNoIChzZWFyY2hUeXBlKSB7XG4gICAgICBjYXNlIFwiZ2VucmVcIjpcbiAgICAgICAgaWYgKHJlcS5xdWVyeS5nZW5yZSAhPT0gXCJcIikge1xuICAgICAgICAgIGZpbHRlcnMuZ2VucmUgPSByZXEucXVlcnkuZ2VucmVcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBcImNhc3RcIjpcbiAgICAgICAgaWYgKHJlcS5xdWVyeS5jYXN0ICE9PSBcIlwiKSB7XG4gICAgICAgICAgZmlsdGVycy5jYXN0ID0gcmVxLnF1ZXJ5LmNhc3RcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgaWYgKHJlcS5xdWVyeS50ZXh0ICE9PSBcIlwiKSB7XG4gICAgICAgICAgZmlsdGVycy50ZXh0ID0gcmVxLnF1ZXJ5LnRleHRcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgIC8vIG5vdGhpbmcgdG8gZG9cbiAgICB9XG5cbiAgICBjb25zdCB7IG1vdmllc0xpc3QsIHRvdGFsTnVtTW92aWVzIH0gPSBhd2FpdCBNb3ZpZXNEQU8uZ2V0TW92aWVzKHtcbiAgICAgIGZpbHRlcnMsXG4gICAgICBwYWdlLFxuICAgICAgTU9WSUVTX1BFUl9QQUdFLFxuICAgIH0pXG5cbiAgICBsZXQgcmVzcG9uc2UgPSB7XG4gICAgICBtb3ZpZXM6IG1vdmllc0xpc3QsXG4gICAgICBwYWdlOiBwYWdlLFxuICAgICAgZmlsdGVycyxcbiAgICAgIGVudHJpZXNfcGVyX3BhZ2U6IE1PVklFU19QRVJfUEFHRSxcbiAgICAgIHRvdGFsX3Jlc3VsdHM6IHRvdGFsTnVtTW92aWVzLFxuICAgIH1cblxuICAgIHJlcy5qc29uKHJlc3BvbnNlKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFwaUZhY2V0ZWRTZWFyY2gocmVxLCByZXMsIG5leHQpIHtcbiAgICBjb25zdCBNT1ZJRVNfUEVSX1BBR0UgPSAyMFxuXG4gICAgbGV0IHBhZ2VcbiAgICB0cnkge1xuICAgICAgcGFnZSA9IHJlcS5xdWVyeS5wYWdlID8gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2UsIDEwKSA6IDBcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBHb3QgYmFkIHZhbHVlIGZvciBwYWdlLCBkZWZhdWx0aW5nIHRvIDA6ICR7ZX1gKVxuICAgICAgcGFnZSA9IDBcbiAgICB9XG5cbiAgICBsZXQgZmlsdGVycyA9IHt9XG5cbiAgICBmaWx0ZXJzID1cbiAgICAgIHJlcS5xdWVyeS5jYXN0ICE9PSBcIlwiXG4gICAgICAgID8geyBjYXN0OiBuZXcgUmVnRXhwKHJlcS5xdWVyeS5jYXN0LCBcImlcIikgfVxuICAgICAgICA6IHsgY2FzdDogXCJUb20gSGFua3NcIiB9XG5cbiAgICBjb25zdCBmYWNldGVkU2VhcmNoUmVzdWx0ID0gYXdhaXQgTW92aWVzREFPLmZhY2V0ZWRTZWFyY2goe1xuICAgICAgZmlsdGVycyxcbiAgICAgIHBhZ2UsXG4gICAgICBNT1ZJRVNfUEVSX1BBR0UsXG4gICAgfSlcblxuICAgIGxldCByZXNwb25zZSA9IHtcbiAgICAgIG1vdmllczogZmFjZXRlZFNlYXJjaFJlc3VsdC5tb3ZpZXMsXG4gICAgICBmYWNldHM6IHtcbiAgICAgICAgcnVudGltZTogZmFjZXRlZFNlYXJjaFJlc3VsdC5ydW50aW1lLFxuICAgICAgICByYXRpbmc6IGZhY2V0ZWRTZWFyY2hSZXN1bHQucmF0aW5nLFxuICAgICAgfSxcbiAgICAgIHBhZ2U6IHBhZ2UsXG4gICAgICBmaWx0ZXJzLFxuICAgICAgZW50cmllc19wZXJfcGFnZTogTU9WSUVTX1BFUl9QQUdFLFxuICAgICAgdG90YWxfcmVzdWx0czogZmFjZXRlZFNlYXJjaFJlc3VsdC5jb3VudCxcbiAgICB9XG5cbiAgICByZXMuanNvbihyZXNwb25zZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRDb25maWcocmVxLCByZXMsIG5leHQpIHtcbiAgICBjb25zdCB7IHBvb2xTaXplLCB3dGltZW91dCwgYXV0aEluZm8gfSA9IGF3YWl0IE1vdmllc0RBTy5nZXRDb25maWd1cmF0aW9uKClcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0ge1xuICAgICAgICBwb29sX3NpemU6IHBvb2xTaXplLFxuICAgICAgICB3dGltZW91dCxcbiAgICAgICAgLi4uYXV0aEluZm8sXG4gICAgICB9XG4gICAgICByZXMuanNvbihyZXNwb25zZSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlIH0pXG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7O0lBRXFCQSxnQjs7Ozs7Ozs7d0dBQ25CLGlCQUEwQkMsR0FBMUIsRUFBK0JDLEdBQS9CLEVBQW9DQyxJQUFwQztRQUFBOztRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUNRQyxlQURSLEdBQzBCLEVBRDFCO2dCQUFBO2dCQUFBLE9BRStDQyxxQkFBQSxDQUFVQyxTQUFWLEVBRi9DOztjQUFBO2dCQUFBO2dCQUVVQyxVQUZWLHlCQUVVQSxVQUZWO2dCQUVzQkMsY0FGdEIseUJBRXNCQSxjQUZ0QjtnQkFHTUMsUUFITixHQUdpQjtrQkFDYkMsTUFBTSxFQUFFSCxVQURLO2tCQUViSSxJQUFJLEVBQUUsQ0FGTztrQkFHYkMsT0FBTyxFQUFFLEVBSEk7a0JBSWJDLGdCQUFnQixFQUFFVCxlQUpMO2tCQUtiVSxhQUFhLEVBQUVOO2dCQUxGLENBSGpCO2dCQVVFTixHQUFHLENBQUNhLElBQUosQ0FBU04sUUFBVDs7Y0FWRjtjQUFBO2dCQUFBO1lBQUE7VUFBQTtRQUFBO01BQUEsQzs7Ozs7Ozs7Ozs7aUhBYUEsa0JBQW1DUixHQUFuQyxFQUF3Q0MsR0FBeEMsRUFBNkNDLElBQTdDO1FBQUE7UUFBQTtVQUFBO1lBQUE7Y0FBQTtnQkFDTWEsU0FETixHQUNrQmYsR0FBRyxDQUFDZ0IsS0FBSixDQUFVRCxTQUFWLElBQXVCLEVBQXZCLEdBQTRCLEtBQTVCLEdBQW9DZixHQUFHLENBQUNnQixLQUFKLENBQVVELFNBRGhFO2dCQUVNRSxXQUZOLEdBRW9CQyxLQUFLLENBQUNDLE9BQU4sQ0FBY0osU0FBZCxJQUEyQkEsU0FBM0IsR0FBdUNHLEtBQUssQ0FBQ0gsU0FBRCxDQUZoRTtnQkFBQTtnQkFBQSxPQUd5QlgscUJBQUEsQ0FBVWdCLGtCQUFWLENBQTZCSCxXQUE3QixDQUh6Qjs7Y0FBQTtnQkFHTVgsVUFITjtnQkFJTUUsUUFK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","map":{"version":3,"names":["MoviesController","req","res","next","MOVIES_PER_PAGE","MoviesDAO","getMovies","moviesList","totalNumMovies","response","movies","page","filters","entries_per_page","total_results","json","countries","query","countryList","Array","isArray","getMoviesByCountry","titles","id","params","getMovieByID","movie","status","error","updated_type","lastupdated","Date","console","log","parseInt","e","searchType","Object","keys","genre","cast","text","RegExp","facetedSearch","facetedSearchResult","facets","runtime","rating","count","getConfiguration","poolSize","wtimeout","authInfo","pool_size"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\api\\","sources":["movies.controller.js"],"sourcesContent":["import MoviesDAO from \"../dao/moviesDAO\"\n\nexport default class MoviesController {\n  static async apiGetMovies(req, res, next) {\n    const MOVIES_PER_PAGE = 20\n    const { moviesList, totalNumMovies } = await MoviesDAO.getMovies()\n    let response = {\n      movies: moviesList,\n      page: 0,\n      filters: {},\n      entries_per_page: MOVIES_PER_PAGE,\n      total_results: totalNumMovies,\n    }\n    res.json(response)\n  }\n\n  static async apiGetMoviesByCountry(req, res, next) {\n    let countries = req.query.countries == \"\" ? \"USA\" : req.query.countries\n    let countryList = Array.isArray(countries) ? countries : Array(countries)\n    let moviesList = await MoviesDAO.getMoviesByCountry(countryList)\n    let response = {\n      titles: moviesList,\n    }\n    res.json(response)\n  }\n\n  static async apiGetMovieById(req, res, next) {\n    try {\n      let id = req.params.id || {}\n      let movie = await MoviesDAO.getMovieByID(id)\n      if (!movie) {\n        res.status(404).json({ error: \"Not found\" })\n        return\n      }\n      let updated_type = movie.lastupdated instanceof Date ? \"Date\" : \"other\"\n      res.json({ movie, updated_type })\n    } catch (e) {\n      console.log(`api, ${e}`)\n      res.status(500).json({ error: e })\n    }\n  }\n\n  static async apiSearchMovies(req, res, next) {\n    const MOVIES_PER_PAGE = 20\n    let page\n    try {\n      page = req.query.page ? parseInt(req.query.page, 10) : 0\n    } catch (e) {\n      console.error(`Got bad value for page:, ${e}`)\n      page = 0\n    }\n    let searchType\n    try {\n      searchType = Object.keys(req.query)[0]\n    } catch (e) {\n      console.error(`No search keys specified: ${e}`)\n    }\n\n    let filters = {}\n\n    switch (searchType) {\n      case \"genre\":\n        if (req.query.genre !== \"\") {\n          filters.genre = req.query.genre\n        }\n        break\n      case \"cast\":\n        if (req.query.cast !== \"\") {\n          filters.cast = req.query.cast\n        }\n        break\n      case \"text\":\n        if (req.query.text !== \"\") {\n          filters.text = req.query.text\n        }\n        break\n      default:\n      // nothing to do\n    }\n\n    const { moviesList, totalNumMovies } = await MoviesDAO.getMovies({\n      filters,\n      page,\n      MOVIES_PER_PAGE,\n    })\n\n    let response = {\n      movies: moviesList,\n      page: page,\n      filters,\n      entries_per_page: MOVIES_PER_PAGE,\n      total_results: totalNumMovies,\n    }\n\n    res.json(response)\n  }\n\n  static async apiFacetedSearch(req, res, next) {\n    const MOVIES_PER_PAGE = 20\n\n    let page\n    try {\n      page = req.query.page ? parseInt(req.query.page, 10) : 0\n    } catch (e) {\n      console.error(`Got bad value for page, defaulting to 0: ${e}`)\n      page = 0\n    }\n\n    let filters = {}\n\n    filters =\n      req.query.cast !== \"\"\n        ? { cast: new RegExp(req.query.cast, \"i\") }\n        : { cast: \"Tom Hanks\" }\n\n    const facetedSearchResult = await MoviesDAO.facetedSearch({\n      filters,\n      page,\n      MOVIES_PER_PAGE,\n    })\n\n    let response = {\n      movies: facetedSearchResult.movies,\n      facets: {\n        runtime: facetedSearchResult.runtime,\n        rating: facetedSearchResult.rating,\n      },\n      page: page,\n      filters,\n      entries_per_page: MOVIES_PER_PAGE,\n      total_results: facetedSearchResult.count,\n    }\n\n    res.json(response)\n  }\n\n  static async getConfig(req, res, next) {\n    const { poolSize, wtimeout, authInfo } = await MoviesDAO.getConfiguration()\n    try {\n      let response = {\n        pool_size: poolSize,\n        wtimeout,\n        ...authInfo,\n      }\n      res.json(response)\n    } catch (e) {\n      res.status(500).json({ error: e })\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1655825402844},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\dao\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\dao\\\\moviesDAO.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _bson = require(\"bson\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar movies;\nvar mflix;\nvar DEFAULT_SORT = [[\"tomatoes.viewer.numReviews\", -1]];\n\nvar MoviesDAO = /*#__PURE__*/function () {\n  function MoviesDAO() {\n    (0, _classCallCheck2[\"default\"])(this, MoviesDAO);\n  }\n\n  (0, _createClass2[\"default\"])(MoviesDAO, null, [{\n    key: \"injectDB\",\n    value: function () {\n      var _injectDB = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(conn) {\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!movies) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.prev = 2;\n                _context.next = 5;\n                return conn.db(process.env.MFLIX_NS);\n\n              case 5:\n                mflix = _context.sent;\n                _context.next = 8;\n                return conn.db(process.env.MFLIX_NS).collection(\"movies\");\n\n              case 8:\n                movies = _context.sent;\n                this.movies = movies; // this is only for testing\n\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Unable to establish a collection handle in moviesDAO: \".concat(_context.t0));\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 12]]);\n      }));\n\n      function injectDB(_x) {\n        return _injectDB.apply(this, arguments);\n      }\n\n      return injectDB;\n    }()\n    /**\n     * Retrieves the connection pool size, write concern and user roles on the\n     * current client.\n     * @returns {Promise<ConfigurationResult>} An object with configuration details.\n     */\n\n  }, {\n    key: \"getConfiguration\",\n    value: function () {\n      var _getConfiguration = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var roleInfo, authInfo, _movies$s$db$serverCo, poolSize, wtimeout, response;\n\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return mflix.command({\n                  connectionStatus: 1\n                });\n\n              case 2:\n                roleInfo = _context2.sent;\n                authInfo = roleInfo.authInfo.authenticatedUserRoles[0];\n                _movies$s$db$serverCo = movies.s.db.serverConfig.s.options, poolSize = _movies$s$db$serverCo.poolSize, wtimeout = _movies$s$db$serverCo.wtimeout;\n                response = {\n                  poolSize: poolSize,\n                  wtimeout: wtimeout,\n                  authInfo: authInfo\n                };\n                return _context2.abrupt(\"return\", response);\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getConfiguration() {\n        return _getConfiguration.apply(this, arguments);\n      }\n\n      return getConfiguration;\n    }()\n    /**\n     * Finds and returns movies originating from one or more countries.\n     * Returns a list of objects, each object contains a title and an _id.\n     * @param {string[]} countries - The list of countries.\n     * @returns {Promise<CountryResult>} A promise that will resolve to a list of CountryResults.\n     */\n\n  }, {\n    key: \"getMoviesByCountry\",\n    value: function () {\n      var _getMoviesByCountry = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(countries) {\n        var cursor;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return movies.find({\n                  countries: {\n                    $in: countries\n                  }\n                }, {\n                  projection: {\n                    title: 1\n                  }\n                });\n\n              case 3:\n                cursor = _context3.sent;\n                _context3.next = 10;\n                break;\n\n              case 6:\n                _context3.prev = 6;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.error(\"Unable to issue find command, \".concat(_context3.t0));\n                return _context3.abrupt(\"return\", []);\n\n              case 10:\n                return _context3.abrupt(\"return\", cursor.toArray());\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 6]]);\n      }));\n\n      function getMoviesByCountry(_x2) {\n        return _getMoviesByCountry.apply(this, arguments);\n      }\n\n      return getMoviesByCountry;\n    }()\n    /**\n     * Finds and returns movies matching a given text in their title or description.\n     * @param {string} text - The text to match with.\n     * @returns {QueryParams} The QueryParams for text search\n     */\n\n  }, {\n    key: \"textSearchQuery\",\n    value: function textSearchQuery(text) {\n      var query = {\n        $text: {\n          $search: text\n        }\n      };\n      var meta_score = {\n        $meta: \"textScore\"\n      };\n      var sort = [[\"score\", meta_score]];\n      var project = {\n        score: meta_score\n      };\n      return {\n        query: query,\n        project: project,\n        sort: sort\n      };\n    }\n    /**\n     * Finds and returns movies including one or more cast members.\n     * @param {string[]} cast - The cast members to match with.\n     * @returns {QueryParams} The QueryParams for cast search\n     */\n\n  }, {\n    key: \"castSearchQuery\",\n    value: function castSearchQuery(cast) {\n      var searchCast = Array.isArray(cast) ? cast : cast.split(\", \");\n      var query = {\n        cast: {\n          $in: searchCast\n        }\n      };\n      var project = {};\n      var sort = DEFAULT_SORT;\n      return {\n        query: query,\n        project: project,\n        sort: sort\n      };\n    }\n    /**\n     * Finds and returns movies matching a one or more genres.\n     * @param {string[]} genre - The genres to match with.\n     * @returns {QueryParams} The QueryParams for genre search\n     */\n\n  }, {\n    key: \"genreSearchQuery\",\n    value: function genreSearchQuery(genre) {\n      /**\n      Ticket: Text and Subfield Search\n       Given an array of one or more genres, construct a query that searches\n      MongoDB for movies with that genre.\n      */\n      var searchGenre = Array.isArray(genre) ? genre : genre.split(\", \"); // TODO Ticket: Text and Subfield Search\n      // Construct a query that will search for the chosen genre.\n\n      var query = {\n        genres: {\n          $in: searchGenre\n        }\n      };\n      var project = {};\n      var sort = DEFAULT_SORT;\n      return {\n        query: query,\n        project: project,\n        sort: sort\n      };\n    }\n    /**\n     *\n     * @param {Object} filters - The search parameter to use in the query. Comes\n     * in the form of `{cast: { $in: [...castMembers]}}`\n     * @param {number} page - The page of movies to retrieve.\n     * @param {number} moviesPerPage - The number of movies to display per page.\n     * @returns {FacetedSearchReturn} FacetedSearchReturn\n     */\n\n  }, {\n    key: \"facetedSearch\",\n    value: function () {\n      var _facetedSearch = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4() {\n        var _ref,\n            _ref$filters,\n            filters,\n            _ref$page,\n            page,\n            _ref$moviesPerPage,\n            moviesPerPage,\n            matchStage,\n            sortStage,\n            countingPipeline,\n            skipStage,\n            limitStage,\n            facetStage,\n            queryPipeline,\n            results,\n            count,\n            _args4 = arguments;\n\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _ref = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : {}, _ref$filters = _ref.filters, filters = _ref$filters === void 0 ? null : _ref$filters, _ref$page = _ref.page, page = _ref$page === void 0 ? 0 : _ref$page, _ref$moviesPerPage = _ref.moviesPerPage, moviesPerPage = _ref$moviesPerPage === void 0 ? 20 : _ref$moviesPerPage;\n\n                if (!(!filters || !filters.cast)) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                throw new Error(\"Must specify cast members to filter by.\");\n\n              case 3:\n                matchStage = {\n                  $match: filters\n                };\n                sortStage = {\n                  $sort: {\n                    \"tomatoes.viewer.numReviews\": -1\n                  }\n                };\n                countingPipeline = [matchStage, sortStage, {\n                  $count: \"count\"\n                }];\n                skipStage = {\n                  $skip: moviesPerPage * page\n                };\n                limitStage = {\n                  $limit: moviesPerPage\n                };\n                facetStage = {\n                  $facet: {\n                    runtime: [{\n                      $bucket: {\n                        groupBy: \"$runtime\",\n                        boundaries: [0, 60, 90, 120, 180],\n                        \"default\": \"other\",\n                        output: {\n                          count: {\n                            $sum: 1\n                          }\n                        }\n                      }\n                    }],\n                    rating: [{\n                      $bucket: {\n                        groupBy: \"$metacritic\",\n                        boundaries: [0, 50, 70, 90, 100],\n                        \"default\": \"other\",\n                        output: {\n                          count: {\n                            $sum: 1\n                          }\n                        }\n                      }\n                    }],\n                    movies: [{\n                      $addFields: {\n                        title: \"$title\"\n                      }\n                    }]\n                  }\n                };\n                /**\n                Ticket: Faceted Search\n                 Please append the skipStage, limitStage, and facetStage to the queryPipeline\n                (in that order). You can accomplish this by adding the stages directly to\n                the queryPipeline.\n                 The queryPipeline is a Javascript array, so you can use push() or concat()\n                to complete this task, but you might have to do something about `const`.\n                */\n\n                queryPipeline = [matchStage, sortStage, skipStage, limitStage, facetStage // TODO Ticket: Faceted Search\n                // Add the stages to queryPipeline in the correct order.\n                ];\n                _context4.prev = 10;\n                _context4.next = 13;\n                return movies.aggregate(queryPipeline);\n\n              case 13:\n                _context4.next = 15;\n                return _context4.sent.next();\n\n              case 15:\n                results = _context4.sent;\n                _context4.next = 18;\n                return movies.aggregate(countingPipeline);\n\n              case 18:\n                _context4.next = 20;\n                return _context4.sent.next();\n\n              case 20:\n                count = _context4.sent;\n                return _context4.abrupt(\"return\", _objectSpread(_objectSpread({}, results), count));\n\n              case 24:\n                _context4.prev = 24;\n                _context4.t0 = _context4[\"catch\"](10);\n                return _context4.abrupt(\"return\", {\n                  error: \"Results too large, be more restrictive in filter\"\n                });\n\n              case 27:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[10, 24]]);\n      }));\n\n      function facetedSearch() {\n        return _facetedSearch.apply(this, arguments);\n      }\n\n      return facetedSearch;\n    }()\n    /**\n     * Finds and returns movies by country.\n     * Returns a list of objects, each object contains a title and an _id.\n     * @param {Object} filters - The search parameters to use in the query.\n     * @param {number} page - The page of movies to retrieve.\n     * @param {number} moviesPerPage - The number of movies to display per page.\n     * @returns {GetMoviesResult} An object with movie results and total results\n     * that would match this query\n     */\n\n  }, {\n    key: \"getMovies\",\n    value: function () {\n      var _getMovies = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n        var _ref2,\n            _ref2$filters,\n            filters,\n            _ref2$page,\n            page,\n            _ref2$moviesPerPage,\n            moviesPerPage,\n            queryParams,\n            _queryParams,\n            _queryParams$query,\n            query,\n            _queryParams$project,\n            project,\n            _queryParams$sort,\n            sort,\n            cursor,\n            displayCursor,\n            moviesList,\n            totalNumMovies,\n            _args5 = arguments;\n\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _ref2 = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {}, _ref2$filters = _ref2.filters, filters = _ref2$filters === void 0 ? null : _ref2$filters, _ref2$page = _ref2.page, page = _ref2$page === void 0 ? 0 : _ref2$page, _ref2$moviesPerPage = _ref2.moviesPerPage, moviesPerPage = _ref2$moviesPerPage === void 0 ? 20 : _ref2$moviesPerPage;\n                queryParams = {};\n\n                if (filters) {\n                  if (\"text\" in filters) {\n                    queryParams = this.textSearchQuery(filters[\"text\"]);\n                  } else if (\"cast\" in filters) {\n                    queryParams = this.castSearchQuery(filters[\"cast\"]);\n                  } else if (\"genre\" in filters) {\n                    queryParams = this.genreSearchQuery(filters[\"genre\"]);\n                  }\n                }\n\n                _queryParams = queryParams, _queryParams$query = _queryParams.query, query = _queryParams$query === void 0 ? {} : _queryParams$query, _queryParams$project = _queryParams.project, project = _queryParams$project === void 0 ? {} : _queryParams$project, _queryParams$sort = _queryParams.sort, sort = _queryParams$sort === void 0 ? DEFAULT_SORT : _queryParams$sort;\n                _context5.prev = 4;\n                _context5.next = 7;\n                return movies.find(query).project(project).sort(sort);\n\n              case 7:\n                cursor = _context5.sent;\n                _context5.next = 14;\n                break;\n\n              case 10:\n                _context5.prev = 10;\n                _context5.t0 = _context5[\"catch\"](4);\n                console.error(\"Unable to issue find command, \".concat(_context5.t0));\n                return _context5.abrupt(\"return\", {\n                  moviesList: [],\n                  totalNumMovies: 0\n                });\n\n              case 14:\n                /**\n                Ticket: Paging\n                 Before this method returns back to the API, use the \"moviesPerPage\" and\n                \"page\" arguments to decide the movies to display.\n                 Paging can be implemented by using the skip() and limit() cursor methods.\n                */\n                // TODO Ticket: Paging\n                // Use the cursor to only return the movies that belong on the current page\n                displayCursor = cursor.limit(moviesPerPage).skip(moviesPerPage * page);\n                _context5.prev = 15;\n                _context5.next = 18;\n                return displayCursor.toArray();\n\n              case 18:\n                moviesList = _context5.sent;\n\n                if (!(page === 0)) {\n                  _context5.next = 25;\n                  break;\n                }\n\n                _context5.next = 22;\n                return movies.countDocuments(query);\n\n              case 22:\n                _context5.t1 = _context5.sent;\n                _context5.next = 26;\n                break;\n\n              case 25:\n                _context5.t1 = 0;\n\n              case 26:\n                totalNumMovies = _context5.t1;\n                return _context5.abrupt(\"return\", {\n                  moviesList: moviesList,\n                  totalNumMovies: totalNumMovies\n                });\n\n              case 30:\n                _context5.prev = 30;\n                _context5.t2 = _context5[\"catch\"](15);\n                console.error(\"Unable to convert cursor to array or problem counting documents, \".concat(_context5.t2));\n                return _context5.abrupt(\"return\", {\n                  moviesList: [],\n                  totalNumMovies: 0\n                });\n\n              case 34:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[4, 10], [15, 30]]);\n      }));\n\n      function getMovies() {\n        return _getMovies.apply(this, arguments);\n      }\n\n      return getMovies;\n    }()\n    /**\n     * Gets a movie by its id\n     * @param {string} id - The desired movie id, the _id in Mongo\n     * @returns {MflixMovie | null} Returns either a single movie or nothing\n     */\n\n  }, {\n    key: \"getMovieByID\",\n    value: function () {\n      var _getMovieByID = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(id) {\n        var pipeline;\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n\n                /**\n                Ticket: Get Comments\n                 Given a movie ID, build an Aggregation Pipeline to retrieve the comments\n                matching that movie's ID.\n                 The $match stage is already completed. You will need to add a $lookup\n                stage that searches the `comments` collection for the correct comments.\n                */\n                // TODO Ticket: Get Comments\n                // Implement the required pipeline.\n                pipeline = [{\n                  $match: {\n                    _id: (0, _bson.ObjectId)(id)\n                  }\n                }, {\n                  $lookup: {\n                    from: \"comments\",\n                    \"let\": {\n                      id: \"$_id\"\n                    },\n                    pipeline: [{\n                      $match: {\n                        $expr: {\n                          $eq: [\"$movie_id\", \"$$id\"]\n                        }\n                      }\n                    }, {\n                      $sort: {\n                        date: -1\n                      }\n                    }],\n                    as: \"comments\"\n                  }\n                }];\n                _context6.next = 4;\n                return movies.aggregate(pipeline).next();\n\n              case 4:\n                return _context6.abrupt(\"return\", _context6.sent);\n\n              case 7:\n                _context6.prev = 7;\n                _context6.t0 = _context6[\"catch\"](0);\n\n                /**\n                Ticket: Error Handling\n                 Handle the error that occurs when an invalid ID is passed to this method.\n                When this specific error is thrown, the method should return `null`.\n                */\n                // TODO Ticket: Error Handling\n                // Catch the InvalidId error by string matching, and then handle it.\n                console.error(\"Something went wrong in getMovieByID: \".concat(_context6.t0));\n                console.log(_context6.t0.toString());\n                return _context6.abrupt(\"return\", null);\n\n              case 12:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 7]]);\n      }));\n\n      function getMovieByID(_x3) {\n        return _getMovieByID.apply(this, arguments);\n      }\n\n      return getMovieByID;\n    }()\n  }]);\n  return MoviesDAO;\n}();\n/**\n * This is a parsed query, sort, and project bundle.\n * @typedef QueryParams\n * @property {Object} query - The specified query, transformed accordingly\n * @property {any[]} sort - The specified sort\n * @property {Object} project - The specified project, if any\n */\n\n/**\n * Represents a single country result\n * @typedef CountryResult\n * @property {string} ObjectID - The ObjectID of the movie\n * @property {string} title - The title of the movie\n */\n\n/**\n * A Movie from mflix\n * @typedef MflixMovie\n * @property {string} _id\n * @property {string} title\n * @property {number} year\n * @property {number} runtime\n * @property {Date} released\n * @property {string[]} cast\n * @property {number} metacriticd\n * @property {string} poster\n * @property {string} plot\n * @property {string} fullplot\n * @property {string|Date} lastupdated\n * @property {string} type\n * @property {string[]} languages\n * @property {string[]} directors\n * @property {string[]} writers\n * @property {IMDB} imdb\n * @property {string[]} countries\n * @property {string[]} rated\n * @property {string[]} genres\n * @property {string[]} comments\n */\n\n/**\n * IMDB subdocument\n * @typedef IMDB\n * @property {number} rating\n * @property {number} votes\n * @property {number} id\n */\n\n/**\n * Result set for getMovies method\n * @typedef GetMoviesResult\n * @property {MflixMovies[]} moviesList\n * @property {number} totalNumResults\n */\n\n/**\n * Faceted Search Return\n *\n * The type of return from faceted search. It will be a single document with\n * 3 fields: rating, runtime, and movies.\n * @typedef FacetedSearchReturn\n * @property {object} rating\n * @property {object} runtime\n * @property {MFlixMovie[]}movies\n */\n\n\nexports[\"default\"] = MoviesDAO;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb3ZpZXMiLCJtZmxpeCIsIkRFRkFVTFRfU09SVCIsIk1vdmllc0RBTyIsImNvbm4iLCJkYiIsInByb2Nlc3MiLCJlbnYiLCJNRkxJWF9OUyIsImNvbGxlY3Rpb24iLCJjb25zb2xlIiwiZXJyb3IiLCJjb21tYW5kIiwiY29ubmVjdGlvblN0YXR1cyIsInJvbGVJbmZvIiwiYXV0aEluZm8iLCJhdXRoZW50aWNhdGVkVXNlclJvbGVzIiwicyIsInNlcnZlckNvbmZpZyIsIm9wdGlvbnMiLCJwb29sU2l6ZSIsInd0aW1lb3V0IiwicmVzcG9uc2UiLCJjb3VudHJpZXMiLCJmaW5kIiwiJGluIiwicHJvamVjdGlvbiIsInRpdGxlIiwiY3Vyc29yIiwidG9BcnJheSIsInRleHQiLCJxdWVyeSIsIiR0ZXh0IiwiJHNlYXJjaCIsIm1ldGFfc2NvcmUiLCIkbWV0YSIsInNvcnQiLCJwcm9qZWN0Iiwic2NvcmUiLCJjYXN0Iiwic2VhcmNoQ2FzdCIsIkFycmF5IiwiaXNBcnJheSIsInNwbGl0IiwiZ2VucmUiLCJzZWFyY2hHZW5yZSIsImdlbnJlcyIsImZpbHRlcnMiLCJwYWdlIiwibW92aWVzUGVyUGFnZSIsIkVycm9yIiwibWF0Y2hTdGFnZSIsIiRtYXRjaCIsInNvcnRTdGFnZSIsIiRzb3J0IiwiY291bnRpbmdQaXBlbGluZSIsIiRjb3VudCIsInNraXBTdGFnZSIsIiRza2lwIiwibGltaXRTdGFnZSIsIiRsaW1pdCIsImZhY2V0U3RhZ2UiLCIkZmFjZXQiLCJydW50aW1lIiwiJGJ1Y2tldCIsImdyb3VwQnkiLCJib3VuZGFyaWVzIiwib3V0cHV0IiwiY291bnQiLCIkc3VtIiwicmF0aW5nIiwiJGFkZEZpZWxkcyIsInF1ZXJ5UGlwZWxpbmUiLCJhZ2dyZWdhdGUiLCJuZXh0IiwicmVzdWx0cyIsInF1ZXJ5UGFyYW1zIiwidGV4dFNlYXJjaFF1ZXJ5IiwiY2FzdFNlYXJjaFF1ZXJ5IiwiZ2VucmVTZWFyY2hRdWVyeSIsIm1vdmllc0xpc3QiLCJ0b3RhbE51bU1vdmllcyIsImRpc3BsYXlDdXJzb3IiLCJsaW1pdCIsInNraXAiLCJjb3VudERvY3VtZW50cyIsImlkIiwicGlwZWxpbmUiLCJfaWQiLCJPYmplY3RJZCIsIiRsb29rdXAiLCJmcm9tIiwiJGV4cHIiLCIkZXEiLCJkYXRlIiwiYXMiLCJsb2ciLCJ0b1N0cmluZyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFwzMzYxNlxcT25lRHJpdmVcXEJ1cmVhdVxcbWZsaXgtanNcXHNyY1xcZGFvXFwiLCJzb3VyY2VzIjpbIm1vdmllc0RBTy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYmplY3RJZCB9IGZyb20gXCJic29uXCJcblxubGV0IG1vdmllc1xubGV0IG1mbGl4XG5jb25zdCBERUZBVUxUX1NPUlQgPSBbW1widG9tYXRvZXMudmlld2VyLm51bVJldmlld3NcIiwgLTFdXVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb3ZpZXNEQU8ge1xuICBzdGF0aWMgYXN5bmMgaW5qZWN0REIoY29ubikge1xuICAgIGlmIChtb3ZpZXMpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0cnkge1xuICAgICAgbWZsaXggPSBhd2FpdCBjb25uLmRiKHByb2Nlc3MuZW52Lk1GTElYX05TKVxuICAgICAgbW92aWVzID0gYXdhaXQgY29ubi5kYihwcm9jZXNzLmVudi5NRkxJWF9OUykuY29sbGVjdGlvbihcIm1vdmllc1wiKVxuICAgICAgdGhpcy5tb3ZpZXMgPSBtb3ZpZXMgLy8gdGhpcyBpcyBvbmx5IGZvciB0ZXN0aW5nXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYFVuYWJsZSB0byBlc3RhYmxpc2ggYSBjb2xsZWN0aW9uIGhhbmRsZSBpbiBtb3ZpZXNEQU86ICR7ZX1gLFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIGNvbm5lY3Rpb24gcG9vbCBzaXplLCB3cml0ZSBjb25jZXJuIGFuZCB1c2VyIHJvbGVzIG9uIHRoZVxuICAgKiBjdXJyZW50IGNsaWVudC5cbiAgICogQHJldHVybnMge1Byb21pc2U8Q29uZmlndXJhdGlvblJlc3VsdD59IEFuIG9iamVjdCB3aXRoIGNvbmZpZ3VyYXRpb24gZGV0YWlscy5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRDb25maWd1cmF0aW9uKCkge1xuICAgIGNvbnN0IHJvbGVJbmZvID0gYXdhaXQgbWZsaXguY29tbWFuZCh7IGNvbm5lY3Rpb25TdGF0dXM6IDEgfSlcbiAgICBjb25zdCBhdXRoSW5mbyA9IHJvbGVJbmZvLmF1dGhJbmZvLmF1dGhlbnRpY2F0ZWRVc2VyUm9sZXNbMF1cbiAgICBjb25zdCB7IHBvb2xTaXplLCB3dGltZW91dCB9ID0gbW92aWVzLnMuZGIuc2VydmVyQ29uZmlnLnMub3B0aW9uc1xuICAgIGxldCByZXNwb25zZSA9IHtcbiAgICAgIHBvb2xTaXplLFxuICAgICAgd3RpbWVvdXQsXG4gICAgICBhdXRoSW5mbyxcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH1cblxuICAvKipcbiAgICogRmluZHMgYW5kIHJldHVybnMgbW92aWVzIG9yaWdpbmF0aW5nIGZyb20gb25lIG9yIG1vcmUgY291bnRyaWVzLlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBvYmplY3RzLCBlYWNoIG9iamVjdCBjb250YWlucyBhIHRpdGxlIGFuZCBhbiBfaWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IGNvdW50cmllcyAtIFRoZSBsaXN0IG9mIGNvdW50cmllcy5cbiAgICogQHJldHVybnMge1Byb21pc2U8Q291bnRyeVJlc3VsdD59IEEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSB0byBhIGxpc3Qgb2YgQ291bnRyeVJlc3VsdHMuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0TW92aWVzQnlDb3VudHJ5KGNvdW50cmllcykge1xuICAgIC8qKlxuICAgIFRpY2tldDogUHJvamVjdGlvblxuXG4gICAgV3JpdGUgYSBxdWVyeSB0aGF0IG1hdGNoZXMgbW92aWVzIHdpdGggdGhlIGNvdW50cmllcyBpbiB0aGUgXCJjb3VudHJpZXNcIlxuICAgIGxpc3QsIGJ1dCBvbmx5IHJldHVybnMgdGhlIHRpdGxlIGFuZCBfaWQgb2YgZWFjaCBtb3ZpZS5cblxuICAgIFJlbWVtYmVyIHRoYXQgaW4gTW9uZ29EQiwgdGhlICRpbiBvcGVyYXRvciBjYW4gYmUgdXNlZCB3aXRoIGEgbGlzdCB0b1xuICAgIG1hdGNoIG9uZSBvciBtb3JlIHZhbHVlcyBvZiBhIHNwZWNpZmljIGZpZWxkLlxuICAgICovXG5cbiAgICBsZXQgY3Vyc29yXG4gICAgdHJ5IHtcbiAgICAgIC8vIFRPRE8gVGlja2V0OiBQcm9qZWN0aW9uXG4gICAgICAvLyBGaW5kIG1vdmllcyBtYXRjaGluZyB0aGUgXCJjb3VudHJpZXNcIiBsaXN0LCBidXQgb25seSByZXR1cm4gdGhlIHRpdGxlXG4gICAgICAvLyBhbmQgX2lkLiBEbyBub3QgcHV0IGEgbGltaXQgaW4geW91ciBvd24gaW1wbGVtZW50YXRpb24sIHRoZSBsaW1pdFxuICAgICAgLy8gaGVyZSBpcyBvbmx5IGluY2x1ZGVkIHRvIGF2b2lkIHNlbmRpbmcgNDYwMDAgZG9jdW1lbnRzIGRvd24gdGhlXG4gICAgICAvLyB3aXJlLlxuICAgICAgY3Vyc29yID0gYXdhaXQgbW92aWVzLmZpbmQoXG4gICAgICAgIHsgY291bnRyaWVzOiB7ICRpbjogY291bnRyaWVzIH0gfSxcbiAgICAgICAgeyBwcm9qZWN0aW9uOiB7IHRpdGxlOiAxIH0gfSxcbiAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbmFibGUgdG8gaXNzdWUgZmluZCBjb21tYW5kLCAke2V9YClcbiAgICAgIHJldHVybiBbXVxuICAgIH1cblxuICAgIHJldHVybiBjdXJzb3IudG9BcnJheSgpXG4gIH1cblxuICAvKipcbiAgICogRmluZHMgYW5kIHJldHVybnMgbW92aWVzIG1hdGNoaW5nIGEgZ2l2ZW4gdGV4dCBpbiB0aGVpciB0aXRsZSBvciBkZXNjcmlwdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgdGV4dCB0byBtYXRjaCB3aXRoLlxuICAgKiBAcmV0dXJucyB7UXVlcnlQYXJhbXN9IFRoZSBRdWVyeVBhcmFtcyBmb3IgdGV4dCBzZWFyY2hcbiAgICovXG4gIHN0YXRpYyB0ZXh0U2VhcmNoUXVlcnkodGV4dCkge1xuICAgIGNvbnN0IHF1ZXJ5ID0geyAkdGV4dDogeyAkc2VhcmNoOiB0ZXh0IH0gfVxuICAgIGNvbnN0IG1ldGFfc2NvcmUgPSB7ICRtZXRhOiBcInRleHRTY29yZVwiIH1cbiAgICBjb25zdCBzb3J0ID0gW1tcInNjb3JlXCIsIG1ldGFfc2NvcmVdXVxuICAgIGNvbnN0IHByb2plY3QgPSB7IHNjb3JlOiBtZXRhX3Njb3JlIH1cblxuICAgIHJldHVybiB7IHF1ZXJ5LCBwcm9qZWN0LCBzb3J0IH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyBhbmQgcmV0dXJucyBtb3ZpZXMgaW5jbHVkaW5nIG9uZSBvciBtb3JlIGNhc3QgbWVtYmVycy5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gY2FzdCAtIFRoZSBjYXN0IG1lbWJlcnMgdG8gbWF0Y2ggd2l0aC5cbiAgICogQHJldHVybnMge1F1ZXJ5UGFyYW1zfSBUaGUgUXVlcnlQYXJhbXMgZm9yIGNhc3Qgc2VhcmNoXG4gICAqL1xuICBzdGF0aWMgY2FzdFNlYXJjaFF1ZXJ5KGNhc3QpIHtcbiAgICBjb25zdCBzZWFyY2hDYXN0ID0gQXJyYXkuaXNBcnJheShjYXN0KSA/IGNhc3QgOiBjYXN0LnNwbGl0KFwiLCBcIilcblxuICAgIGNvbnN0IHF1ZXJ5ID0geyBjYXN0OiB7ICRpbjogc2VhcmNoQ2FzdCB9IH1cbiAgICBjb25zdCBwcm9qZWN0ID0ge31cbiAgICBjb25zdCBzb3J0ID0gREVGQVVMVF9TT1JUXG5cbiAgICByZXR1cm4geyBxdWVyeSwgcHJvamVjdCwgc29ydCB9XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgYW5kIHJldHVybnMgbW92aWVzIG1hdGNoaW5nIGEgb25lIG9yIG1vcmUgZ2VucmVzLlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBnZW5yZSAtIFRoZSBnZW5yZXMgdG8gbWF0Y2ggd2l0aC5cbiAgICogQHJldHVybnMge1F1ZXJ5UGFyYW1zfSBUaGUgUXVlcnlQYXJhbXMgZm9yIGdlbnJlIHNlYXJjaFxuICAgKi9cbiAgc3RhdGljIGdlbnJlU2VhcmNoUXVlcnkoZ2VucmUpIHtcbiAgICAvKipcbiAgICBUaWNrZXQ6IFRleHQgYW5kIFN1YmZpZWxkIFNlYXJjaFxuXG4gICAgR2l2ZW4gYW4gYXJyYXkgb2Ygb25lIG9yIG1vcmUgZ2VucmVzLCBjb25zdHJ1Y3QgYSBxdWVyeSB0aGF0IHNlYXJjaGVzXG4gICAgTW9uZ29EQiBmb3IgbW92aWVzIHdpdGggdGhhdCBnZW5yZS5cbiAgICAqL1xuXG4gICAgY29uc3Qgc2VhcmNoR2VucmUgPSBBcnJheS5pc0FycmF5KGdlbnJlKSA/IGdlbnJlIDogZ2VucmUuc3BsaXQoXCIsIFwiKVxuXG4gICAgLy8gVE9ETyBUaWNrZXQ6IFRleHQgYW5kIFN1YmZpZWxkIFNlYXJjaFxuICAgIC8vIENvbnN0cnVjdCBhIHF1ZXJ5IHRoYXQgd2lsbCBzZWFyY2ggZm9yIHRoZSBjaG9zZW4gZ2VucmUuXG4gICAgY29uc3QgcXVlcnkgPSB7IGdlbnJlczogeyAkaW46IHNlYXJjaEdlbnJlIH0gfVxuICAgIGNvbnN0IHByb2plY3QgPSB7fVxuICAgIGNvbnN0IHNvcnQgPSBERUZBVUxUX1NPUlRcblxuICAgIHJldHVybiB7IHF1ZXJ5LCBwcm9qZWN0LCBzb3J0IH1cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZmlsdGVycyAtIFRoZSBzZWFyY2ggcGFyYW1ldGVyIHRvIHVzZSBpbiB0aGUgcXVlcnkuIENvbWVzXG4gICAqIGluIHRoZSBmb3JtIG9mIGB7Y2FzdDogeyAkaW46IFsuLi5jYXN0TWVtYmVyc119fWBcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2UgLSBUaGUgcGFnZSBvZiBtb3ZpZXMgdG8gcmV0cmlldmUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtb3ZpZXNQZXJQYWdlIC0gVGhlIG51bWJlciBvZiBtb3ZpZXMgdG8gZGlzcGxheSBwZXIgcGFnZS5cbiAgICogQHJldHVybnMge0ZhY2V0ZWRTZWFyY2hSZXR1cm59IEZhY2V0ZWRTZWFyY2hSZXR1cm5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBmYWNldGVkU2VhcmNoKHtcbiAgICBmaWx0ZXJzID0gbnVsbCxcbiAgICBwYWdlID0gMCxcbiAgICBtb3ZpZXNQZXJQYWdlID0gMjAsXG4gIH0gPSB7fSkge1xuICAgIGlmICghZmlsdGVycyB8fCAhZmlsdGVycy5jYXN0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHNwZWNpZnkgY2FzdCBtZW1iZXJzIHRvIGZpbHRlciBieS5cIilcbiAgICB9XG4gICAgY29uc3QgbWF0Y2hTdGFnZSA9IHsgJG1hdGNoOiBmaWx0ZXJzIH1cbiAgICBjb25zdCBzb3J0U3RhZ2UgPSB7ICRzb3J0OiB7IFwidG9tYXRvZXMudmlld2VyLm51bVJldmlld3NcIjogLTEgfSB9XG4gICAgY29uc3QgY291bnRpbmdQaXBlbGluZSA9IFttYXRjaFN0YWdlLCBzb3J0U3RhZ2UsIHsgJGNvdW50OiBcImNvdW50XCIgfV1cbiAgICBjb25zdCBza2lwU3RhZ2UgPSB7ICRza2lwOiBtb3ZpZXNQZXJQYWdlICogcGFnZSB9XG4gICAgY29uc3QgbGltaXRTdGFnZSA9IHsgJGxpbWl0OiBtb3ZpZXNQZXJQYWdlIH1cbiAgICBjb25zdCBmYWNldFN0YWdlID0ge1xuICAgICAgJGZhY2V0OiB7XG4gICAgICAgIHJ1bnRpbWU6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICAkYnVja2V0OiB7XG4gICAgICAgICAgICAgIGdyb3VwQnk6IFwiJHJ1bnRpbWVcIixcbiAgICAgICAgICAgICAgYm91bmRhcmllczogWzAsIDYwLCA5MCwgMTIwLCAxODBdLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgICAgIGNvdW50OiB7ICRzdW06IDEgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgcmF0aW5nOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgJGJ1Y2tldDoge1xuICAgICAgICAgICAgICBncm91cEJ5OiBcIiRtZXRhY3JpdGljXCIsXG4gICAgICAgICAgICAgIGJvdW5kYXJpZXM6IFswLCA1MCwgNzAsIDkwLCAxMDBdLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgICAgIGNvdW50OiB7ICRzdW06IDEgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgbW92aWVzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgJGFkZEZpZWxkczoge1xuICAgICAgICAgICAgICB0aXRsZTogXCIkdGl0bGVcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfVxuXG4gICAgLyoqXG4gICAgVGlja2V0OiBGYWNldGVkIFNlYXJjaFxuXG4gICAgUGxlYXNlIGFwcGVuZCB0aGUgc2tpcFN0YWdlLCBsaW1pdFN0YWdlLCBhbmQgZmFjZXRTdGFnZSB0byB0aGUgcXVlcnlQaXBlbGluZVxuICAgIChpbiB0aGF0IG9yZGVyKS4gWW91IGNhbiBhY2NvbXBsaXNoIHRoaXMgYnkgYWRkaW5nIHRoZSBzdGFnZXMgZGlyZWN0bHkgdG9cbiAgICB0aGUgcXVlcnlQaXBlbGluZS5cblxuICAgIFRoZSBxdWVyeVBpcGVsaW5lIGlzIGEgSmF2YXNjcmlwdCBhcnJheSwgc28geW91IGNhbiB1c2UgcHVzaCgpIG9yIGNvbmNhdCgpXG4gICAgdG8gY29tcGxldGUgdGhpcyB0YXNrLCBidXQgeW91IG1pZ2h0IGhhdmUgdG8gZG8gc29tZXRoaW5nIGFib3V0IGBjb25zdGAuXG4gICAgKi9cblxuICAgIGNvbnN0IHF1ZXJ5UGlwZWxpbmUgPSBbXG4gICAgICBtYXRjaFN0YWdlLFxuICAgICAgc29ydFN0YWdlLFxuICAgICAgc2tpcFN0YWdlLFxuICAgICAgbGltaXRTdGFnZSxcbiAgICAgIGZhY2V0U3RhZ2UsXG4gICAgICAvLyBUT0RPIFRpY2tldDogRmFjZXRlZCBTZWFyY2hcbiAgICAgIC8vIEFkZCB0aGUgc3RhZ2VzIHRvIHF1ZXJ5UGlwZWxpbmUgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuXG4gICAgXVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCAoYXdhaXQgbW92aWVzLmFnZ3JlZ2F0ZShxdWVyeVBpcGVsaW5lKSkubmV4dCgpXG4gICAgICBjb25zdCBjb3VudCA9IGF3YWl0IChhd2FpdCBtb3ZpZXMuYWdncmVnYXRlKGNvdW50aW5nUGlwZWxpbmUpKS5uZXh0KClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnJlc3VsdHMsXG4gICAgICAgIC4uLmNvdW50LFxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB7IGVycm9yOiBcIlJlc3VsdHMgdG9vIGxhcmdlLCBiZSBtb3JlIHJlc3RyaWN0aXZlIGluIGZpbHRlclwiIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgYW5kIHJldHVybnMgbW92aWVzIGJ5IGNvdW50cnkuXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIG9iamVjdHMsIGVhY2ggb2JqZWN0IGNvbnRhaW5zIGEgdGl0bGUgYW5kIGFuIF9pZC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGZpbHRlcnMgLSBUaGUgc2VhcmNoIHBhcmFtZXRlcnMgdG8gdXNlIGluIHRoZSBxdWVyeS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2UgLSBUaGUgcGFnZSBvZiBtb3ZpZXMgdG8gcmV0cmlldmUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtb3ZpZXNQZXJQYWdlIC0gVGhlIG51bWJlciBvZiBtb3ZpZXMgdG8gZGlzcGxheSBwZXIgcGFnZS5cbiAgICogQHJldHVybnMge0dldE1vdmllc1Jlc3VsdH0gQW4gb2JqZWN0IHdpdGggbW92aWUgcmVzdWx0cyBhbmQgdG90YWwgcmVzdWx0c1xuICAgKiB0aGF0IHdvdWxkIG1hdGNoIHRoaXMgcXVlcnlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRNb3ZpZXMoe1xuICAgIC8vIGhlcmUncyB3aGVyZSB0aGUgZGVmYXVsdCBwYXJhbWV0ZXJzIGFyZSBzZXQgZm9yIHRoZSBnZXRNb3ZpZXMgbWV0aG9kXG4gICAgZmlsdGVycyA9IG51bGwsXG4gICAgcGFnZSA9IDAsXG4gICAgbW92aWVzUGVyUGFnZSA9IDIwLFxuICB9ID0ge30pIHtcbiAgICBsZXQgcXVlcnlQYXJhbXMgPSB7fVxuICAgIGlmIChmaWx0ZXJzKSB7XG4gICAgICBpZiAoXCJ0ZXh0XCIgaW4gZmlsdGVycykge1xuICAgICAgICBxdWVyeVBhcmFtcyA9IHRoaXMudGV4dFNlYXJjaFF1ZXJ5KGZpbHRlcnNbXCJ0ZXh0XCJdKVxuICAgICAgfSBlbHNlIGlmIChcImNhc3RcIiBpbiBmaWx0ZXJzKSB7XG4gICAgICAgIHF1ZXJ5UGFyYW1zID0gdGhpcy5jYXN0U2VhcmNoUXVlcnkoZmlsdGVyc1tcImNhc3RcIl0pXG4gICAgICB9IGVsc2UgaWYgKFwiZ2VucmVcIiBpbiBmaWx0ZXJzKSB7XG4gICAgICAgIHF1ZXJ5UGFyYW1zID0gdGhpcy5nZW5yZVNlYXJjaFF1ZXJ5KGZpbHRlcnNbXCJnZW5yZVwiXSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgeyBxdWVyeSA9IHt9LCBwcm9qZWN0ID0ge30sIHNvcnQgPSBERUZBVUxUX1NPUlQgfSA9IHF1ZXJ5UGFyYW1zXG4gICAgbGV0IGN1cnNvclxuICAgIHRyeSB7XG4gICAgICBjdXJzb3IgPSBhd2FpdCBtb3ZpZXNcbiAgICAgICAgLmZpbmQocXVlcnkpXG4gICAgICAgIC5wcm9qZWN0KHByb2plY3QpXG4gICAgICAgIC5zb3J0KHNvcnQpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIGlzc3VlIGZpbmQgY29tbWFuZCwgJHtlfWApXG4gICAgICByZXR1cm4geyBtb3ZpZXNMaXN0OiBbXSwgdG90YWxOdW1Nb3ZpZXM6IDAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgIFRpY2tldDogUGFnaW5nXG5cbiAgICBCZWZvcmUgdGhpcyBtZXRob2QgcmV0dXJucyBiYWNrIHRvIHRoZSBBUEksIHVzZSB0aGUgXCJtb3ZpZXNQZXJQYWdlXCIgYW5kXG4gICAgXCJwYWdlXCIgYXJndW1lbnRzIHRvIGRlY2lkZSB0aGUgbW92aWVzIHRvIGRpc3BsYXkuXG5cbiAgICBQYWdpbmcgY2FuIGJlIGltcGxlbWVudGVkIGJ5IHVzaW5nIHRoZSBza2lwKCkgYW5kIGxpbWl0KCkgY3Vyc29yIG1ldGhvZHMuXG4gICAgKi9cblxuICAgIC8vIFRPRE8gVGlja2V0OiBQYWdpbmdcbiAgICAvLyBVc2UgdGhlIGN1cnNvciB0byBvbmx5IHJldHVybiB0aGUgbW92aWVzIHRoYXQgYmVsb25nIG9uIHRoZSBjdXJyZW50IHBhZ2VcbiAgICBjb25zdCBkaXNwbGF5Q3Vyc29yID0gY3Vyc29yLmxpbWl0KG1vdmllc1BlclBhZ2UpLnNraXAobW92aWVzUGVyUGFnZSAqIHBhZ2UpXG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgbW92aWVzTGlzdCA9IGF3YWl0IGRpc3BsYXlDdXJzb3IudG9BcnJheSgpXG4gICAgICBjb25zdCB0b3RhbE51bU1vdmllcyA9IHBhZ2UgPT09IDAgPyBhd2FpdCBtb3ZpZXMuY291bnREb2N1bWVudHMocXVlcnkpIDogMFxuXG4gICAgICByZXR1cm4geyBtb3ZpZXNMaXN0LCB0b3RhbE51bU1vdmllcyB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYFVuYWJsZSB0byBjb252ZXJ0IGN1cnNvciB0byBhcnJheSBvciBwcm9ibGVtIGNvdW50aW5nIGRvY3VtZW50cywgJHtlfWAsXG4gICAgICApXG4gICAgICByZXR1cm4geyBtb3ZpZXNMaXN0OiBbXSwgdG90YWxOdW1Nb3ZpZXM6IDAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgbW92aWUgYnkgaXRzIGlkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBkZXNpcmVkIG1vdmllIGlkLCB0aGUgX2lkIGluIE1vbmdvXG4gICAqIEByZXR1cm5zIHtNZmxpeE1vdmllIHwgbnVsbH0gUmV0dXJucyBlaXRoZXIgYSBzaW5nbGUgbW92aWUgb3Igbm90aGluZ1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldE1vdmllQnlJRChpZCkge1xuICAgIHRyeSB7XG4gICAgICAvKipcbiAgICAgIFRpY2tldDogR2V0IENvbW1lbnRzXG5cbiAgICAgIEdpdmVuIGEgbW92aWUgSUQsIGJ1aWxkIGFuIEFnZ3JlZ2F0aW9uIFBpcGVsaW5lIHRvIHJldHJpZXZlIHRoZSBjb21tZW50c1xuICAgICAgbWF0Y2hpbmcgdGhhdCBtb3ZpZSdzIElELlxuXG4gICAgICBUaGUgJG1hdGNoIHN0YWdlIGlzIGFscmVhZHkgY29tcGxldGVkLiBZb3Ugd2lsbCBuZWVkIHRvIGFkZCBhICRsb29rdXBcbiAgICAgIHN0YWdlIHRoYXQgc2VhcmNoZXMgdGhlIGBjb21tZW50c2AgY29sbGVjdGlvbiBmb3IgdGhlIGNvcnJlY3QgY29tbWVudHMuXG4gICAgICAqL1xuXG4gICAgICAvLyBUT0RPIFRpY2tldDogR2V0IENvbW1lbnRzXG4gICAgICAvLyBJbXBsZW1lbnQgdGhlIHJlcXVpcmVkIHBpcGVsaW5lLlxuXG4gICAgICBjb25zdCBwaXBlbGluZSA9IFtcbiAgICAgICAge1xuICAgICAgICAgICRtYXRjaDoge1xuICAgICAgICAgICAgX2lkOiBPYmplY3RJZChpZCksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICRsb29rdXA6IHtcbiAgICAgICAgICAgIGZyb206IFwiY29tbWVudHNcIixcbiAgICAgICAgICAgIGxldDoge1xuICAgICAgICAgICAgICBpZDogXCIkX2lkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGlwZWxpbmU6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICRtYXRjaDoge1xuICAgICAgICAgICAgICAgICAgJGV4cHI6IHtcbiAgICAgICAgICAgICAgICAgICAgJGVxOiBbXCIkbW92aWVfaWRcIiwgXCIkJGlkXCJdLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJHNvcnQ6IHtcbiAgICAgICAgICAgICAgICAgIGRhdGU6IC0xLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYXM6IFwiY29tbWVudHNcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgXVxuICAgICAgcmV0dXJuIGF3YWl0IG1vdmllcy5hZ2dyZWdhdGUocGlwZWxpbmUpLm5leHQoKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8qKlxuICAgICAgVGlja2V0OiBFcnJvciBIYW5kbGluZ1xuXG4gICAgICBIYW5kbGUgdGhlIGVycm9yIHRoYXQgb2NjdXJzIHdoZW4gYW4gaW52YWxpZCBJRCBpcyBwYXNzZWQgdG8gdGhpcyBtZXRob2QuXG4gICAgICBXaGVuIHRoaXMgc3BlY2lmaWMgZXJyb3IgaXMgdGhyb3duLCB0aGUgbWV0aG9kIHNob3VsZCByZXR1cm4gYG51bGxgLlxuICAgICAgKi9cblxuICAgICAgLy8gVE9ETyBUaWNrZXQ6IEVycm9yIEhhbmRsaW5nXG4gICAgICAvLyBDYXRjaCB0aGUgSW52YWxpZElkIGVycm9yIGJ5IHN0cmluZyBtYXRjaGluZywgYW5kIHRoZW4gaGFuZGxlIGl0LlxuICAgICAgY29uc29sZS5lcnJvcihgU29tZXRoaW5nIHdlbnQgd3JvbmcgaW4gZ2V0TW92aWVCeUlEOiAke2V9YClcbiAgICAgIGNvbnNvbGUubG9nKGUudG9TdHJpbmcoKSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVGhpcyBpcyBhIHBhcnNlZCBxdWVyeSwgc29ydCwgYW5kIHByb2plY3QgYnVuZGxlLlxuICogQHR5cGVkZWYgUXVlcnlQYXJhbXNcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBxdWVyeSAtIFRoZSBzcGVjaWZpZWQgcXVlcnksIHRyYW5zZm9ybWVkIGFjY29yZGluZ2x5XG4gKiBAcHJvcGVydHkge2FueVtdfSBzb3J0IC0gVGhlIHNwZWNpZmllZCBzb3J0XG4gKiBAcHJvcGVydHkge09iamVjdH0gcHJvamVjdCAtIFRoZSBzcGVjaWZpZWQgcHJvamVjdCwgaWYgYW55XG4gKi9cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgc2luZ2xlIGNvdW50cnkgcmVzdWx0XG4gKiBAdHlwZWRlZiBDb3VudHJ5UmVzdWx0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gT2JqZWN0SUQgLSBUaGUgT2JqZWN0SUQgb2YgdGhlIG1vdmllXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdGl0bGUgLSBUaGUgdGl0bGUgb2YgdGhlIG1vdmllXG4gKi9cblxuLyoqXG4gKiBBIE1vdmllIGZyb20gbWZsaXhcbiAqIEB0eXBlZGVmIE1mbGl4TW92aWVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBfaWRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0aXRsZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IHllYXJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBydW50aW1lXG4gKiBAcHJvcGVydHkge0RhdGV9IHJlbGVhc2VkXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBjYXN0XG4gKiBAcHJvcGVydHkge251bWJlcn0gbWV0YWNyaXRpY2RcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwb3N0ZXJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwbG90XG4gKiBAcHJvcGVydHkge3N0cmluZ30gZnVsbHBsb3RcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfERhdGV9IGxhc3R1cGRhdGVkXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZVxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gbGFuZ3VhZ2VzXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBkaXJlY3RvcnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IHdyaXRlcnNcbiAqIEBwcm9wZXJ0eSB7SU1EQn0gaW1kYlxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gY291bnRyaWVzXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSByYXRlZFxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gZ2VucmVzXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBjb21tZW50c1xuICovXG5cbi8qKlxuICogSU1EQiBzdWJkb2N1bWVudFxuICogQHR5cGVkZWYgSU1EQlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJhdGluZ1xuICogQHByb3BlcnR5IHtudW1iZXJ9IHZvdGVzXG4gKiBAcHJvcGVydHkge251bWJlcn0gaWRcbiAqL1xuXG4vKipcbiAqIFJlc3VsdCBzZXQgZm9yIGdldE1vdmllcyBtZXRob2RcbiAqIEB0eXBlZGVmIEdldE1vdmllc1Jlc3VsdFxuICogQHByb3BlcnR5IHtNZmxpeE1vdmllc1tdfSBtb3ZpZXNMaXN0XG4gKiBAcHJvcGVydHkge251bWJlcn0gdG90YWxOdW1SZXN1bHRzXG4gKi9cblxuLyoqXG4gKiBGYWNldGVkIFNlYXJjaCBSZXR1cm5cbiAqXG4gKiBUaGUgdHlwZSBvZiByZXR1cm4gZnJvbSBmYWNldGVkIHNlYXJjaC4gSXQgd2lsbCBiZSBhIHNpbmdsZSBkb2N1bWVudCB3aXRoXG4gKiAzIGZpZWxkczogcmF0aW5nLCBydW50aW1lLCBhbmQgbW92aWVzLlxuICogQHR5cGVkZWYgRmFjZXRlZFNlYXJjaFJldHVyblxuICogQHByb3BlcnR5IHtvYmplY3R9IHJhdGluZ1xuICogQHByb3BlcnR5IHtvYmplY3R9IHJ1bnRpbWVcbiAqIEBwcm9wZXJ0eSB7TUZsaXhNb3ZpZVtdfW1vdmllc1xuICovXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7O0FBRUEsSUFBSUEsTUFBSjtBQUNBLElBQUlDLEtBQUo7QUFDQSxJQUFNQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLDRCQUFELEVBQStCLENBQUMsQ0FBaEMsQ0FBRCxDQUFyQjs7SUFFcUJDLFM7Ozs7Ozs7O29HQUNuQixpQkFBc0JDLElBQXRCO1FBQUE7VUFBQTtZQUFBO2NBQUE7Z0JBQUEsS0FDTUosTUFETjtrQkFBQTtrQkFBQTtnQkFBQTs7Z0JBQUE7O2NBQUE7Z0JBQUE7Z0JBQUE7Z0JBQUEsT0FLa0JJLElBQUksQ0FBQ0MsRUFBTCxDQUFRQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFBcEIsQ0FMbEI7O2NBQUE7Z0JBS0lQLEtBTEo7Z0JBQUE7Z0JBQUEsT0FNbUJHLElBQUksQ0FBQ0MsRUFBTCxDQUFRQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFBcEIsRUFBOEJDLFVBQTlCLENBQXlDLFFBQXpDLENBTm5COztjQUFBO2dCQU1JVCxNQU5KO2dCQU9JLEtBQUtBLE1BQUwsR0FBY0EsTUFBZCxDQVBKLENBT3lCOztnQkFQekI7Z0JBQUE7O2NBQUE7Z0JBQUE7Z0JBQUE7Z0JBU0lVLE9BQU8sQ0FBQ0MsS0FBUjs7Y0FUSjtjQUFBO2dCQUFBO1lBQUE7VUFBQTtRQUFBO01BQUEsQzs7Ozs7Ozs7SUFlQTtBQUNGO0FBQ0E7QUFDQTtBQUNBOzs7Ozs0R0FDRTtRQUFBOztRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUFBO2dCQUFBLE9BQ3lCVixLQUFLLENBQUNXLE9BQU4sQ0FBYztrQkFBRUMsZ0JBQWdCLEVBQUU7Z0JBQXBCLENBQWQsQ0FEekI7O2NBQUE7Z0JBQ1FDLFFBRFI7Z0JBRVFDLFFBRlIsR0FFbUJELFFBQVEsQ0FBQ0MsUUFBVCxD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QUE7TUFBQSxDOzs7Ozs7OztJQXVEQTtBQUNGO0FBQ0E7QUFDQTtBQUNBOzs7Ozt3R0FDRSxrQkFBMEJLLEVBQTFCO1FBQUE7UUFBQTtVQUFBO1lBQUE7Y0FBQTtnQkFBQTs7Z0JBRUk7QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Z0JBSU07Z0JBQ0E7Z0JBRU1DLFFBZlYsR0FlcUIsQ0FDZjtrQkFDRW5DLE1BQU0sRUFBRTtvQkFDTm9DLEdBQUcsRUFBRSxJQUFBQyxjQUFBLEVBQVNILEVBQVQ7a0JBREM7Z0JBRFYsQ0FEZSxFQU1mO2tCQUNFSSxPQUFPLEVBQUU7b0JBQ1BDLElBQUksRUFBRSxVQURDO29CQUVQLE9BQUs7c0JBQ0hMLEVBQUUsRUFBRTtvQkFERCxDQUZFO29CQUtQQyxRQUFRLEVBQUUsQ0FDUjtzQkFDRW5DLE1BQU0sRUFBRTt3QkFDTndDLEtBQUssRUFBRTswQkFDTEMsR0FBRyxFQUFFLENBQUMsV0FBRCxFQUFjLE1BQWQ7d0JBREE7c0JBREQ7b0JBRFYsQ0FEUSxFQVFSO3NCQUNFdkMsS0FBSyxFQUFFO3dCQUNMd0MsSUFBSSxFQUFFLENBQUM7c0JBREY7b0JBRFQsQ0FSUSxDQUxIO29CQW1CUEMsRUFBRSxFQUFFO2tCQW5CRztnQkFEWCxDQU5lLENBZnJCO2dCQUFBO2dCQUFBLE9BNkNpQi9GLE1BQU0sQ0FBQ3lFLFNBQVAsQ0FBaUJjLFFBQWpCLEVBQTJCYixJQUEzQixFQTdDakI7O2NBQUE7Z0JBQUE7O2NBQUE7Z0JBQUE7Z0JBQUE7O2dCQStDSTtBQUNOO0FBQ0E7QUFDQTtBQUNBO2dCQUdNO2dCQUNBO2dCQUNBaEUsT0FBTyxDQUFDQyxLQUFSO2dCQUNBRCxPQUFPLENBQUNzRixHQUFSLENBQVksYUFBRUMsUUFBRixFQUFaO2dCQXpESixrQ0EwRFcsSUExRFg7O2NBQUE7Y0FBQTtnQkFBQTtZQUFBO1VBQUE7UUFBQTtNQUFBLEM7Ozs7Ozs7Ozs7O0FBK0RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIn0=","map":{"version":3,"names":["movies","mflix","DEFAULT_SORT","MoviesDAO","conn","db","process","env","MFLIX_NS","collection","console","error","command","connectionStatus","roleInfo","authInfo","authenticatedUserRoles","s","serverConfig","options","poolSize","wtimeout","response","countries","find","$in","projection","title","cursor","toArray","text","query","$text","$search","meta_score","$meta","sort","project","score","cast","searchCast","Array","isArray","split","genre","searchGenre","genres","filters","page","moviesPerPage","Error","matchStage","$match","sortStage","$sort","countingPipeline","$count","skipStage","$skip","limitStage","$limit","facetStage","$facet","runtime","$bucket","groupBy","boundaries","output","count","$sum","rating","$addFields","queryPipeline","aggregate","next","results","queryParams","textSearchQuery","castSearchQuery","genreSearchQuery","moviesList","totalNumMovies","displayCursor","limit","skip","countDocuments","id","pipeline","_id","ObjectId","$lookup","from","$expr","$eq","date","as","log","toString"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\dao\\","sources":["moviesDAO.js"],"sourcesContent":["import { ObjectId } from \"bson\"\n\nlet movies\nlet mflix\nconst DEFAULT_SORT = [[\"tomatoes.viewer.numReviews\", -1]]\n\nexport default class MoviesDAO {\n  static async injectDB(conn) {\n    if (movies) {\n      return\n    }\n    try {\n      mflix = await conn.db(process.env.MFLIX_NS)\n      movies = await conn.db(process.env.MFLIX_NS).collection(\"movies\")\n      this.movies = movies // this is only for testing\n    } catch (e) {\n      console.error(\n        `Unable to establish a collection handle in moviesDAO: ${e}`,\n      )\n    }\n  }\n\n  /**\n   * Retrieves the connection pool size, write concern and user roles on the\n   * current client.\n   * @returns {Promise<ConfigurationResult>} An object with configuration details.\n   */\n  static async getConfiguration() {\n    const roleInfo = await mflix.command({ connectionStatus: 1 })\n    const authInfo = roleInfo.authInfo.authenticatedUserRoles[0]\n    const { poolSize, wtimeout } = movies.s.db.serverConfig.s.options\n    let response = {\n      poolSize,\n      wtimeout,\n      authInfo,\n    }\n    return response\n  }\n\n  /**\n   * Finds and returns movies originating from one or more countries.\n   * Returns a list of objects, each object contains a title and an _id.\n   * @param {string[]} countries - The list of countries.\n   * @returns {Promise<CountryResult>} A promise that will resolve to a list of CountryResults.\n   */\n  static async getMoviesByCountry(countries) {\n    /**\n    Ticket: Projection\n\n    Write a query that matches movies with the countries in the \"countries\"\n    list, but only returns the title and _id of each movie.\n\n    Remember that in MongoDB, the $in operator can be used with a list to\n    match one or more values of a specific field.\n    */\n\n    let cursor\n    try {\n      // TODO Ticket: Projection\n      // Find movies matching the \"countries\" list, but only return the title\n      // and _id. Do not put a limit in your own implementation, the limit\n      // here is only included to avoid sending 46000 documents down the\n      // wire.\n      cursor = await movies.find(\n        { countries: { $in: countries } },\n        { projection: { title: 1 } },\n      )\n    } catch (e) {\n      console.error(`Unable to issue find command, ${e}`)\n      return []\n    }\n\n    return cursor.toArray()\n  }\n\n  /**\n   * Finds and returns movies matching a given text in their title or description.\n   * @param {string} text - The text to match with.\n   * @returns {QueryParams} The QueryParams for text search\n   */\n  static textSearchQuery(text) {\n    const query = { $text: { $search: text } }\n    const meta_score = { $meta: \"textScore\" }\n    const sort = [[\"score\", meta_score]]\n    const project = { score: meta_score }\n\n    return { query, project, sort }\n  }\n\n  /**\n   * Finds and returns movies including one or more cast members.\n   * @param {string[]} cast - The cast members to match with.\n   * @returns {QueryParams} The QueryParams for cast search\n   */\n  static castSearchQuery(cast) {\n    const searchCast = Array.isArray(cast) ? cast : cast.split(\", \")\n\n    const query = { cast: { $in: searchCast } }\n    const project = {}\n    const sort = DEFAULT_SORT\n\n    return { query, project, sort }\n  }\n\n  /**\n   * Finds and returns movies matching a one or more genres.\n   * @param {string[]} genre - The genres to match with.\n   * @returns {QueryParams} The QueryParams for genre search\n   */\n  static genreSearchQuery(genre) {\n    /**\n    Ticket: Text and Subfield Search\n\n    Given an array of one or more genres, construct a query that searches\n    MongoDB for movies with that genre.\n    */\n\n    const searchGenre = Array.isArray(genre) ? genre : genre.split(\", \")\n\n    // TODO Ticket: Text and Subfield Search\n    // Construct a query that will search for the chosen genre.\n    const query = { genres: { $in: searchGenre } }\n    const project = {}\n    const sort = DEFAULT_SORT\n\n    return { query, project, sort }\n  }\n\n  /**\n   *\n   * @param {Object} filters - The search parameter to use in the query. Comes\n   * in the form of `{cast: { $in: [...castMembers]}}`\n   * @param {number} page - The page of movies to retrieve.\n   * @param {number} moviesPerPage - The number of movies to display per page.\n   * @returns {FacetedSearchReturn} FacetedSearchReturn\n   */\n  static async facetedSearch({\n    filters = null,\n    page = 0,\n    moviesPerPage = 20,\n  } = {}) {\n    if (!filters || !filters.cast) {\n      throw new Error(\"Must specify cast members to filter by.\")\n    }\n    const matchStage = { $match: filters }\n    const sortStage = { $sort: { \"tomatoes.viewer.numReviews\": -1 } }\n    const countingPipeline = [matchStage, sortStage, { $count: \"count\" }]\n    const skipStage = { $skip: moviesPerPage * page }\n    const limitStage = { $limit: moviesPerPage }\n    const facetStage = {\n      $facet: {\n        runtime: [\n          {\n            $bucket: {\n              groupBy: \"$runtime\",\n              boundaries: [0, 60, 90, 120, 180],\n              default: \"other\",\n              output: {\n                count: { $sum: 1 },\n              },\n            },\n          },\n        ],\n        rating: [\n          {\n            $bucket: {\n              groupBy: \"$metacritic\",\n              boundaries: [0, 50, 70, 90, 100],\n              default: \"other\",\n              output: {\n                count: { $sum: 1 },\n              },\n            },\n          },\n        ],\n        movies: [\n          {\n            $addFields: {\n              title: \"$title\",\n            },\n          },\n        ],\n      },\n    }\n\n    /**\n    Ticket: Faceted Search\n\n    Please append the skipStage, limitStage, and facetStage to the queryPipeline\n    (in that order). You can accomplish this by adding the stages directly to\n    the queryPipeline.\n\n    The queryPipeline is a Javascript array, so you can use push() or concat()\n    to complete this task, but you might have to do something about `const`.\n    */\n\n    const queryPipeline = [\n      matchStage,\n      sortStage,\n      skipStage,\n      limitStage,\n      facetStage,\n      // TODO Ticket: Faceted Search\n      // Add the stages to queryPipeline in the correct order.\n    ]\n\n    try {\n      const results = await (await movies.aggregate(queryPipeline)).next()\n      const count = await (await movies.aggregate(countingPipeline)).next()\n      return {\n        ...results,\n        ...count,\n      }\n    } catch (e) {\n      return { error: \"Results too large, be more restrictive in filter\" }\n    }\n  }\n\n  /**\n   * Finds and returns movies by country.\n   * Returns a list of objects, each object contains a title and an _id.\n   * @param {Object} filters - The search parameters to use in the query.\n   * @param {number} page - The page of movies to retrieve.\n   * @param {number} moviesPerPage - The number of movies to display per page.\n   * @returns {GetMoviesResult} An object with movie results and total results\n   * that would match this query\n   */\n  static async getMovies({\n    // here's where the default parameters are set for the getMovies method\n    filters = null,\n    page = 0,\n    moviesPerPage = 20,\n  } = {}) {\n    let queryParams = {}\n    if (filters) {\n      if (\"text\" in filters) {\n        queryParams = this.textSearchQuery(filters[\"text\"])\n      } else if (\"cast\" in filters) {\n        queryParams = this.castSearchQuery(filters[\"cast\"])\n      } else if (\"genre\" in filters) {\n        queryParams = this.genreSearchQuery(filters[\"genre\"])\n      }\n    }\n\n    let { query = {}, project = {}, sort = DEFAULT_SORT } = queryParams\n    let cursor\n    try {\n      cursor = await movies\n        .find(query)\n        .project(project)\n        .sort(sort)\n    } catch (e) {\n      console.error(`Unable to issue find command, ${e}`)\n      return { moviesList: [], totalNumMovies: 0 }\n    }\n\n    /**\n    Ticket: Paging\n\n    Before this method returns back to the API, use the \"moviesPerPage\" and\n    \"page\" arguments to decide the movies to display.\n\n    Paging can be implemented by using the skip() and limit() cursor methods.\n    */\n\n    // TODO Ticket: Paging\n    // Use the cursor to only return the movies that belong on the current page\n    const displayCursor = cursor.limit(moviesPerPage).skip(moviesPerPage * page)\n\n    try {\n      const moviesList = await displayCursor.toArray()\n      const totalNumMovies = page === 0 ? await movies.countDocuments(query) : 0\n\n      return { moviesList, totalNumMovies }\n    } catch (e) {\n      console.error(\n        `Unable to convert cursor to array or problem counting documents, ${e}`,\n      )\n      return { moviesList: [], totalNumMovies: 0 }\n    }\n  }\n\n  /**\n   * Gets a movie by its id\n   * @param {string} id - The desired movie id, the _id in Mongo\n   * @returns {MflixMovie | null} Returns either a single movie or nothing\n   */\n  static async getMovieByID(id) {\n    try {\n      /**\n      Ticket: Get Comments\n\n      Given a movie ID, build an Aggregation Pipeline to retrieve the comments\n      matching that movie's ID.\n\n      The $match stage is already completed. You will need to add a $lookup\n      stage that searches the `comments` collection for the correct comments.\n      */\n\n      // TODO Ticket: Get Comments\n      // Implement the required pipeline.\n\n      const pipeline = [\n        {\n          $match: {\n            _id: ObjectId(id),\n          },\n        },\n        {\n          $lookup: {\n            from: \"comments\",\n            let: {\n              id: \"$_id\",\n            },\n            pipeline: [\n              {\n                $match: {\n                  $expr: {\n                    $eq: [\"$movie_id\", \"$$id\"],\n                  },\n                },\n              },\n              {\n                $sort: {\n                  date: -1,\n                },\n              },\n            ],\n            as: \"comments\",\n          },\n        },\n      ]\n      return await movies.aggregate(pipeline).next()\n    } catch (e) {\n      /**\n      Ticket: Error Handling\n\n      Handle the error that occurs when an invalid ID is passed to this method.\n      When this specific error is thrown, the method should return `null`.\n      */\n\n      // TODO Ticket: Error Handling\n      // Catch the InvalidId error by string matching, and then handle it.\n      console.error(`Something went wrong in getMovieByID: ${e}`)\n      console.log(e.toString())\n      return null\n    }\n  }\n}\n\n/**\n * This is a parsed query, sort, and project bundle.\n * @typedef QueryParams\n * @property {Object} query - The specified query, transformed accordingly\n * @property {any[]} sort - The specified sort\n * @property {Object} project - The specified project, if any\n */\n\n/**\n * Represents a single country result\n * @typedef CountryResult\n * @property {string} ObjectID - The ObjectID of the movie\n * @property {string} title - The title of the movie\n */\n\n/**\n * A Movie from mflix\n * @typedef MflixMovie\n * @property {string} _id\n * @property {string} title\n * @property {number} year\n * @property {number} runtime\n * @property {Date} released\n * @property {string[]} cast\n * @property {number} metacriticd\n * @property {string} poster\n * @property {string} plot\n * @property {string} fullplot\n * @property {string|Date} lastupdated\n * @property {string} type\n * @property {string[]} languages\n * @property {string[]} directors\n * @property {string[]} writers\n * @property {IMDB} imdb\n * @property {string[]} countries\n * @property {string[]} rated\n * @property {string[]} genres\n * @property {string[]} comments\n */\n\n/**\n * IMDB subdocument\n * @typedef IMDB\n * @property {number} rating\n * @property {number} votes\n * @property {number} id\n */\n\n/**\n * Result set for getMovies method\n * @typedef GetMoviesResult\n * @property {MflixMovies[]} moviesList\n * @property {number} totalNumResults\n */\n\n/**\n * Faceted Search Return\n *\n * The type of return from faceted search. It will be a single document with\n * 3 fields: rating, runtime, and movies.\n * @typedef FacetedSearchReturn\n * @property {object} rating\n * @property {object} runtime\n * @property {MFlixMovie[]}movies\n */\n"],"mappings":"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"}},"mtime":1656337723578},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\comments.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _usersDAO = _interopRequireDefault(require(\"../dao/usersDAO\"));\n\nvar _commentsDAO = _interopRequireDefault(require(\"../dao/commentsDAO\"));\n\nvar _moviesDAO = _interopRequireDefault(require(\"../dao/moviesDAO\"));\n\nvar _users = require(\"./users.controller\");\n\nvar _bson = require(\"bson\");\n\nvar CommentsController = /*#__PURE__*/function () {\n  function CommentsController() {\n    (0, _classCallCheck2[\"default\"])(this, CommentsController);\n  }\n\n  (0, _createClass2[\"default\"])(CommentsController, null, [{\n    key: \"apiPostComment\",\n    value: function () {\n      var _apiPostComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res, next) {\n        var userJwt, user, error, movieId, comment, date, commentResponse, updatedComments;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context.next = 4;\n                return _users.User.decoded(userJwt);\n\n              case 4:\n                user = _context.sent;\n                error = user.error;\n\n                if (!error) {\n                  _context.next = 9;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: error\n                });\n                return _context.abrupt(\"return\");\n\n              case 9:\n                movieId = req.body.movie_id;\n                comment = req.body.comment;\n                date = new Date();\n                _context.next = 14;\n                return _commentsDAO[\"default\"].addComment((0, _bson.ObjectId)(movieId), user, comment, date);\n\n              case 14:\n                commentResponse = _context.sent;\n                _context.next = 17;\n                return _moviesDAO[\"default\"].getMovieByID(movieId);\n\n              case 17:\n                updatedComments = _context.sent;\n                res.json({\n                  status: \"success\",\n                  comments: updatedComments.comments\n                });\n                _context.next = 24;\n                break;\n\n              case 21:\n                _context.prev = 21;\n                _context.t0 = _context[\"catch\"](0);\n                res.status(500).json({\n                  e: _context.t0\n                });\n\n              case 24:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 21]]);\n      }));\n\n      function apiPostComment(_x, _x2, _x3) {\n        return _apiPostComment.apply(this, arguments);\n      }\n\n      return apiPostComment;\n    }()\n  }, {\n    key: \"apiUpdateComment\",\n    value: function () {\n      var _apiUpdateComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res, next) {\n        var userJwt, user, error, commentId, text, date, commentResponse, movieId, updatedComments;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context2.next = 4;\n                return _users.User.decoded(userJwt);\n\n              case 4:\n                user = _context2.sent;\n                error = user.error;\n\n                if (!error) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: error\n                });\n                return _context2.abrupt(\"return\");\n\n              case 9:\n                commentId = req.body.comment_id;\n                text = req.body.updated_comment;\n                date = new Date();\n                _context2.next = 14;\n                return _commentsDAO[\"default\"].updateComment((0, _bson.ObjectId)(commentId), user.email, text, date);\n\n              case 14:\n                commentResponse = _context2.sent;\n                error = commentResponse.error;\n\n                if (error) {\n                  res.status(400).json({\n                    error: error\n                  });\n                }\n\n                if (!(commentResponse.modifiedCount === 0)) {\n                  _context2.next = 19;\n                  break;\n                }\n\n                throw new Error(\"unable to update comment - user may not be original poster\");\n\n              case 19:\n                movieId = req.body.movie_id;\n                _context2.next = 22;\n                return _moviesDAO[\"default\"].getMovieByID(movieId);\n\n              case 22:\n                updatedComments = _context2.sent;\n                res.json({\n                  comments: updatedComments.comments\n                });\n                _context2.next = 29;\n                break;\n\n              case 26:\n                _context2.prev = 26;\n                _context2.t0 = _context2[\"catch\"](0);\n                res.status(500).json({\n                  e: _context2.t0\n                });\n\n              case 29:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 26]]);\n      }));\n\n      function apiUpdateComment(_x4, _x5, _x6) {\n        return _apiUpdateComment.apply(this, arguments);\n      }\n\n      return apiUpdateComment;\n    }()\n  }, {\n    key: \"apiDeleteComment\",\n    value: function () {\n      var _apiDeleteComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(req, res, next) {\n        var userJwt, user, error, commentId, userEmail, commentResponse, movieId, _yield$MoviesDAO$getM, comments;\n\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context3.next = 4;\n                return _users.User.decoded(userJwt);\n\n              case 4:\n                user = _context3.sent;\n                error = user.error;\n\n                if (!error) {\n                  _context3.next = 9;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: error\n                });\n                return _context3.abrupt(\"return\");\n\n              case 9:\n                commentId = req.body.comment_id;\n                userEmail = user.email;\n                _context3.next = 13;\n                return _commentsDAO[\"default\"].deleteComment((0, _bson.ObjectId)(commentId), userEmail);\n\n              case 13:\n                commentResponse = _context3.sent;\n                movieId = req.body.movie_id;\n                _context3.next = 17;\n                return _moviesDAO[\"default\"].getMovieByID(movieId);\n\n              case 17:\n                _yield$MoviesDAO$getM = _context3.sent;\n                comments = _yield$MoviesDAO$getM.comments;\n                res.json({\n                  comments: comments\n                });\n                _context3.next = 25;\n                break;\n\n              case 22:\n                _context3.prev = 22;\n                _context3.t0 = _context3[\"catch\"](0);\n                res.status(500).json({\n                  e: _context3.t0\n                });\n\n              case 25:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 22]]);\n      }));\n\n      function apiDeleteComment(_x7, _x8, _x9) {\n        return _apiDeleteComment.apply(this, arguments);\n      }\n\n      return apiDeleteComment;\n    }()\n  }, {\n    key: \"apiCommentReport\",\n    value: function () {\n      var _apiCommentReport = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res, next) {\n        var userJwt, user, error, report;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context4.next = 4;\n                return _users.User.decoded(userJwt);\n\n              case 4:\n                user = _context4.sent;\n                error = user.error;\n\n                if (!error) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: error\n                });\n                return _context4.abrupt(\"return\");\n\n              case 9:\n                if (!_usersDAO[\"default\"].checkAdmin(user.email)) {\n                  _context4.next = 15;\n                  break;\n                }\n\n                _context4.next = 12;\n                return _commentsDAO[\"default\"].mostActiveCommenters();\n\n              case 12:\n                report = _context4.sent;\n                res.json({\n                  report: report\n                });\n                return _context4.abrupt(\"return\");\n\n              case 15:\n                res.status(401).json({\n                  status: \"fail\"\n                });\n                _context4.next = 21;\n                break;\n\n              case 18:\n                _context4.prev = 18;\n                _context4.t0 = _context4[\"catch\"](0);\n                res.status(500).json({\n                  e: _context4.t0\n                });\n\n              case 21:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 18]]);\n      }));\n\n      function apiCommentReport(_x10, _x11, _x12) {\n        return _apiCommentReport.apply(this, arguments);\n      }\n\n      return apiCommentReport;\n    }()\n  }]);\n  return CommentsController;\n}();\n\nexports[\"default\"] = CommentsController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDb21tZW50c0NvbnRyb2xsZXIiLCJyZXEiLCJyZXMiLCJuZXh0IiwidXNlckp3dCIsImdldCIsInNsaWNlIiwibGVuZ3RoIiwiVXNlciIsImRlY29kZWQiLCJ1c2VyIiwiZXJyb3IiLCJzdGF0dXMiLCJqc29uIiwibW92aWVJZCIsImJvZHkiLCJtb3ZpZV9pZCIsImNvbW1lbnQiLCJkYXRlIiwiRGF0ZSIsIkNvbW1lbnRzREFPIiwiYWRkQ29tbWVudCIsIk9iamVjdElkIiwiY29tbWVudFJlc3BvbnNlIiwiTW92aWVzREFPIiwiZ2V0TW92aWVCeUlEIiwidXBkYXRlZENvbW1lbnRzIiwiY29tbWVudHMiLCJlIiwiY29tbWVudElkIiwiY29tbWVudF9pZCIsInRleHQiLCJ1cGRhdGVkX2NvbW1lbnQiLCJ1cGRhdGVDb21tZW50IiwiZW1haWwiLCJtb2RpZmllZENvdW50IiwiRXJyb3IiLCJ1c2VyRW1haWwiLCJkZWxldGVDb21tZW50IiwiVXNlcnNEQU8iLCJjaGVja0FkbWluIiwibW9zdEFjdGl2ZUNvbW1lbnRlcnMiLCJyZXBvcnQiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcMzM2MTZcXE9uZURyaXZlXFxCdXJlYXVcXG1mbGl4LWpzXFxzcmNcXGFwaVxcIiwic291cmNlcyI6WyJjb21tZW50cy5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBVc2Vyc0RBTyBmcm9tIFwiLi4vZGFvL3VzZXJzREFPXCJcbmltcG9ydCBDb21tZW50c0RBTyBmcm9tIFwiLi4vZGFvL2NvbW1lbnRzREFPXCJcbmltcG9ydCBNb3ZpZXNEQU8gZnJvbSBcIi4uL2Rhby9tb3ZpZXNEQU9cIlxuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuL3VzZXJzLmNvbnRyb2xsZXJcIlxuaW1wb3J0IHsgT2JqZWN0SWQgfSBmcm9tIFwiYnNvblwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbW1lbnRzQ29udHJvbGxlciB7XG4gIHN0YXRpYyBhc3luYyBhcGlQb3N0Q29tbWVudChyZXEsIHJlcywgbmV4dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySnd0ID0gcmVxLmdldChcIkF1dGhvcml6YXRpb25cIikuc2xpY2UoXCJCZWFyZXIgXCIubGVuZ3RoKVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZGVjb2RlZCh1c2VySnd0KVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IHVzZXJcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBtb3ZpZUlkID0gcmVxLmJvZHkubW92aWVfaWRcbiAgICAgIGNvbnN0IGNvbW1lbnQgPSByZXEuYm9keS5jb21tZW50XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxuXG4gICAgICBjb25zdCBjb21tZW50UmVzcG9uc2UgPSBhd2FpdCBDb21tZW50c0RBTy5hZGRDb21tZW50KFxuICAgICAgICBPYmplY3RJZChtb3ZpZUlkKSxcbiAgICAgICAgdXNlcixcbiAgICAgICAgY29tbWVudCxcbiAgICAgICAgZGF0ZSxcbiAgICAgIClcblxuICAgICAgY29uc3QgdXBkYXRlZENvbW1lbnRzID0gYXdhaXQgTW92aWVzREFPLmdldE1vdmllQnlJRChtb3ZpZUlkKVxuXG4gICAgICByZXMuanNvbih7IHN0YXR1czogXCJzdWNjZXNzXCIsIGNvbW1lbnRzOiB1cGRhdGVkQ29tbWVudHMuY29tbWVudHMgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGUgfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgYXBpVXBkYXRlQ29tbWVudChyZXEsIHJlcywgbmV4dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySnd0ID0gcmVxLmdldChcIkF1dGhvcml6YXRpb25cIikuc2xpY2UoXCJCZWFyZXIgXCIubGVuZ3RoKVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZGVjb2RlZCh1c2VySnd0KVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IHVzZXJcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb21tZW50SWQgPSByZXEuYm9keS5jb21tZW50X2lkXG4gICAgICBjb25zdCB0ZXh0ID0gcmVxLmJvZHkudXBkYXRlZF9jb21tZW50XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxuXG4gICAgICBjb25zdCBjb21tZW50UmVzcG9uc2UgPSBhd2FpdCBDb21tZW50c0RBTy51cGRhdGVDb21tZW50KFxuICAgICAgICBPYmplY3RJZChjb21tZW50SWQpLFxuICAgICAgICB1c2VyLmVtYWlsLFxuICAgICAgICB0ZXh0LFxuICAgICAgICBkYXRlLFxuICAgICAgKVxuXG4gICAgICB2YXIgeyBlcnJvciB9ID0gY29tbWVudFJlc3BvbnNlXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvciB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoY29tbWVudFJlc3BvbnNlLm1vZGlmaWVkQ291bnQgPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwidW5hYmxlIHRvIHVwZGF0ZSBjb21tZW50IC0gdXNlciBtYXkgbm90IGJlIG9yaWdpbmFsIHBvc3RlclwiLFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1vdmllSWQgPSByZXEuYm9keS5tb3ZpZV9pZFxuICAgICAgY29uc3QgdXBkYXRlZENvbW1lbnRzID0gYXdhaXQgTW92aWVzREFPLmdldE1vdmllQnlJRChtb3ZpZUlkKVxuXG4gICAgICByZXMuanNvbih7IGNvbW1lbnRzOiB1cGRhdGVkQ29tbWVudHMuY29tbWVudHMgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGUgfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgYXBpRGVsZXRlQ29tbWVudChyZXEsIHJlcywgbmV4dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySnd0ID0gcmVxLmdldChcIkF1dGhvcml6YXRpb25cIikuc2xpY2UoXCJCZWFyZXIgXCIubGVuZ3RoKVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZGVjb2RlZCh1c2VySnd0KVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IHVzZXJcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb21tZW50SWQgPSByZXEuYm9keS5jb21tZW50X2lkXG4gICAgICBjb25zdCB1c2VyRW1haWwgPSB1c2VyLmVtYWlsXG4gICAgICBjb25zdCBjb21tZW50UmVzcG9uc2UgPSBhd2FpdCBDb21tZW50c0RBTy5kZWxldGVDb21tZW50KFxuICAgICAgICBPYmplY3RJZChjb21tZW50SWQpLFxuICAgICAgICB1c2VyRW1haWwsXG4gICAgICApXG5cbiAgICAgIGNvbnN0IG1vdmllSWQgPSByZXEuYm9keS5tb3ZpZV9pZFxuXG4gICAgICBjb25zdCB7IGNvbW1lbnRzIH0gPSBhd2FpdCBNb3ZpZXNEQU8uZ2V0TW92aWVCeUlEKG1vdmllSWQpXG4gICAgICByZXMuanNvbih7IGNvbW1lbnRzIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFwaUNvbW1lbnRSZXBvcnQocmVxLCByZXMsIG5leHQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlckp3dCA9IHJlcS5nZXQoXCJBdXRob3JpemF0aW9uXCIpLnNsaWNlKFwiQmVhcmVyIFwiLmxlbmd0aClcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmRlY29kZWQodXNlckp3dClcbiAgICAgIHZhciB7IGVycm9yIH0gPSB1c2VyXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKFVzZXJzREFPLmNoZWNrQWRtaW4odXNlci5lbWFpbCkpIHtcbiAgICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgQ29tbWVudHNEQU8ubW9zdEFjdGl2ZUNvbW1lbnRlcnMoKVxuICAgICAgICByZXMuanNvbih7IHJlcG9ydCB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBzdGF0dXM6IFwiZmFpbFwiIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlIH0pXG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0lBRXFCQSxrQjs7Ozs7Ozs7MEdBQ25CLGlCQUE0QkMsR0FBNUIsRUFBaUNDLEdBQWpDLEVBQXNDQyxJQUF0QztRQUFBO1FBQUE7VUFBQTtZQUFBO2NBQUE7Z0JBQUE7Z0JBRVVDLE9BRlYsR0FFb0JILEdBQUcsQ0FBQ0ksR0FBSixDQUFRLGVBQVIsRUFBeUJDLEtBQXpCLENBQStCLFVBQVVDLE1BQXpDLENBRnBCO2dCQUFBO2dCQUFBLE9BR3VCQyxXQUFBLENBQUtDLE9BQUwsQ0FBYUwsT0FBYixDQUh2Qjs7Y0FBQTtnQkFHVU0sSUFIVjtnQkFJVUMsS0FKVixHQUlvQkQsSUFKcEIsQ0FJVUMsS0FKVjs7Z0JBQUEsS0FLUUEsS0FMUjtrQkFBQTtrQkFBQTtnQkFBQTs7Z0JBTU1ULEdBQUcsQ0FBQ1UsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO2tC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","map":{"version":3,"names":["CommentsController","req","res","next","userJwt","get","slice","length","User","decoded","user","error","status","json","movieId","body","movie_id","comment","date","Date","CommentsDAO","addComment","ObjectId","commentResponse","MoviesDAO","getMovieByID","updatedComments","comments","e","commentId","comment_id","text","updated_comment","updateComment","email","modifiedCount","Error","userEmail","deleteComment","UsersDAO","checkAdmin","mostActiveCommenters","report"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\api\\","sources":["comments.controller.js"],"sourcesContent":["import UsersDAO from \"../dao/usersDAO\"\nimport CommentsDAO from \"../dao/commentsDAO\"\nimport MoviesDAO from \"../dao/moviesDAO\"\nimport { User } from \"./users.controller\"\nimport { ObjectId } from \"bson\"\n\nexport default class CommentsController {\n  static async apiPostComment(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      const movieId = req.body.movie_id\n      const comment = req.body.comment\n      const date = new Date()\n\n      const commentResponse = await CommentsDAO.addComment(\n        ObjectId(movieId),\n        user,\n        comment,\n        date,\n      )\n\n      const updatedComments = await MoviesDAO.getMovieByID(movieId)\n\n      res.json({ status: \"success\", comments: updatedComments.comments })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n\n  static async apiUpdateComment(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      const commentId = req.body.comment_id\n      const text = req.body.updated_comment\n      const date = new Date()\n\n      const commentResponse = await CommentsDAO.updateComment(\n        ObjectId(commentId),\n        user.email,\n        text,\n        date,\n      )\n\n      var { error } = commentResponse\n      if (error) {\n        res.status(400).json({ error })\n      }\n\n      if (commentResponse.modifiedCount === 0) {\n        throw new Error(\n          \"unable to update comment - user may not be original poster\",\n        )\n      }\n\n      const movieId = req.body.movie_id\n      const updatedComments = await MoviesDAO.getMovieByID(movieId)\n\n      res.json({ comments: updatedComments.comments })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n\n  static async apiDeleteComment(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      const commentId = req.body.comment_id\n      const userEmail = user.email\n      const commentResponse = await CommentsDAO.deleteComment(\n        ObjectId(commentId),\n        userEmail,\n      )\n\n      const movieId = req.body.movie_id\n\n      const { comments } = await MoviesDAO.getMovieByID(movieId)\n      res.json({ comments })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n\n  static async apiCommentReport(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      if (UsersDAO.checkAdmin(user.email)) {\n        const report = await CommentsDAO.mostActiveCommenters()\n        res.json({ report })\n        return\n      }\n\n      res.status(401).json({ status: \"fail\" })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1655825402827},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\dao\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\dao\\\\usersDAO.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar users;\nvar sessions;\n\nvar UsersDAO = /*#__PURE__*/function () {\n  function UsersDAO() {\n    (0, _classCallCheck2[\"default\"])(this, UsersDAO);\n  }\n\n  (0, _createClass2[\"default\"])(UsersDAO, null, [{\n    key: \"injectDB\",\n    value: function () {\n      var _injectDB = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(conn) {\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(users && sessions)) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.prev = 2;\n                _context.next = 5;\n                return conn.db(process.env.MFLIX_NS).collection(\"users\");\n\n              case 5:\n                users = _context.sent;\n                _context.next = 8;\n                return conn.db(process.env.MFLIX_NS).collection(\"sessions\");\n\n              case 8:\n                sessions = _context.sent;\n                _context.next = 14;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Unable to establish collection handles in userDAO: \".concat(_context.t0));\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 11]]);\n      }));\n\n      function injectDB(_x) {\n        return _injectDB.apply(this, arguments);\n      }\n\n      return injectDB;\n    }()\n    /**\n    Ticket: User Management\n     For this ticket, you will need to implement the following five methods:\n     - getUser\n    - addUser\n    - loginUser\n    - logoutUser\n    - getUserSession\n     You can find these methods below this comment. Make sure to read the comments\n    in each method to better understand the implementation.\n     The method deleteUser is already given to you.\n    */\n\n    /**\n     * Finds a user in the `users` collection\n     * @param {string} email - The email of the desired user\n     * @returns {Object | null} Returns either a single user or nothing\n     */\n\n  }, {\n    key: \"getUser\",\n    value: function () {\n      var _getUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(email) {\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return users.findOne({\n                  email: email\n                });\n\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getUser(_x2) {\n        return _getUser.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n    /**\n     * Adds a user to the `users` collection\n     * @param {UserInfo} userInfo - The information of the user to add\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n\n  }, {\n    key: \"addUser\",\n    value: function () {\n      var _addUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(userInfo) {\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return users.insertOne({\n                  name: userInfo.name,\n                  email: userInfo.email,\n                  password: userInfo.password\n                }, {\n                  w: 1\n                });\n\n              case 3:\n                return _context3.abrupt(\"return\", {\n                  success: true\n                });\n\n              case 6:\n                _context3.prev = 6;\n                _context3.t0 = _context3[\"catch\"](0);\n\n                if (!String(_context3.t0).startsWith(\"MongoError: E11000 duplicate key error\")) {\n                  _context3.next = 10;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", {\n                  error: \"A user with the given email already exists.\"\n                });\n\n              case 10:\n                console.error(\"Error occurred while adding new user, \".concat(_context3.t0, \".\"));\n                return _context3.abrupt(\"return\", {\n                  error: _context3.t0\n                });\n\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 6]]);\n      }));\n\n      function addUser(_x3) {\n        return _addUser.apply(this, arguments);\n      }\n\n      return addUser;\n    }()\n    /**\n     * Adds a user to the `sessions` collection\n     * @param {string} email - The email of the user to login\n     * @param {string} jwt - A JSON web token representing the user's claims\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n\n  }, {\n    key: \"loginUser\",\n    value: function () {\n      var _loginUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(email, jwt) {\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return sessions.updateOne({\n                  user_id: email\n                }, {\n                  $set: {\n                    user_id: email,\n                    jwt: jwt\n                  }\n                }, {\n                  upsert: true\n                });\n\n              case 3:\n                return _context4.abrupt(\"return\", {\n                  success: true\n                });\n\n              case 6:\n                _context4.prev = 6;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.error(\"Error occurred while logging in user, \".concat(_context4.t0));\n                return _context4.abrupt(\"return\", {\n                  error: _context4.t0\n                });\n\n              case 10:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 6]]);\n      }));\n\n      function loginUser(_x4, _x5) {\n        return _loginUser.apply(this, arguments);\n      }\n\n      return loginUser;\n    }()\n    /**\n     * Removes a user from the `sessons` collection\n     * @param {string} email - The email of the user to logout\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n\n  }, {\n    key: \"logoutUser\",\n    value: function () {\n      var _logoutUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(email) {\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return sessions.deleteOne({\n                  user_id: email\n                });\n\n              case 3:\n                return _context5.abrupt(\"return\", {\n                  success: true\n                });\n\n              case 6:\n                _context5.prev = 6;\n                _context5.t0 = _context5[\"catch\"](0);\n                console.error(\"Error occurred while logging out user, \".concat(_context5.t0));\n                return _context5.abrupt(\"return\", {\n                  error: _context5.t0\n                });\n\n              case 10:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 6]]);\n      }));\n\n      function logoutUser(_x6) {\n        return _logoutUser.apply(this, arguments);\n      }\n\n      return logoutUser;\n    }()\n    /**\n     * Gets a user from the `sessions` collection\n     * @param {string} email - The email of the user to search for in `sessions`\n     * @returns {Object | null} Returns a user session Object, an \"error\" Object\n     * if something went wrong, or null if user was not found.\n     */\n\n  }, {\n    key: \"getUserSession\",\n    value: function () {\n      var _getUserSession = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(email) {\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                return _context6.abrupt(\"return\", sessions.findOne({\n                  user_id: email\n                }));\n\n              case 4:\n                _context6.prev = 4;\n                _context6.t0 = _context6[\"catch\"](0);\n                console.error(\"Error occurred while retrieving user session, \".concat(_context6.t0));\n                return _context6.abrupt(\"return\", null);\n\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 4]]);\n      }));\n\n      function getUserSession(_x7) {\n        return _getUserSession.apply(this, arguments);\n      }\n\n      return getUserSession;\n    }()\n    /**\n     * Removes a user from the `sessions` and `users` collections\n     * @param {string} email - The email of the user to delete\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n\n  }, {\n    key: \"deleteUser\",\n    value: function () {\n      var _deleteUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(email) {\n        return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                _context7.next = 3;\n                return users.deleteOne({\n                  email: email\n                });\n\n              case 3:\n                _context7.next = 5;\n                return sessions.deleteOne({\n                  user_id: email\n                });\n\n              case 5:\n                _context7.next = 7;\n                return this.getUser(email);\n\n              case 7:\n                _context7.t0 = !_context7.sent;\n\n                if (!_context7.t0) {\n                  _context7.next = 12;\n                  break;\n                }\n\n                _context7.next = 11;\n                return this.getUserSession(email);\n\n              case 11:\n                _context7.t0 = !_context7.sent;\n\n              case 12:\n                if (!_context7.t0) {\n                  _context7.next = 16;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", {\n                  success: true\n                });\n\n              case 16:\n                console.error(\"Deletion unsuccessful\");\n                return _context7.abrupt(\"return\", {\n                  error: \"Deletion unsuccessful\"\n                });\n\n              case 18:\n                _context7.next = 24;\n                break;\n\n              case 20:\n                _context7.prev = 20;\n                _context7.t1 = _context7[\"catch\"](0);\n                console.error(\"Error occurred while deleting user, \".concat(_context7.t1));\n                return _context7.abrupt(\"return\", {\n                  error: _context7.t1\n                });\n\n              case 24:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 20]]);\n      }));\n\n      function deleteUser(_x8) {\n        return _deleteUser.apply(this, arguments);\n      }\n\n      return deleteUser;\n    }()\n    /**\n     * Given a user's email and an object of new preferences, update that user's\n     * data to include those preferences.\n     * @param {string} email - The email of the user to update.\n     * @param {Object} preferences - The preferences to include in the user's data.\n     * @returns {DAOResponse}\n     */\n\n  }, {\n    key: \"updatePreferences\",\n    value: function () {\n      var _updatePreferences = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee8(email, preferences) {\n        var updateResponse;\n        return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n\n                /**\n                Ticket: User Preferences\n                 Update the \"preferences\" field in the corresponding user's document to\n                reflect the new information in preferences.\n                */\n                preferences = preferences || {}; // TODO Ticket: User Preferences\n                // Use the data in \"preferences\" to update the user's preferences.\n\n                _context8.next = 4;\n                return users.updateOne({\n                  email: email\n                }, {\n                  $set: {\n                    preferences: preferences\n                  }\n                });\n\n              case 4:\n                updateResponse = _context8.sent;\n\n                if (!(updateResponse.matchedCount === 0)) {\n                  _context8.next = 7;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", {\n                  error: \"No user found with that email\"\n                });\n\n              case 7:\n                return _context8.abrupt(\"return\", updateResponse);\n\n              case 10:\n                _context8.prev = 10;\n                _context8.t0 = _context8[\"catch\"](0);\n                console.error(\"An error occurred while updating this user's preferences, \".concat(_context8.t0));\n                return _context8.abrupt(\"return\", {\n                  error: _context8.t0\n                });\n\n              case 14:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[0, 10]]);\n      }));\n\n      function updatePreferences(_x9, _x10) {\n        return _updatePreferences.apply(this, arguments);\n      }\n\n      return updatePreferences;\n    }()\n  }, {\n    key: \"checkAdmin\",\n    value: function () {\n      var _checkAdmin = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee9(email) {\n        var _yield$this$getUser, isAdmin;\n\n        return _regenerator[\"default\"].wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                _context9.next = 3;\n                return this.getUser(email);\n\n              case 3:\n                _yield$this$getUser = _context9.sent;\n                isAdmin = _yield$this$getUser.isAdmin;\n                return _context9.abrupt(\"return\", isAdmin || false);\n\n              case 8:\n                _context9.prev = 8;\n                _context9.t0 = _context9[\"catch\"](0);\n                return _context9.abrupt(\"return\", {\n                  error: _context9.t0\n                });\n\n              case 11:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[0, 8]]);\n      }));\n\n      function checkAdmin(_x11) {\n        return _checkAdmin.apply(this, arguments);\n      }\n\n      return checkAdmin;\n    }()\n  }, {\n    key: \"makeAdmin\",\n    value: function () {\n      var _makeAdmin = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee10(email) {\n        var updateResponse;\n        return _regenerator[\"default\"].wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.prev = 0;\n                updateResponse = users.updateOne({\n                  email: email\n                }, {\n                  $set: {\n                    isAdmin: true\n                  }\n                });\n                return _context10.abrupt(\"return\", updateResponse);\n\n              case 5:\n                _context10.prev = 5;\n                _context10.t0 = _context10[\"catch\"](0);\n                return _context10.abrupt(\"return\", {\n                  error: _context10.t0\n                });\n\n              case 8:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, null, [[0, 5]]);\n      }));\n\n      function makeAdmin(_x12) {\n        return _makeAdmin.apply(this, arguments);\n      }\n\n      return makeAdmin;\n    }()\n  }]);\n  return UsersDAO;\n}();\n/**\n * Parameter passed to addUser method\n * @typedef UserInfo\n * @property {string} name\n * @property {string} email\n * @property {string} password\n */\n\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\n\n\nexports[\"default\"] = UsersDAO;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VycyIsInNlc3Npb25zIiwiVXNlcnNEQU8iLCJjb25uIiwiZGIiLCJwcm9jZXNzIiwiZW52IiwiTUZMSVhfTlMiLCJjb2xsZWN0aW9uIiwiY29uc29sZSIsImVycm9yIiwiZW1haWwiLCJmaW5kT25lIiwidXNlckluZm8iLCJpbnNlcnRPbmUiLCJuYW1lIiwicGFzc3dvcmQiLCJ3Iiwic3VjY2VzcyIsIlN0cmluZyIsInN0YXJ0c1dpdGgiLCJqd3QiLCJ1cGRhdGVPbmUiLCJ1c2VyX2lkIiwiJHNldCIsInVwc2VydCIsImRlbGV0ZU9uZSIsImdldFVzZXIiLCJnZXRVc2VyU2Vzc2lvbiIsInByZWZlcmVuY2VzIiwidXBkYXRlUmVzcG9uc2UiLCJtYXRjaGVkQ291bnQiLCJpc0FkbWluIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXDMzNjE2XFxPbmVEcml2ZVxcQnVyZWF1XFxtZmxpeC1qc1xcc3JjXFxkYW9cXCIsInNvdXJjZXMiOlsidXNlcnNEQU8uanMiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IHVzZXJzXG5sZXQgc2Vzc2lvbnNcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlcnNEQU8ge1xuICBzdGF0aWMgYXN5bmMgaW5qZWN0REIoY29ubikge1xuICAgIGlmICh1c2VycyAmJiBzZXNzaW9ucykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB1c2VycyA9IGF3YWl0IGNvbm4uZGIocHJvY2Vzcy5lbnYuTUZMSVhfTlMpLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKVxuICAgICAgc2Vzc2lvbnMgPSBhd2FpdCBjb25uLmRiKHByb2Nlc3MuZW52Lk1GTElYX05TKS5jb2xsZWN0aW9uKFwic2Vzc2lvbnNcIilcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbmFibGUgdG8gZXN0YWJsaXNoIGNvbGxlY3Rpb24gaGFuZGxlcyBpbiB1c2VyREFPOiAke2V9YClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgVGlja2V0OiBVc2VyIE1hbmFnZW1lbnRcblxuICBGb3IgdGhpcyB0aWNrZXQsIHlvdSB3aWxsIG5lZWQgdG8gaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcgZml2ZSBtZXRob2RzOlxuXG4gIC0gZ2V0VXNlclxuICAtIGFkZFVzZXJcbiAgLSBsb2dpblVzZXJcbiAgLSBsb2dvdXRVc2VyXG4gIC0gZ2V0VXNlclNlc3Npb25cblxuICBZb3UgY2FuIGZpbmQgdGhlc2UgbWV0aG9kcyBiZWxvdyB0aGlzIGNvbW1lbnQuIE1ha2Ugc3VyZSB0byByZWFkIHRoZSBjb21tZW50c1xuICBpbiBlYWNoIG1ldGhvZCB0byBiZXR0ZXIgdW5kZXJzdGFuZCB0aGUgaW1wbGVtZW50YXRpb24uXG5cbiAgVGhlIG1ldGhvZCBkZWxldGVVc2VyIGlzIGFscmVhZHkgZ2l2ZW4gdG8geW91LlxuICAqL1xuXG4gIC8qKlxuICAgKiBGaW5kcyBhIHVzZXIgaW4gdGhlIGB1c2Vyc2AgY29sbGVjdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWwgLSBUaGUgZW1haWwgb2YgdGhlIGRlc2lyZWQgdXNlclxuICAgKiBAcmV0dXJucyB7T2JqZWN0IHwgbnVsbH0gUmV0dXJucyBlaXRoZXIgYSBzaW5nbGUgdXNlciBvciBub3RoaW5nXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0VXNlcihlbWFpbCkge1xuICAgIC8vIFRPRE8gVGlja2V0OiBVc2VyIE1hbmFnZW1lbnRcbiAgICAvLyBSZXRyaWV2ZSB0aGUgdXNlciBkb2N1bWVudCBjb3JyZXNwb25kaW5nIHdpdGggdGhlIHVzZXIncyBlbWFpbC5cbiAgICByZXR1cm4gYXdhaXQgdXNlcnMuZmluZE9uZSh7IGVtYWlsOiBlbWFpbCB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSB1c2VyIHRvIHRoZSBgdXNlcnNgIGNvbGxlY3Rpb25cbiAgICogQHBhcmFtIHtVc2VySW5mb30gdXNlckluZm8gLSBUaGUgaW5mb3JtYXRpb24gb2YgdGhlIHVzZXIgdG8gYWRkXG4gICAqIEByZXR1cm5zIHtEQU9SZXNwb25zZX0gUmV0dXJucyBlaXRoZXIgYSBcInN1Y2Nlc3NcIiBvciBhbiBcImVycm9yXCIgT2JqZWN0XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgYWRkVXNlcih1c2VySW5mbykge1xuICAgIC8qKlxuICAgIFRpY2tldDogRHVyYWJsZSBXcml0ZXNcblxuICAgIFBsZWFzZSBpbmNyZWFzZSB0aGUgZHVyYWJpbGl0eSBvZiB0aGlzIG1ldGhvZCBieSB1c2luZyBhIG5vbi1kZWZhdWx0IHdyaXRlXG4gICAgY29uY2VybiB3aXRoIGBgaW5zZXJ0T25lYGAuXG4gICAgKi9cblxuICAgIHRyeSB7XG4gICAgICAvLyBUT0RPIFRpY2tldDogVXNlciBNYW5hZ2VtZW50XG4gICAgICAvLyBJbnNlcnQgYSB1c2VyIHdpdGggdGhlIFwibmFtZVwiLCBcImVtYWlsXCIsIGFuZCBcInBhc3N3b3JkXCIgZmllbGRzLlxuICAgICAgLy8gVE9ETyBUaWNrZXQ6IER1cmFibGUgV3JpdGVzXG4gICAgICAvLyBVc2UgYSBtb3JlIGR1cmFibGUgV3JpdGUgQ29uY2VybiBmb3IgdGhpcyBvcGVyYXRpb24uXG4gICAgICBhd2FpdCB1c2Vycy5pbnNlcnRPbmUoXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiB1c2VySW5mby5uYW1lLFxuICAgICAgICAgIGVtYWlsOiB1c2VySW5mby5lbWFpbCxcbiAgICAgICAgICBwYXNzd29yZDogdXNlckluZm8ucGFzc3dvcmQsXG4gICAgICAgIH0sXG4gICAgICAgIHsgdzogMSB9LFxuICAgICAgKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKFN0cmluZyhlKS5zdGFydHNXaXRoKFwiTW9uZ29FcnJvcjogRTExMDAwIGR1cGxpY2F0ZSBrZXkgZXJyb3JcIikpIHtcbiAgICAgICAgcmV0dXJuIHsgZXJyb3I6IFwiQSB1c2VyIHdpdGggdGhlIGdpdmVuIGVtYWlsIGFscmVhZHkgZXhpc3RzLlwiIH1cbiAgICAgIH1cbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIG9jY3VycmVkIHdoaWxlIGFkZGluZyBuZXcgdXNlciwgJHtlfS5gKVxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGUgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgdXNlciB0byB0aGUgYHNlc3Npb25zYCBjb2xsZWN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbCAtIFRoZSBlbWFpbCBvZiB0aGUgdXNlciB0byBsb2dpblxuICAgKiBAcGFyYW0ge3N0cmluZ30gand0IC0gQSBKU09OIHdlYiB0b2tlbiByZXByZXNlbnRpbmcgdGhlIHVzZXIncyBjbGFpbXNcbiAgICogQHJldHVybnMge0RBT1Jlc3BvbnNlfSBSZXR1cm5zIGVpdGhlciBhIFwic3VjY2Vzc1wiIG9yIGFuIFwiZXJyb3JcIiBPYmplY3RcbiAgICovXG4gIHN0YXRpYyBhc3luYyBsb2dpblVzZXIoZW1haWwsIGp3dCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBUT0RPIFRpY2tldDogVXNlciBNYW5hZ2VtZW50XG4gICAgICAvLyBVc2UgYW4gVVBTRVJUIHN0YXRlbWVudCB0byB1cGRhdGUgdGhlIFwiand0XCIgZmllbGQgaW4gdGhlIGRvY3VtZW50LFxuICAgICAgLy8gbWF0Y2hpbmcgdGhlIFwidXNlcl9pZFwiIGZpZWxkIHdpdGggdGhlIGVtYWlsIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uLlxuICAgICAgYXdhaXQgc2Vzc2lvbnMudXBkYXRlT25lKFxuICAgICAgICB7IHVzZXJfaWQ6IGVtYWlsIH0sXG4gICAgICAgIHsgJHNldDogeyB1c2VyX2lkOiBlbWFpbCwgand0OiBqd3QgfSB9LFxuICAgICAgICB7IHVwc2VydDogdHJ1ZSB9LFxuICAgICAgKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igb2NjdXJyZWQgd2hpbGUgbG9nZ2luZyBpbiB1c2VyLCAke2V9YClcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhIHVzZXIgZnJvbSB0aGUgYHNlc3NvbnNgIGNvbGxlY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIC0gVGhlIGVtYWlsIG9mIHRoZSB1c2VyIHRvIGxvZ291dFxuICAgKiBAcmV0dXJucyB7REFPUmVzcG9uc2V9IFJldHVybnMgZWl0aGVyIGEgXCJzdWNjZXNzXCIgb3IgYW4gXCJlcnJvclwiIE9iamVjdFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGxvZ291dFVzZXIoZW1haWwpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETyBUaWNrZXQ6IFVzZXIgTWFuYWdlbWVudFxuICAgICAgLy8gRGVsZXRlIHRoZSBkb2N1bWVudCBpbiB0aGUgYHNlc3Npb25zYCBjb2xsZWN0aW9uIG1hdGNoaW5nIHRoZSBlbWFpbC5cbiAgICAgIGF3YWl0IHNlc3Npb25zLmRlbGV0ZU9uZSh7IHVzZXJfaWQ6IGVtYWlsIH0pXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBvY2N1cnJlZCB3aGlsZSBsb2dnaW5nIG91dCB1c2VyLCAke2V9YClcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhIHVzZXIgZnJvbSB0aGUgYHNlc3Npb25zYCBjb2xsZWN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbCAtIFRoZSBlbWFpbCBvZiB0aGUgdXNlciB0byBzZWFyY2ggZm9yIGluIGBzZXNzaW9uc2BcbiAgICogQHJldHVybnMge09iamVjdCB8IG51bGx9IFJldHVybnMgYSB1c2VyIHNlc3Npb24gT2JqZWN0LCBhbiBcImVycm9yXCIgT2JqZWN0XG4gICAqIGlmIHNvbWV0aGluZyB3ZW50IHdyb25nLCBvciBudWxsIGlmIHVzZXIgd2FzIG5vdCBmb3VuZC5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRVc2VyU2Vzc2lvbihlbWFpbCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBUT0RPIFRpY2tldDogVXNlciBNYW5hZ2VtZW50XG4gICAgICAvLyBSZXRyaWV2ZSB0aGUgc2Vzc2lvbiBkb2N1bWVudCBjb3JyZXNwb25kaW5nIHdpdGggdGhlIHVzZXIncyBlbWFpbC5cbiAgICAgIHJldHVybiBzZXNzaW9ucy5maW5kT25lKHsgdXNlcl9pZDogZW1haWwgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBvY2N1cnJlZCB3aGlsZSByZXRyaWV2aW5nIHVzZXIgc2Vzc2lvbiwgJHtlfWApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgdXNlciBmcm9tIHRoZSBgc2Vzc2lvbnNgIGFuZCBgdXNlcnNgIGNvbGxlY3Rpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbCAtIFRoZSBlbWFpbCBvZiB0aGUgdXNlciB0byBkZWxldGVcbiAgICogQHJldHVybnMge0RBT1Jlc3BvbnNlfSBSZXR1cm5zIGVpdGhlciBhIFwic3VjY2Vzc1wiIG9yIGFuIFwiZXJyb3JcIiBPYmplY3RcbiAgICovXG4gIHN0YXRpYyBhc3luYyBkZWxldGVVc2VyKGVtYWlsKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHVzZXJzLmRlbGV0ZU9uZSh7IGVtYWlsIH0pXG4gICAgICBhd2FpdCBzZXNzaW9ucy5kZWxldGVPbmUoeyB1c2VyX2lkOiBlbWFpbCB9KVxuICAgICAgaWYgKCEoYXdhaXQgdGhpcy5nZXRVc2VyKGVtYWlsKSkgJiYgIShhd2FpdCB0aGlzLmdldFVzZXJTZXNzaW9uKGVtYWlsKSkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBEZWxldGlvbiB1bnN1Y2Nlc3NmdWxgKVxuICAgICAgICByZXR1cm4geyBlcnJvcjogYERlbGV0aW9uIHVuc3VjY2Vzc2Z1bGAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIG9jY3VycmVkIHdoaWxlIGRlbGV0aW5nIHVzZXIsICR7ZX1gKVxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGUgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIHVzZXIncyBlbWFpbCBhbmQgYW4gb2JqZWN0IG9mIG5ldyBwcmVmZXJlbmNlcywgdXBkYXRlIHRoYXQgdXNlcidzXG4gICAqIGRhdGEgdG8gaW5jbHVkZSB0aG9zZSBwcmVmZXJlbmNlcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIC0gVGhlIGVtYWlsIG9mIHRoZSB1c2VyIHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IHByZWZlcmVuY2VzIC0gVGhlIHByZWZlcmVuY2VzIHRvIGluY2x1ZGUgaW4gdGhlIHVzZXIncyBkYXRhLlxuICAgKiBAcmV0dXJucyB7REFPUmVzcG9uc2V9XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgdXBkYXRlUHJlZmVyZW5jZXMoZW1haWwsIHByZWZlcmVuY2VzKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8qKlxuICAgICAgVGlja2V0OiBVc2VyIFByZWZlcmVuY2VzXG5cbiAgICAgIFVwZGF0ZSB0aGUgXCJwcmVmZXJlbmNlc1wiIGZpZWxkIGluIHRoZSBjb3JyZXNwb25kaW5nIHVzZXIncyBkb2N1bWVudCB0b1xuICAgICAgcmVmbGVjdCB0aGUgbmV3IGluZm9ybWF0aW9uIGluIHByZWZlcmVuY2VzLlxuICAgICAgKi9cblxuICAgICAgcHJlZmVyZW5jZXMgPSBwcmVmZXJlbmNlcyB8fCB7fVxuXG4gICAgICAvLyBUT0RPIFRpY2tldDogVXNlciBQcmVmZXJlbmNlc1xuICAgICAgLy8gVXNlIHRoZSBkYXRhIGluIFwicHJlZmVyZW5jZXNcIiB0byB1cGRhdGUgdGhlIHVzZXIncyBwcmVmZXJlbmNlcy5cbiAgICAgIGNvbnN0IHVwZGF0ZVJlc3BvbnNlID0gYXdhaXQgdXNlcnMudXBkYXRlT25lKFxuICAgICAgICB7IGVtYWlsOiBlbWFpbCB9LFxuICAgICAgICB7ICRzZXQ6IHsgcHJlZmVyZW5jZXM6IHByZWZlcmVuY2VzIH0gfSxcbiAgICAgIClcblxuICAgICAgaWYgKHVwZGF0ZVJlc3BvbnNlLm1hdGNoZWRDb3VudCA9PT0gMCkge1xuICAgICAgICByZXR1cm4geyBlcnJvcjogXCJObyB1c2VyIGZvdW5kIHdpdGggdGhhdCBlbWFpbFwiIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB1cGRhdGVSZXNwb25zZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB1cGRhdGluZyB0aGlzIHVzZXIncyBwcmVmZXJlbmNlcywgJHtlfWAsXG4gICAgICApXG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNoZWNrQWRtaW4oZW1haWwpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpc0FkbWluIH0gPSBhd2FpdCB0aGlzLmdldFVzZXIoZW1haWwpXG4gICAgICByZXR1cm4gaXNBZG1pbiB8fCBmYWxzZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbWFrZUFkbWluKGVtYWlsKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVwZGF0ZVJlc3BvbnNlID0gdXNlcnMudXBkYXRlT25lKFxuICAgICAgICB7IGVtYWlsIH0sXG4gICAgICAgIHsgJHNldDogeyBpc0FkbWluOiB0cnVlIH0gfSxcbiAgICAgIClcbiAgICAgIHJldHVybiB1cGRhdGVSZXNwb25zZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJhbWV0ZXIgcGFzc2VkIHRvIGFkZFVzZXIgbWV0aG9kXG4gKiBAdHlwZWRlZiBVc2VySW5mb1xuICogQHByb3BlcnR5IHtzdHJpbmd9IG5hbWVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBlbWFpbFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHBhc3N3b3JkXG4gKi9cblxuLyoqXG4gKiBTdWNjZXNzL0Vycm9yIHJldHVybiBvYmplY3RcbiAqIEB0eXBlZGVmIERBT1Jlc3BvbnNlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzdWNjZXNzXSAtIFN1Y2Nlc3NcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZXJyb3JdIC0gRXJyb3JcbiAqL1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLEtBQUo7QUFDQSxJQUFJQyxRQUFKOztJQUVxQkMsUTs7Ozs7Ozs7b0dBQ25CLGlCQUFzQkMsSUFBdEI7UUFBQTtVQUFBO1lBQUE7Y0FBQTtnQkFBQSxNQUNNSCxLQUFLLElBQUlDLFFBRGY7a0JBQUE7a0JBQUE7Z0JBQUE7O2dCQUFBOztjQUFBO2dCQUFBO2dCQUFBO2dCQUFBLE9BS2tCRSxJQUFJLENBQUNDLEVBQUwsQ0FBUUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFFBQXBCLEVBQThCQyxVQUE5QixDQUF5QyxPQUF6QyxDQUxsQjs7Y0FBQTtnQkFLSVIsS0FMSjtnQkFBQTtnQkFBQSxPQU1xQkcsSUFBSSxDQUFDQyxFQUFMLENBQVFDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxRQUFwQixFQUE4QkMsVUFBOUIsQ0FBeUMsVUFBekMsQ0FOckI7O2NBQUE7Z0JBTUlQLFFBTko7Z0JBQUE7Z0JBQUE7O2NBQUE7Z0JBQUE7Z0JBQUE7Z0JBUUlRLE9BQU8sQ0FBQ0MsS0FBUjs7Y0FSSjtjQUFBO2dCQUFBO1lBQUE7VUFBQTtRQUFBO01BQUEsQzs7Ozs7Ozs7SUFZQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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","map":{"version":3,"names":["users","sessions","UsersDAO","conn","db","process","env","MFLIX_NS","collection","console","error","email","findOne","userInfo","insertOne","name","password","w","success","String","startsWith","jwt","updateOne","user_id","$set","upsert","deleteOne","getUser","getUserSession","preferences","updateResponse","matchedCount","isAdmin"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\dao\\","sources":["usersDAO.js"],"sourcesContent":["let users\nlet sessions\n\nexport default class UsersDAO {\n  static async injectDB(conn) {\n    if (users && sessions) {\n      return\n    }\n    try {\n      users = await conn.db(process.env.MFLIX_NS).collection(\"users\")\n      sessions = await conn.db(process.env.MFLIX_NS).collection(\"sessions\")\n    } catch (e) {\n      console.error(`Unable to establish collection handles in userDAO: ${e}`)\n    }\n  }\n\n  /**\n  Ticket: User Management\n\n  For this ticket, you will need to implement the following five methods:\n\n  - getUser\n  - addUser\n  - loginUser\n  - logoutUser\n  - getUserSession\n\n  You can find these methods below this comment. Make sure to read the comments\n  in each method to better understand the implementation.\n\n  The method deleteUser is already given to you.\n  */\n\n  /**\n   * Finds a user in the `users` collection\n   * @param {string} email - The email of the desired user\n   * @returns {Object | null} Returns either a single user or nothing\n   */\n  static async getUser(email) {\n    // TODO Ticket: User Management\n    // Retrieve the user document corresponding with the user's email.\n    return await users.findOne({ email: email })\n  }\n\n  /**\n   * Adds a user to the `users` collection\n   * @param {UserInfo} userInfo - The information of the user to add\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async addUser(userInfo) {\n    /**\n    Ticket: Durable Writes\n\n    Please increase the durability of this method by using a non-default write\n    concern with ``insertOne``.\n    */\n\n    try {\n      // TODO Ticket: User Management\n      // Insert a user with the \"name\", \"email\", and \"password\" fields.\n      // TODO Ticket: Durable Writes\n      // Use a more durable Write Concern for this operation.\n      await users.insertOne(\n        {\n          name: userInfo.name,\n          email: userInfo.email,\n          password: userInfo.password,\n        },\n        { w: 1 },\n      )\n      return { success: true }\n    } catch (e) {\n      if (String(e).startsWith(\"MongoError: E11000 duplicate key error\")) {\n        return { error: \"A user with the given email already exists.\" }\n      }\n      console.error(`Error occurred while adding new user, ${e}.`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Adds a user to the `sessions` collection\n   * @param {string} email - The email of the user to login\n   * @param {string} jwt - A JSON web token representing the user's claims\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async loginUser(email, jwt) {\n    try {\n      // TODO Ticket: User Management\n      // Use an UPSERT statement to update the \"jwt\" field in the document,\n      // matching the \"user_id\" field with the email passed to this function.\n      await sessions.updateOne(\n        { user_id: email },\n        { $set: { user_id: email, jwt: jwt } },\n        { upsert: true },\n      )\n      return { success: true }\n    } catch (e) {\n      console.error(`Error occurred while logging in user, ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Removes a user from the `sessons` collection\n   * @param {string} email - The email of the user to logout\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async logoutUser(email) {\n    try {\n      // TODO Ticket: User Management\n      // Delete the document in the `sessions` collection matching the email.\n      await sessions.deleteOne({ user_id: email })\n      return { success: true }\n    } catch (e) {\n      console.error(`Error occurred while logging out user, ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Gets a user from the `sessions` collection\n   * @param {string} email - The email of the user to search for in `sessions`\n   * @returns {Object | null} Returns a user session Object, an \"error\" Object\n   * if something went wrong, or null if user was not found.\n   */\n  static async getUserSession(email) {\n    try {\n      // TODO Ticket: User Management\n      // Retrieve the session document corresponding with the user's email.\n      return sessions.findOne({ user_id: email })\n    } catch (e) {\n      console.error(`Error occurred while retrieving user session, ${e}`)\n      return null\n    }\n  }\n\n  /**\n   * Removes a user from the `sessions` and `users` collections\n   * @param {string} email - The email of the user to delete\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async deleteUser(email) {\n    try {\n      await users.deleteOne({ email })\n      await sessions.deleteOne({ user_id: email })\n      if (!(await this.getUser(email)) && !(await this.getUserSession(email))) {\n        return { success: true }\n      } else {\n        console.error(`Deletion unsuccessful`)\n        return { error: `Deletion unsuccessful` }\n      }\n    } catch (e) {\n      console.error(`Error occurred while deleting user, ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Given a user's email and an object of new preferences, update that user's\n   * data to include those preferences.\n   * @param {string} email - The email of the user to update.\n   * @param {Object} preferences - The preferences to include in the user's data.\n   * @returns {DAOResponse}\n   */\n  static async updatePreferences(email, preferences) {\n    try {\n      /**\n      Ticket: User Preferences\n\n      Update the \"preferences\" field in the corresponding user's document to\n      reflect the new information in preferences.\n      */\n\n      preferences = preferences || {}\n\n      // TODO Ticket: User Preferences\n      // Use the data in \"preferences\" to update the user's preferences.\n      const updateResponse = await users.updateOne(\n        { email: email },\n        { $set: { preferences: preferences } },\n      )\n\n      if (updateResponse.matchedCount === 0) {\n        return { error: \"No user found with that email\" }\n      }\n      return updateResponse\n    } catch (e) {\n      console.error(\n        `An error occurred while updating this user's preferences, ${e}`,\n      )\n      return { error: e }\n    }\n  }\n\n  static async checkAdmin(email) {\n    try {\n      const { isAdmin } = await this.getUser(email)\n      return isAdmin || false\n    } catch (e) {\n      return { error: e }\n    }\n  }\n\n  static async makeAdmin(email) {\n    try {\n      const updateResponse = users.updateOne(\n        { email },\n        { $set: { isAdmin: true } },\n      )\n      return updateResponse\n    } catch (e) {\n      return { error: e }\n    }\n  }\n}\n\n/**\n * Parameter passed to addUser method\n * @typedef UserInfo\n * @property {string} name\n * @property {string} email\n * @property {string} password\n */\n\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\n"],"mappings":"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"}},"mtime":1655973602829},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\dao\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\dao\\\\commentsDAO.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _bson = require(\"bson\");\n\nvar comments;\n\nvar CommentsDAO = /*#__PURE__*/function () {\n  function CommentsDAO() {\n    (0, _classCallCheck2[\"default\"])(this, CommentsDAO);\n  }\n\n  (0, _createClass2[\"default\"])(CommentsDAO, null, [{\n    key: \"injectDB\",\n    value: function () {\n      var _injectDB = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(conn) {\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!comments) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.prev = 2;\n                _context.next = 5;\n                return conn.db(process.env.MFLIX_NS).collection(\"comments\");\n\n              case 5:\n                comments = _context.sent;\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Unable to establish collection handles in userDAO: \".concat(_context.t0));\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 8]]);\n      }));\n\n      function injectDB(_x) {\n        return _injectDB.apply(this, arguments);\n      }\n\n      return injectDB;\n    }()\n    /**\n    Ticket: Create/Update Comments\n     For this ticket, you will need to implement the following two methods:\n     - addComment\n    - updateComment\n     You can find these methods below this docstring. Make sure to read the comments\n    to better understand the task.\n    */\n\n    /**\n     * Inserts a comment into the `comments` collection, with the following fields:\n        - \"name\", the name of the user posting the comment\n       - \"email\", the email of the user posting the comment\n       - \"movie_id\", the _id of the movie pertaining to the comment\n       - \"text\", the text of the comment\n       - \"date\", the date when the comment was posted\n      * @param {string} movieId - The _id of the movie in the `movies` collection.\n     * @param {Object} user - An object containing the user's name and email.\n     * @param {string} comment - The text of the comment.\n     * @param {string} date - The date on which the comment was posted.\n     * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n     */\n\n  }, {\n    key: \"addComment\",\n    value: function () {\n      var _addComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(movieId, user, comment, date) {\n        var commentDoc;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                // TODO Ticket: Create/Update Comments\n                // Construct the comment document to be inserted into MongoDB.\n                commentDoc = {\n                  movie_id: movieId,\n                  date: date,\n                  text: comment,\n                  name: user.name,\n                  email: user.email\n                };\n                _context2.next = 4;\n                return comments.insertOne(commentDoc);\n\n              case 4:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.error(\"Unable to post comment: \".concat(_context2.t0));\n                return _context2.abrupt(\"return\", {\n                  error: _context2.t0\n                });\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 7]]);\n      }));\n\n      function addComment(_x2, _x3, _x4, _x5) {\n        return _addComment.apply(this, arguments);\n      }\n\n      return addComment;\n    }()\n    /**\n     * Updates the comment in the comment collection. Queries for the comment\n     * based by both comment _id field as well as the email field to doubly ensure\n     * the user has permission to edit this comment.\n     * @param {string} commentId - The _id of the comment to update.\n     * @param {string} userEmail - The email of the user who owns the comment.\n     * @param {string} text - The updated text of the comment.\n     * @param {string} date - The date on which the comment was updated.\n     * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n     */\n\n  }, {\n    key: \"updateComment\",\n    value: function () {\n      var _updateComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(commentId, userEmail, text, date) {\n        var updateResponse;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return comments.updateOne({\n                  _id: commentId,\n                  email: userEmail\n                }, {\n                  $set: {\n                    date: date,\n                    text: text\n                  }\n                });\n\n              case 3:\n                updateResponse = _context3.sent;\n                return _context3.abrupt(\"return\", updateResponse);\n\n              case 7:\n                _context3.prev = 7;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.error(\"Unable to update comment: \".concat(_context3.t0));\n                return _context3.abrupt(\"return\", {\n                  error: _context3.t0\n                });\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 7]]);\n      }));\n\n      function updateComment(_x6, _x7, _x8, _x9) {\n        return _updateComment.apply(this, arguments);\n      }\n\n      return updateComment;\n    }()\n  }, {\n    key: \"deleteComment\",\n    value: function () {\n      var _deleteComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(commentId, userEmail) {\n        var deleteResponse;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return comments.deleteOne({\n                  _id: (0, _bson.ObjectId)(commentId),\n                  email: userEmail\n                });\n\n              case 3:\n                deleteResponse = _context4.sent;\n                return _context4.abrupt(\"return\", deleteResponse);\n\n              case 7:\n                _context4.prev = 7;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.error(\"Unable to delete comment: \".concat(_context4.t0));\n                return _context4.abrupt(\"return\", {\n                  error: _context4.t0\n                });\n\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 7]]);\n      }));\n\n      function deleteComment(_x10, _x11) {\n        return _deleteComment.apply(this, arguments);\n      }\n\n      return deleteComment;\n    }()\n  }, {\n    key: \"mostActiveCommenters\",\n    value: function () {\n      var _mostActiveCommenters = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n        var pipeline, readConcern, aggregateResult;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                // TODO Ticket: User Report\n                // Return the 20 users who have commented the most on MFlix.\n                pipeline = [{\n                  $match: {}\n                }, {\n                  $group: {\n                    _id: {\n                      email: \"$email\"\n                    },\n                    count: {\n                      $sum: 1\n                    }\n                  }\n                }, {\n                  $project: {\n                    _id: \"$_id.email\",\n                    count: \"$count\"\n                  }\n                }, {\n                  $sort: {\n                    count: -1\n                  }\n                }, {\n                  $limit: 20\n                }]; // TODO Ticket: User Report\n                // Use a more durable Read Concern here to make sure this data is not stale.\n\n                readConcern = comments.readConcern;\n                _context5.next = 5;\n                return comments.aggregate(pipeline, {\n                  readConcern: readConcern\n                });\n\n              case 5:\n                aggregateResult = _context5.sent;\n                _context5.next = 8;\n                return aggregateResult.toArray();\n\n              case 8:\n                return _context5.abrupt(\"return\", _context5.sent);\n\n              case 11:\n                _context5.prev = 11;\n                _context5.t0 = _context5[\"catch\"](0);\n                console.error(\"Unable to retrieve most active commenters: \".concat(_context5.t0));\n                return _context5.abrupt(\"return\", {\n                  error: _context5.t0\n                });\n\n              case 15:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 11]]);\n      }));\n\n      function mostActiveCommenters() {\n        return _mostActiveCommenters.apply(this, arguments);\n      }\n\n      return mostActiveCommenters;\n    }()\n  }]);\n  return CommentsDAO;\n}();\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\n\n\nexports[\"default\"] = CommentsDAO;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb21tZW50cyIsIkNvbW1lbnRzREFPIiwiY29ubiIsImRiIiwicHJvY2VzcyIsImVudiIsIk1GTElYX05TIiwiY29sbGVjdGlvbiIsImNvbnNvbGUiLCJlcnJvciIsIm1vdmllSWQiLCJ1c2VyIiwiY29tbWVudCIsImRhdGUiLCJjb21tZW50RG9jIiwibW92aWVfaWQiLCJ0ZXh0IiwibmFtZSIsImVtYWlsIiwiaW5zZXJ0T25lIiwiY29tbWVudElkIiwidXNlckVtYWlsIiwidXBkYXRlT25lIiwiX2lkIiwiJHNldCIsInVwZGF0ZVJlc3BvbnNlIiwiZGVsZXRlT25lIiwiT2JqZWN0SWQiLCJkZWxldGVSZXNwb25zZSIsInBpcGVsaW5lIiwiJG1hdGNoIiwiJGdyb3VwIiwiY291bnQiLCIkc3VtIiwiJHByb2plY3QiLCIkc29ydCIsIiRsaW1pdCIsInJlYWRDb25jZXJuIiwiYWdncmVnYXRlIiwiYWdncmVnYXRlUmVzdWx0IiwidG9BcnJheSJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFwzMzYxNlxcT25lRHJpdmVcXEJ1cmVhdVxcbWZsaXgtanNcXHNyY1xcZGFvXFwiLCJzb3VyY2VzIjpbImNvbW1lbnRzREFPLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9iamVjdElkIH0gZnJvbSBcImJzb25cIlxuXG5sZXQgY29tbWVudHNcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tbWVudHNEQU8ge1xuICBzdGF0aWMgYXN5bmMgaW5qZWN0REIoY29ubikge1xuICAgIGlmIChjb21tZW50cykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb21tZW50cyA9IGF3YWl0IGNvbm4uZGIocHJvY2Vzcy5lbnYuTUZMSVhfTlMpLmNvbGxlY3Rpb24oXCJjb21tZW50c1wiKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byBlc3RhYmxpc2ggY29sbGVjdGlvbiBoYW5kbGVzIGluIHVzZXJEQU86ICR7ZX1gKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICBUaWNrZXQ6IENyZWF0ZS9VcGRhdGUgQ29tbWVudHNcblxuICBGb3IgdGhpcyB0aWNrZXQsIHlvdSB3aWxsIG5lZWQgdG8gaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcgdHdvIG1ldGhvZHM6XG5cbiAgLSBhZGRDb21tZW50XG4gIC0gdXBkYXRlQ29tbWVudFxuXG4gIFlvdSBjYW4gZmluZCB0aGVzZSBtZXRob2RzIGJlbG93IHRoaXMgZG9jc3RyaW5nLiBNYWtlIHN1cmUgdG8gcmVhZCB0aGUgY29tbWVudHNcbiAgdG8gYmV0dGVyIHVuZGVyc3RhbmQgdGhlIHRhc2suXG4gICovXG5cbiAgLyoqXG4gICAqIEluc2VydHMgYSBjb21tZW50IGludG8gdGhlIGBjb21tZW50c2AgY29sbGVjdGlvbiwgd2l0aCB0aGUgZm9sbG93aW5nIGZpZWxkczpcblxuICAgICAtIFwibmFtZVwiLCB0aGUgbmFtZSBvZiB0aGUgdXNlciBwb3N0aW5nIHRoZSBjb21tZW50XG4gICAgIC0gXCJlbWFpbFwiLCB0aGUgZW1haWwgb2YgdGhlIHVzZXIgcG9zdGluZyB0aGUgY29tbWVudFxuICAgICAtIFwibW92aWVfaWRcIiwgdGhlIF9pZCBvZiB0aGUgbW92aWUgcGVydGFpbmluZyB0byB0aGUgY29tbWVudFxuICAgICAtIFwidGV4dFwiLCB0aGUgdGV4dCBvZiB0aGUgY29tbWVudFxuICAgICAtIFwiZGF0ZVwiLCB0aGUgZGF0ZSB3aGVuIHRoZSBjb21tZW50IHdhcyBwb3N0ZWRcblxuICAgKiBAcGFyYW0ge3N0cmluZ30gbW92aWVJZCAtIFRoZSBfaWQgb2YgdGhlIG1vdmllIGluIHRoZSBgbW92aWVzYCBjb2xsZWN0aW9uLlxuICAgKiBAcGFyYW0ge09iamVjdH0gdXNlciAtIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSB1c2VyJ3MgbmFtZSBhbmQgZW1haWwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb21tZW50IC0gVGhlIHRleHQgb2YgdGhlIGNvbW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRlIC0gVGhlIGRhdGUgb24gd2hpY2ggdGhlIGNvbW1lbnQgd2FzIHBvc3RlZC5cbiAgICogQHJldHVybnMge0RBT1Jlc3BvbnNlfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGVpdGhlciBEQiByZXNwb25zZSBvciBcImVycm9yXCJcbiAgICovXG4gIHN0YXRpYyBhc3luYyBhZGRDb21tZW50KG1vdmllSWQsIHVzZXIsIGNvbW1lbnQsIGRhdGUpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETyBUaWNrZXQ6IENyZWF0ZS9VcGRhdGUgQ29tbWVudHNcbiAgICAgIC8vIENvbnN0cnVjdCB0aGUgY29tbWVudCBkb2N1bWVudCB0byBiZSBpbnNlcnRlZCBpbnRvIE1vbmdvREIuXG4gICAgICBjb25zdCBjb21tZW50RG9jID0ge1xuICAgICAgICBtb3ZpZV9pZDogbW92aWVJZCxcbiAgICAgICAgZGF0ZTogZGF0ZSxcbiAgICAgICAgdGV4dDogY29tbWVudCxcbiAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGF3YWl0IGNvbW1lbnRzLmluc2VydE9uZShjb21tZW50RG9jKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byBwb3N0IGNvbW1lbnQ6ICR7ZX1gKVxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGUgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBjb21tZW50IGluIHRoZSBjb21tZW50IGNvbGxlY3Rpb24uIFF1ZXJpZXMgZm9yIHRoZSBjb21tZW50XG4gICAqIGJhc2VkIGJ5IGJvdGggY29tbWVudCBfaWQgZmllbGQgYXMgd2VsbCBhcyB0aGUgZW1haWwgZmllbGQgdG8gZG91Ymx5IGVuc3VyZVxuICAgKiB0aGUgdXNlciBoYXMgcGVybWlzc2lvbiB0byBlZGl0IHRoaXMgY29tbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbW1lbnRJZCAtIFRoZSBfaWQgb2YgdGhlIGNvbW1lbnQgdG8gdXBkYXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXNlckVtYWlsIC0gVGhlIGVtYWlsIG9mIHRoZSB1c2VyIHdobyBvd25zIHRoZSBjb21tZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRoZSB1cGRhdGVkIHRleHQgb2YgdGhlIGNvbW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRlIC0gVGhlIGRhdGUgb24gd2hpY2ggdGhlIGNvbW1lbnQgd2FzIHVwZGF0ZWQuXG4gICAqIEByZXR1cm5zIHtEQU9SZXNwb25zZX0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBlaXRoZXIgREIgcmVzcG9uc2Ugb3IgXCJlcnJvclwiXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ29tbWVudChjb21tZW50SWQsIHVzZXJFbWFpbCwgdGV4dCwgZGF0ZSkge1xuICAgIHRyeSB7XG4gICAgICAvLyBUT0RPIFRpY2tldDogQ3JlYXRlL1VwZGF0ZSBDb21tZW50c1xuICAgICAgLy8gVXNlIHRoZSBjb21tZW50SWQgYW5kIHVzZXJFbWFpbCB0byBzZWxlY3QgdGhlIHByb3BlciBjb21tZW50LCB0aGVuXG4gICAgICAvLyB1cGRhdGUgdGhlIFwidGV4dFwiIGFuZCBcImRhdGVcIiBmaWVsZHMgb2YgdGhlIHNlbGVjdGVkIGNvbW1lbnQuXG4gICAgICBjb25zdCB1cGRhdGVSZXNwb25zZSA9IGF3YWl0IGNvbW1lbnRzLnVwZGF0ZU9uZShcbiAgICAgICAgeyBfaWQ6IGNvbW1lbnRJZCwgZW1haWw6IHVzZXJFbWFpbCB9LFxuICAgICAgICB7ICRzZXQ6IHsgZGF0ZTogZGF0ZSwgdGV4dDogdGV4dCB9IH0sXG4gICAgICApXG5cbiAgICAgIHJldHVybiB1cGRhdGVSZXNwb25zZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byB1cGRhdGUgY29tbWVudDogJHtlfWApXG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZUNvbW1lbnQoY29tbWVudElkLCB1c2VyRW1haWwpIHtcbiAgICAvKipcbiAgICBUaWNrZXQ6IERlbGV0ZSBDb21tZW50c1xuXG4gICAgSW1wbGVtZW50IHRoZSBkZWxldGVPbmUoKSBjYWxsIGluIHRoaXMgbWV0aG9kLlxuXG4gICAgRW5zdXJlIHRoZSBkZWxldGUgb3BlcmF0aW9uIGlzIGxpbWl0ZWQgc28gb25seSB0aGUgdXNlciBjYW4gZGVsZXRlIHRoZWlyIG93blxuICAgIGNvbW1lbnRzLCBidXQgbm90IGFueW9uZSBlbHNlJ3MgY29tbWVudHMuXG4gICAgKi9cblxuICAgIHRyeSB7XG4gICAgICAvLyBUT0RPIFRpY2tldDogRGVsZXRlIENvbW1lbnRzXG4gICAgICAvLyBVc2UgdGhlIHVzZXJFbWFpbCBhbmQgY29tbWVudElkIHRvIGRlbGV0ZSB0aGUgcHJvcGVyIGNvbW1lbnQuXG4gICAgICBjb25zdCBkZWxldGVSZXNwb25zZSA9IGF3YWl0IGNvbW1lbnRzLmRlbGV0ZU9uZSh7XG4gICAgICAgIF9pZDogT2JqZWN0SWQoY29tbWVudElkKSxcbiAgICAgICAgZW1haWw6IHVzZXJFbWFpbCxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiBkZWxldGVSZXNwb25zZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byBkZWxldGUgY29tbWVudDogJHtlfWApXG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG1vc3RBY3RpdmVDb21tZW50ZXJzKCkge1xuICAgIC8qKlxuICAgIFRpY2tldDogVXNlciBSZXBvcnRcblxuICAgIEJ1aWxkIGEgcGlwZWxpbmUgdGhhdCByZXR1cm5zIHRoZSAyMCBtb3N0IGZyZXF1ZW50IGNvbW1lbnRlcnMgb24gdGhlIE1GbGl4XG4gICAgc2l0ZS4gWW91IGNhbiBkbyB0aGlzIGJ5IGNvdW50aW5nIHRoZSBudW1iZXIgb2Ygb2NjdXJyZW5jZXMgb2YgYSB1c2VyJ3NcbiAgICBlbWFpbCBpbiB0aGUgYGNvbW1lbnRzYCBjb2xsZWN0aW9uLlxuICAgICovXG4gICAgdHJ5IHtcbiAgICAgIC8vIFRPRE8gVGlja2V0OiBVc2VyIFJlcG9ydFxuICAgICAgLy8gUmV0dXJuIHRoZSAyMCB1c2VycyB3aG8gaGF2ZSBjb21tZW50ZWQgdGhlIG1vc3Qgb24gTUZsaXguXG4gICAgICBjb25zdCBwaXBlbGluZSA9IFtcbiAgICAgICAge1xuICAgICAgICAgICRtYXRjaDoge30sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAkZ3JvdXA6IHtcbiAgICAgICAgICAgIF9pZDoge1xuICAgICAgICAgICAgICBlbWFpbDogXCIkZW1haWxcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb3VudDogeyAkc3VtOiAxIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICRwcm9qZWN0OiB7XG4gICAgICAgICAgICBfaWQ6IFwiJF9pZC5lbWFpbFwiLFxuICAgICAgICAgICAgY291bnQ6IFwiJGNvdW50XCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICRzb3J0OiB7XG4gICAgICAgICAgICBjb3VudDogLTEsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgeyAkbGltaXQ6IDIwIH0sXG4gICAgICBdXG5cbiAgICAgIC8vIFRPRE8gVGlja2V0OiBVc2VyIFJlcG9ydFxuICAgICAgLy8gVXNlIGEgbW9yZSBkdXJhYmxlIFJlYWQgQ29uY2VybiBoZXJlIHRvIG1ha2Ugc3VyZSB0aGlzIGRhdGEgaXMgbm90IHN0YWxlLlxuICAgICAgY29uc3QgcmVhZENvbmNlcm4gPSBjb21tZW50cy5yZWFkQ29uY2VyblxuXG4gICAgICBjb25zdCBhZ2dyZWdhdGVSZXN1bHQgPSBhd2FpdCBjb21tZW50cy5hZ2dyZWdhdGUocGlwZWxpbmUsIHtcbiAgICAgICAgcmVhZENvbmNlcm4sXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gYXdhaXQgYWdncmVnYXRlUmVzdWx0LnRvQXJyYXkoKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byByZXRyaWV2ZSBtb3N0IGFjdGl2ZSBjb21tZW50ZXJzOiAke2V9YClcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBTdWNjZXNzL0Vycm9yIHJldHVybiBvYmplY3RcbiAqIEB0eXBlZGVmIERBT1Jlc3BvbnNlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzdWNjZXNzXSAtIFN1Y2Nlc3NcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZXJyb3JdIC0gRXJyb3JcbiAqL1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUVBLElBQUlBLFFBQUo7O0lBRXFCQyxXOzs7Ozs7OztvR0FDbkIsaUJBQXNCQyxJQUF0QjtRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUFBLEtBQ01GLFFBRE47a0JBQUE7a0JBQUE7Z0JBQUE7O2dCQUFBOztjQUFBO2dCQUFBO2dCQUFBO2dCQUFBLE9BS3FCRSxJQUFJLENBQUNDLEVBQUwsQ0FBUUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFFBQXBCLEVBQThCQyxVQUE5QixDQUF5QyxVQUF6QyxDQUxyQjs7Y0FBQTtnQkFLSVAsUUFMSjtnQkFBQTtnQkFBQTs7Y0FBQTtnQkFBQTtnQkFBQTtnQkFPSVEsT0FBTyxDQUFDQyxLQUFSOztjQVBKO2NBQUE7Z0JBQUE7WUFBQTtVQUFBO1FBQUE7TUFBQSxDOzs7Ozs7OztJQVdBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0lBS0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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","map":{"version":3,"names":["comments","CommentsDAO","conn","db","process","env","MFLIX_NS","collection","console","error","movieId","user","comment","date","commentDoc","movie_id","text","name","email","insertOne","commentId","userEmail","updateOne","_id","$set","updateResponse","deleteOne","ObjectId","deleteResponse","pipeline","$match","$group","count","$sum","$project","$sort","$limit","readConcern","aggregate","aggregateResult","toArray"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\dao\\","sources":["commentsDAO.js"],"sourcesContent":["import { ObjectId } from \"bson\"\n\nlet comments\n\nexport default class CommentsDAO {\n  static async injectDB(conn) {\n    if (comments) {\n      return\n    }\n    try {\n      comments = await conn.db(process.env.MFLIX_NS).collection(\"comments\")\n    } catch (e) {\n      console.error(`Unable to establish collection handles in userDAO: ${e}`)\n    }\n  }\n\n  /**\n  Ticket: Create/Update Comments\n\n  For this ticket, you will need to implement the following two methods:\n\n  - addComment\n  - updateComment\n\n  You can find these methods below this docstring. Make sure to read the comments\n  to better understand the task.\n  */\n\n  /**\n   * Inserts a comment into the `comments` collection, with the following fields:\n\n     - \"name\", the name of the user posting the comment\n     - \"email\", the email of the user posting the comment\n     - \"movie_id\", the _id of the movie pertaining to the comment\n     - \"text\", the text of the comment\n     - \"date\", the date when the comment was posted\n\n   * @param {string} movieId - The _id of the movie in the `movies` collection.\n   * @param {Object} user - An object containing the user's name and email.\n   * @param {string} comment - The text of the comment.\n   * @param {string} date - The date on which the comment was posted.\n   * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n   */\n  static async addComment(movieId, user, comment, date) {\n    try {\n      // TODO Ticket: Create/Update Comments\n      // Construct the comment document to be inserted into MongoDB.\n      const commentDoc = {\n        movie_id: movieId,\n        date: date,\n        text: comment,\n        name: user.name,\n        email: user.email,\n      }\n\n      return await comments.insertOne(commentDoc)\n    } catch (e) {\n      console.error(`Unable to post comment: ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Updates the comment in the comment collection. Queries for the comment\n   * based by both comment _id field as well as the email field to doubly ensure\n   * the user has permission to edit this comment.\n   * @param {string} commentId - The _id of the comment to update.\n   * @param {string} userEmail - The email of the user who owns the comment.\n   * @param {string} text - The updated text of the comment.\n   * @param {string} date - The date on which the comment was updated.\n   * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n   */\n  static async updateComment(commentId, userEmail, text, date) {\n    try {\n      // TODO Ticket: Create/Update Comments\n      // Use the commentId and userEmail to select the proper comment, then\n      // update the \"text\" and \"date\" fields of the selected comment.\n      const updateResponse = await comments.updateOne(\n        { _id: commentId, email: userEmail },\n        { $set: { date: date, text: text } },\n      )\n\n      return updateResponse\n    } catch (e) {\n      console.error(`Unable to update comment: ${e}`)\n      return { error: e }\n    }\n  }\n\n  static async deleteComment(commentId, userEmail) {\n    /**\n    Ticket: Delete Comments\n\n    Implement the deleteOne() call in this method.\n\n    Ensure the delete operation is limited so only the user can delete their own\n    comments, but not anyone else's comments.\n    */\n\n    try {\n      // TODO Ticket: Delete Comments\n      // Use the userEmail and commentId to delete the proper comment.\n      const deleteResponse = await comments.deleteOne({\n        _id: ObjectId(commentId),\n        email: userEmail,\n      })\n\n      return deleteResponse\n    } catch (e) {\n      console.error(`Unable to delete comment: ${e}`)\n      return { error: e }\n    }\n  }\n\n  static async mostActiveCommenters() {\n    /**\n    Ticket: User Report\n\n    Build a pipeline that returns the 20 most frequent commenters on the MFlix\n    site. You can do this by counting the number of occurrences of a user's\n    email in the `comments` collection.\n    */\n    try {\n      // TODO Ticket: User Report\n      // Return the 20 users who have commented the most on MFlix.\n      const pipeline = [\n        {\n          $match: {},\n        },\n        {\n          $group: {\n            _id: {\n              email: \"$email\",\n            },\n            count: { $sum: 1 },\n          },\n        },\n        {\n          $project: {\n            _id: \"$_id.email\",\n            count: \"$count\",\n          },\n        },\n        {\n          $sort: {\n            count: -1,\n          },\n        },\n        { $limit: 20 },\n      ]\n\n      // TODO Ticket: User Report\n      // Use a more durable Read Concern here to make sure this data is not stale.\n      const readConcern = comments.readConcern\n\n      const aggregateResult = await comments.aggregate(pipeline, {\n        readConcern,\n      })\n\n      return await aggregateResult.toArray()\n    } catch (e) {\n      console.error(`Unable to retrieve most active commenters: ${e}`)\n      return { error: e }\n    }\n  }\n}\n\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\n"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AAEA,IAAIA,QAAJ;;IAEqBC,W;;;;;;;;oGACnB,iBAAsBC,IAAtB;QAAA;UAAA;YAAA;cAAA;gBAAA,KACMF,QADN;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAAA;gBAAA;gBAAA,OAKqBE,IAAI,CAACC,EAAL,CAAQC,OAAO,CAACC,GAAR,CAAYC,QAApB,EAA8BC,UAA9B,CAAyC,UAAzC,CALrB;;cAAA;gBAKIP,QALJ;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;gBAOIQ,OAAO,CAACC,KAAR;;cAPJ;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;IAWA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;IAKE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;sGAGE,kBAAwBC,OAAxB,EAAiCC,IAAjC,EAAuCC,OAAvC,EAAgDC,IAAhD;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEI;gBACA;gBACMC,UAJV,GAIuB;kBACjBC,QAAQ,EAAEL,OADO;kBAEjBG,IAAI,EAAEA,IAFW;kBAGjBG,IAAI,EAAEJ,OAHW;kBAIjBK,IAAI,EAAEN,IAAI,CAACM,IAJM;kBAKjBC,KAAK,EAAEP,IAAI,CAACO;gBALK,CAJvB;gBAAA;gBAAA,OAYiBlB,QAAQ,CAACmB,SAAT,CAAmBL,UAAnB,CAZjB;;cAAA;gBAAA;;cAAA;gBAAA;gBAAA;gBAcIN,OAAO,CAACC,KAAR;gBAdJ,kCAeW;kBAAEA,KAAK;gBAAP,CAfX;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;IAmBA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;yGACE,kBAA2BW,SAA3B,EAAsCC,SAAtC,EAAiDL,IAAjD,EAAuDH,IAAvD;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAKiCb,QAAQ,CAACsB,SAAT,CAC3B;kBAAEC,GAAG,EAAEH,SAAP;kBAAkBF,KAAK,EAAEG;gBAAzB,CAD2B,EAE3B;kBAAEG,IAAI,EAAE;oBAAEX,IAAI,EAAEA,IAAR;oBAAcG,IAAI,EAAEA;kBAApB;gBAAR,CAF2B,CALjC;;cAAA;gBAKUS,cALV;gBAAA,kCAUWA,cAVX;;cAAA;gBAAA;gBAAA;gBAYIjB,OAAO,CAACC,KAAR;gBAZJ,kCAaW;kBAAEA,KAAK;gBAAP,CAbX;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;yGAiBA,kBAA2BW,SAA3B,EAAsCC,SAAtC;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAaiCrB,QAAQ,CAAC0B,SAAT,CAAmB;kBAC9CH,GAAG,EAAE,IAAAI,cAAA,EAASP,SAAT,CADyC;kBAE9CF,KAAK,EAAEG;gBAFuC,CAAnB,CAbjC;;cAAA;gBAaUO,cAbV;gBAAA,kCAkBWA,cAlBX;;cAAA;gBAAA;gBAAA;gBAoBIpB,OAAO,CAACC,KAAR;gBApBJ,kCAqBW;kBAAEA,KAAK;gBAAP,CArBX;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;gHAyBA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBASI;gBACA;gBACMoB,QAXV,GAWqB,CACf;kBACEC,MAAM,EAAE;gBADV,CADe,EAIf;kBACEC,MAAM,EAAE;oBACNR,GAAG,EAAE;sBACHL,KAAK,EAAE;oBADJ,CADC;oBAINc,KAAK,EAAE;sBAAEC,IAAI,EAAE;oBAAR;kBAJD;gBADV,CAJe,EAYf;kBACEC,QAAQ,EAAE;oBACRX,GAAG,EAAE,YADG;oBAERS,KAAK,EAAE;kBAFC;gBADZ,CAZe,EAkBf;kBACEG,KAAK,EAAE;oBACLH,KAAK,EAAE,CAAC;kBADH;gBADT,CAlBe,EAuBf;kBAAEI,MAAM,EAAE;gBAAV,CAvBe,CAXrB,EAqCI;gBACA;;gBACMC,WAvCV,GAuCwBrC,QAAQ,CAACqC,WAvCjC;gBAAA;gBAAA,OAyCkCrC,QAAQ,CAACsC,SAAT,CAAmBT,QAAnB,EAA6B;kBACzDQ,WAAW,EAAXA;gBADyD,CAA7B,CAzClC;;cAAA;gBAyCUE,eAzCV;gBAAA;gBAAA,OA6CiBA,eAAe,CAACC,OAAhB,EA7CjB;;cAAA;gBAAA;;cAAA;gBAAA;gBAAA;gBA+CIhC,OAAO,CAACC,KAAR;gBA/CJ,kCAgDW;kBAAEA,KAAK;gBAAP,CAhDX;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;AAqDF;AACA;AACA;AACA;AACA;AACA"}},"mtime":1655995202238},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\users.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.User = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _usersDAO = _interopRequireDefault(require(\"../dao/usersDAO\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar hashPassword = /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(password) {\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _bcryptjs[\"default\"].hash(password, 10);\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function hashPassword(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar User = /*#__PURE__*/function () {\n  function User() {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        name = _ref2.name,\n        email = _ref2.email,\n        password = _ref2.password,\n        _ref2$preferences = _ref2.preferences,\n        preferences = _ref2$preferences === void 0 ? {} : _ref2$preferences;\n\n    (0, _classCallCheck2[\"default\"])(this, User);\n    this.name = name;\n    this.email = email;\n    this.password = password;\n    this.preferences = preferences;\n  }\n\n  (0, _createClass2[\"default\"])(User, [{\n    key: \"toJson\",\n    value: function toJson() {\n      return {\n        name: this.name,\n        email: this.email,\n        preferences: this.preferences\n      };\n    }\n  }, {\n    key: \"comparePassword\",\n    value: function () {\n      var _comparePassword = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(plainText) {\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _bcryptjs[\"default\"].compare(plainText, this.password);\n\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function comparePassword(_x2) {\n        return _comparePassword.apply(this, arguments);\n      }\n\n      return comparePassword;\n    }()\n  }, {\n    key: \"encoded\",\n    value: function encoded() {\n      return _jsonwebtoken[\"default\"].sign(_objectSpread({\n        exp: Math.floor(Date.now() / 1000) + 60 * 60 * 4\n      }, this.toJson()), process.env.SECRET_KEY);\n    }\n  }], [{\n    key: \"decoded\",\n    value: function () {\n      var _decoded = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(userJwt) {\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", _jsonwebtoken[\"default\"].verify(userJwt, process.env.SECRET_KEY, function (error, res) {\n                  if (error) {\n                    return {\n                      error: error\n                    };\n                  }\n\n                  return new User(res);\n                }));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function decoded(_x3) {\n        return _decoded.apply(this, arguments);\n      }\n\n      return decoded;\n    }()\n  }]);\n  return User;\n}();\n\nexports.User = User;\n\nvar UserController = /*#__PURE__*/function () {\n  function UserController() {\n    (0, _classCallCheck2[\"default\"])(this, UserController);\n  }\n\n  (0, _createClass2[\"default\"])(UserController, null, [{\n    key: \"register\",\n    value: function () {\n      var _register = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res) {\n        var userFromBody, errors, userInfo, insertResult, userFromDB, user;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                userFromBody = req.body;\n                errors = {};\n\n                if (userFromBody && userFromBody.password.length < 8) {\n                  errors.password = \"Your password must be at least 8 characters.\";\n                }\n\n                if (userFromBody && userFromBody.name.length < 3) {\n                  errors.name = \"You must specify a name of at least 3 characters.\";\n                }\n\n                if (!(Object.keys(errors).length > 0)) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                res.status(400).json(errors);\n                return _context4.abrupt(\"return\");\n\n              case 8:\n                _context4.t0 = _objectSpread;\n                _context4.t1 = _objectSpread({}, userFromBody);\n                _context4.t2 = {};\n                _context4.next = 13;\n                return hashPassword(userFromBody.password);\n\n              case 13:\n                _context4.t3 = _context4.sent;\n                _context4.t4 = {\n                  password: _context4.t3\n                };\n                userInfo = (0, _context4.t0)(_context4.t1, _context4.t2, _context4.t4);\n                _context4.next = 18;\n                return _usersDAO[\"default\"].addUser(userInfo);\n\n              case 18:\n                insertResult = _context4.sent;\n\n                if (!insertResult.success) {\n                  errors.email = insertResult.error;\n                }\n\n                _context4.next = 22;\n                return _usersDAO[\"default\"].getUser(userFromBody.email);\n\n              case 22:\n                userFromDB = _context4.sent;\n\n                if (!userFromDB) {\n                  errors.general = \"Internal error, please try again later\";\n                }\n\n                if (!(Object.keys(errors).length > 0)) {\n                  _context4.next = 27;\n                  break;\n                }\n\n                res.status(400).json(errors);\n                return _context4.abrupt(\"return\");\n\n              case 27:\n                user = new User(userFromDB);\n                res.json({\n                  auth_token: user.encoded(),\n                  info: user.toJson()\n                });\n                _context4.next = 34;\n                break;\n\n              case 31:\n                _context4.prev = 31;\n                _context4.t5 = _context4[\"catch\"](0);\n                res.status(500).json({\n                  error: _context4.t5\n                });\n\n              case 34:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 31]]);\n      }));\n\n      function register(_x4, _x5) {\n        return _register.apply(this, arguments);\n      }\n\n      return register;\n    }()\n  }, {\n    key: \"login\",\n    value: function () {\n      var _login = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(req, res, next) {\n        var _req$body, email, password, userData, user, loginResponse;\n\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _req$body = req.body, email = _req$body.email, password = _req$body.password;\n\n                if (!(!email || typeof email !== \"string\")) {\n                  _context5.next = 5;\n                  break;\n                }\n\n                res.status(400).json({\n                  error: \"Bad email format, expected string.\"\n                });\n                return _context5.abrupt(\"return\");\n\n              case 5:\n                if (!(!password || typeof password !== \"string\")) {\n                  _context5.next = 8;\n                  break;\n                }\n\n                res.status(400).json({\n                  error: \"Bad password format, expected string.\"\n                });\n                return _context5.abrupt(\"return\");\n\n              case 8:\n                _context5.next = 10;\n                return _usersDAO[\"default\"].getUser(email);\n\n              case 10:\n                userData = _context5.sent;\n\n                if (userData) {\n                  _context5.next = 14;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: \"Make sure your email is correct.\"\n                });\n                return _context5.abrupt(\"return\");\n\n              case 14:\n                user = new User(userData);\n                _context5.next = 17;\n                return user.comparePassword(password);\n\n              case 17:\n                if (_context5.sent) {\n                  _context5.next = 20;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: \"Make sure your password is correct.\"\n                });\n                return _context5.abrupt(\"return\");\n\n              case 20:\n                _context5.next = 22;\n                return _usersDAO[\"default\"].loginUser(user.email, user.encoded());\n\n              case 22:\n                loginResponse = _context5.sent;\n\n                if (loginResponse.success) {\n                  _context5.next = 26;\n                  break;\n                }\n\n                res.status(500).json({\n                  error: loginResponse.error\n                });\n                return _context5.abrupt(\"return\");\n\n              case 26:\n                res.json({\n                  auth_token: user.encoded(),\n                  info: user.toJson()\n                });\n                _context5.next = 33;\n                break;\n\n              case 29:\n                _context5.prev = 29;\n                _context5.t0 = _context5[\"catch\"](0);\n                res.status(400).json({\n                  error: _context5.t0\n                });\n                return _context5.abrupt(\"return\");\n\n              case 33:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 29]]);\n      }));\n\n      function login(_x6, _x7, _x8) {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }, {\n    key: \"logout\",\n    value: function () {\n      var _logout = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(req, res) {\n        var userJwt, userObj, error, logoutResult;\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context6.next = 4;\n                return User.decoded(userJwt);\n\n              case 4:\n                userObj = _context6.sent;\n                error = userObj.error;\n\n                if (!error) {\n                  _context6.next = 9;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: error\n                });\n                return _context6.abrupt(\"return\");\n\n              case 9:\n                _context6.next = 11;\n                return _usersDAO[\"default\"].logoutUser(userObj.email);\n\n              case 11:\n                logoutResult = _context6.sent;\n                error = logoutResult.error;\n\n                if (!error) {\n                  _context6.next = 16;\n                  break;\n                }\n\n                res.status(500).json({\n                  error: error\n                });\n                return _context6.abrupt(\"return\");\n\n              case 16:\n                res.json(logoutResult);\n                _context6.next = 22;\n                break;\n\n              case 19:\n                _context6.prev = 19;\n                _context6.t0 = _context6[\"catch\"](0);\n                res.status(500).json(_context6.t0);\n\n              case 22:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 19]]);\n      }));\n\n      function logout(_x9, _x10) {\n        return _logout.apply(this, arguments);\n      }\n\n      return logout;\n    }()\n  }, {\n    key: \"delete\",\n    value: function () {\n      var _delete2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(req, res) {\n        var password, userJwt, userClaim, error, user, deleteResult;\n        return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                password = req.body.password;\n\n                if (!(!password || typeof password !== \"string\")) {\n                  _context7.next = 5;\n                  break;\n                }\n\n                res.status(400).json({\n                  error: \"Bad password format, expected string.\"\n                });\n                return _context7.abrupt(\"return\");\n\n              case 5:\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context7.next = 8;\n                return User.decoded(userJwt);\n\n              case 8:\n                userClaim = _context7.sent;\n                error = userClaim.error;\n\n                if (!error) {\n                  _context7.next = 13;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: error\n                });\n                return _context7.abrupt(\"return\");\n\n              case 13:\n                _context7.t0 = User;\n                _context7.next = 16;\n                return _usersDAO[\"default\"].getUser(userClaim.email);\n\n              case 16:\n                _context7.t1 = _context7.sent;\n                user = new _context7.t0(_context7.t1);\n                _context7.next = 20;\n                return user.comparePassword(password);\n\n              case 20:\n                if (_context7.sent) {\n                  _context7.next = 23;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: \"Make sure your password is correct.\"\n                });\n                return _context7.abrupt(\"return\");\n\n              case 23:\n                _context7.next = 25;\n                return _usersDAO[\"default\"].deleteUser(userClaim.email);\n\n              case 25:\n                deleteResult = _context7.sent;\n                error = deleteResult.error;\n\n                if (!error) {\n                  _context7.next = 30;\n                  break;\n                }\n\n                res.status(500).json({\n                  error: error\n                });\n                return _context7.abrupt(\"return\");\n\n              case 30:\n                res.json(deleteResult);\n                _context7.next = 36;\n                break;\n\n              case 33:\n                _context7.prev = 33;\n                _context7.t2 = _context7[\"catch\"](0);\n                res.status(500).json(_context7.t2);\n\n              case 36:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, null, [[0, 33]]);\n      }));\n\n      function _delete(_x11, _x12) {\n        return _delete2.apply(this, arguments);\n      }\n\n      return _delete;\n    }()\n  }, {\n    key: \"save\",\n    value: function () {\n      var _save = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee8(req, res) {\n        var userJwt, userFromHeader, error, userFromDB, updatedUser;\n        return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context8.next = 4;\n                return User.decoded(userJwt);\n\n              case 4:\n                userFromHeader = _context8.sent;\n                error = userFromHeader.error;\n\n                if (!error) {\n                  _context8.next = 9;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: error\n                });\n                return _context8.abrupt(\"return\");\n\n              case 9:\n                _context8.next = 11;\n                return _usersDAO[\"default\"].updatePreferences(userFromHeader.email, req.body.preferences);\n\n              case 11:\n                _context8.next = 13;\n                return _usersDAO[\"default\"].getUser(userFromHeader.email);\n\n              case 13:\n                userFromDB = _context8.sent;\n                updatedUser = new User(userFromDB);\n                res.json({\n                  auth_token: updatedUser.encoded(),\n                  info: updatedUser.toJson()\n                });\n                _context8.next = 21;\n                break;\n\n              case 18:\n                _context8.prev = 18;\n                _context8.t0 = _context8[\"catch\"](0);\n                res.status(500).json(_context8.t0);\n\n              case 21:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[0, 18]]);\n      }));\n\n      function save(_x13, _x14) {\n        return _save.apply(this, arguments);\n      }\n\n      return save;\n    }() // for internal use only\n\n  }, {\n    key: \"createAdminUser\",\n    value: function () {\n      var _createAdminUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee9(req, res) {\n        var userFromBody, errors, userInfo, insertResult, makeAdminResponse, userFromDB, user, _jwt, loginResponse;\n\n        return _regenerator[\"default\"].wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                userFromBody = req.body;\n                errors = {};\n\n                if (userFromBody && userFromBody.password.length < 8) {\n                  errors.password = \"Your password must be at least 8 characters.\";\n                }\n\n                if (userFromBody && userFromBody.name.length < 3) {\n                  errors.name = \"You must specify a name of at least 3 characters.\";\n                }\n\n                if (!(Object.keys(errors).length > 0)) {\n                  _context9.next = 8;\n                  break;\n                }\n\n                res.status(400).json(errors);\n                return _context9.abrupt(\"return\");\n\n              case 8:\n                _context9.t0 = _objectSpread;\n                _context9.t1 = _objectSpread({}, userFromBody);\n                _context9.t2 = {};\n                _context9.next = 13;\n                return hashPassword(userFromBody.password);\n\n              case 13:\n                _context9.t3 = _context9.sent;\n                _context9.t4 = {\n                  password: _context9.t3\n                };\n                userInfo = (0, _context9.t0)(_context9.t1, _context9.t2, _context9.t4);\n                _context9.next = 18;\n                return _usersDAO[\"default\"].addUser(userInfo);\n\n              case 18:\n                insertResult = _context9.sent;\n\n                if (!insertResult.success) {\n                  errors.email = insertResult.error;\n                }\n\n                if (!(Object.keys(errors).length > 0)) {\n                  _context9.next = 23;\n                  break;\n                }\n\n                res.status(400).json(errors);\n                return _context9.abrupt(\"return\");\n\n              case 23:\n                _context9.next = 25;\n                return _usersDAO[\"default\"].makeAdmin(userFromBody.email);\n\n              case 25:\n                makeAdminResponse = _context9.sent;\n                _context9.next = 28;\n                return _usersDAO[\"default\"].getUser(userFromBody.email);\n\n              case 28:\n                userFromDB = _context9.sent;\n\n                if (!userFromDB) {\n                  errors.general = \"Internal error, please try again later\";\n                }\n\n                if (!(Object.keys(errors).length > 0)) {\n                  _context9.next = 33;\n                  break;\n                }\n\n                res.status(400).json(errors);\n                return _context9.abrupt(\"return\");\n\n              case 33:\n                user = new User(userFromDB);\n                _jwt = user.encoded();\n                _context9.next = 37;\n                return _usersDAO[\"default\"].loginUser(user.email, _jwt);\n\n              case 37:\n                loginResponse = _context9.sent;\n                res.json({\n                  auth_token: _jwt,\n                  info: user.toJson()\n                });\n                _context9.next = 44;\n                break;\n\n              case 41:\n                _context9.prev = 41;\n                _context9.t5 = _context9[\"catch\"](0);\n                res.status(500).json(_context9.t5);\n\n              case 44:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, null, [[0, 41]]);\n      }));\n\n      function createAdminUser(_x15, _x16) {\n        return _createAdminUser.apply(this, arguments);\n      }\n\n      return createAdminUser;\n    }()\n  }]);\n  return UserController;\n}();\n\nexports[\"default\"] = UserController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsImJjcnlwdCIsImhhc2giLCJVc2VyIiwibmFtZSIsImVtYWlsIiwicHJlZmVyZW5jZXMiLCJwbGFpblRleHQiLCJjb21wYXJlIiwiand0Iiwic2lnbiIsImV4cCIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJ0b0pzb24iLCJwcm9jZXNzIiwiZW52IiwiU0VDUkVUX0tFWSIsInVzZXJKd3QiLCJ2ZXJpZnkiLCJlcnJvciIsInJlcyIsIlVzZXJDb250cm9sbGVyIiwicmVxIiwidXNlckZyb21Cb2R5IiwiYm9keSIsImVycm9ycyIsImxlbmd0aCIsIk9iamVjdCIsImtleXMiLCJzdGF0dXMiLCJqc29uIiwidXNlckluZm8iLCJVc2Vyc0RBTyIsImFkZFVzZXIiLCJpbnNlcnRSZXN1bHQiLCJzdWNjZXNzIiwiZ2V0VXNlciIsInVzZXJGcm9tREIiLCJnZW5lcmFsIiwidXNlciIsImF1dGhfdG9rZW4iLCJlbmNvZGVkIiwiaW5mbyIsIm5leHQiLCJ1c2VyRGF0YSIsImNvbXBhcmVQYXNzd29yZCIsImxvZ2luVXNlciIsImxvZ2luUmVzcG9uc2UiLCJnZXQiLCJzbGljZSIsImRlY29kZWQiLCJ1c2VyT2JqIiwibG9nb3V0VXNlciIsImxvZ291dFJlc3VsdCIsInVzZXJDbGFpbSIsImRlbGV0ZVVzZXIiLCJkZWxldGVSZXN1bHQiLCJ1c2VyRnJvbUhlYWRlciIsInVwZGF0ZVByZWZlcmVuY2VzIiwidXBkYXRlZFVzZXIiLCJtYWtlQWRtaW4iLCJtYWtlQWRtaW5SZXNwb25zZSJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFwzMzYxNlxcT25lRHJpdmVcXEJ1cmVhdVxcbWZsaXgtanNcXHNyY1xcYXBpXFwiLCJzb3VyY2VzIjpbInVzZXJzLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIlxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCJcbmltcG9ydCBVc2Vyc0RBTyBmcm9tIFwiLi4vZGFvL3VzZXJzREFPXCJcblxuY29uc3QgaGFzaFBhc3N3b3JkID0gYXN5bmMgcGFzc3dvcmQgPT4gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKVxuXG5leHBvcnQgY2xhc3MgVXNlciB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBwcmVmZXJlbmNlcyA9IHt9IH0gPSB7fSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICB0aGlzLmVtYWlsID0gZW1haWxcbiAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmRcbiAgICB0aGlzLnByZWZlcmVuY2VzID0gcHJlZmVyZW5jZXNcbiAgfVxuICB0b0pzb24oKSB7XG4gICAgcmV0dXJuIHsgbmFtZTogdGhpcy5uYW1lLCBlbWFpbDogdGhpcy5lbWFpbCwgcHJlZmVyZW5jZXM6IHRoaXMucHJlZmVyZW5jZXMgfVxuICB9XG4gIGFzeW5jIGNvbXBhcmVQYXNzd29yZChwbGFpblRleHQpIHtcbiAgICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGxhaW5UZXh0LCB0aGlzLnBhc3N3b3JkKVxuICB9XG4gIGVuY29kZWQoKSB7XG4gICAgcmV0dXJuIGp3dC5zaWduKFxuICAgICAge1xuICAgICAgICBleHA6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgNjAgKiA2MCAqIDQsXG4gICAgICAgIC4uLnRoaXMudG9Kc29uKCksXG4gICAgICB9LFxuICAgICAgcHJvY2Vzcy5lbnYuU0VDUkVUX0tFWSxcbiAgICApXG4gIH1cbiAgc3RhdGljIGFzeW5jIGRlY29kZWQodXNlckp3dCkge1xuICAgIHJldHVybiBqd3QudmVyaWZ5KHVzZXJKd3QsIHByb2Nlc3MuZW52LlNFQ1JFVF9LRVksIChlcnJvciwgcmVzKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHsgZXJyb3IgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBVc2VyKHJlcylcbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJDb250cm9sbGVyIHtcbiAgc3RhdGljIGFzeW5jIHJlZ2lzdGVyKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJGcm9tQm9keSA9IHJlcS5ib2R5XG4gICAgICBsZXQgZXJyb3JzID0ge31cbiAgICAgIGlmICh1c2VyRnJvbUJvZHkgJiYgdXNlckZyb21Cb2R5LnBhc3N3b3JkLmxlbmd0aCA8IDgpIHtcbiAgICAgICAgZXJyb3JzLnBhc3N3b3JkID0gXCJZb3VyIHBhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzLlwiXG4gICAgICB9XG4gICAgICBpZiAodXNlckZyb21Cb2R5ICYmIHVzZXJGcm9tQm9keS5uYW1lLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgZXJyb3JzLm5hbWUgPSBcIllvdSBtdXN0IHNwZWNpZnkgYSBuYW1lIG9mIGF0IGxlYXN0IDMgY2hhcmFjdGVycy5cIlxuICAgICAgfVxuXG4gICAgICBpZiAoT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKGVycm9ycylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXJJbmZvID0ge1xuICAgICAgICAuLi51c2VyRnJvbUJvZHksXG4gICAgICAgIHBhc3N3b3JkOiBhd2FpdCBoYXNoUGFzc3dvcmQodXNlckZyb21Cb2R5LnBhc3N3b3JkKSxcbiAgICAgIH1cblxuICAgICAgY29uc3QgaW5zZXJ0UmVzdWx0ID0gYXdhaXQgVXNlcnNEQU8uYWRkVXNlcih1c2VySW5mbylcbiAgICAgIGlmICghaW5zZXJ0UmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXJyb3JzLmVtYWlsID0gaW5zZXJ0UmVzdWx0LmVycm9yXG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyRnJvbURCID0gYXdhaXQgVXNlcnNEQU8uZ2V0VXNlcih1c2VyRnJvbUJvZHkuZW1haWwpXG4gICAgICBpZiAoIXVzZXJGcm9tREIpIHtcbiAgICAgICAgZXJyb3JzLmdlbmVyYWwgPSBcIkludGVybmFsIGVycm9yLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyXCJcbiAgICAgIH1cblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbihlcnJvcnMpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIodXNlckZyb21EQilcblxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBhdXRoX3Rva2VuOiB1c2VyLmVuY29kZWQoKSxcbiAgICAgICAgaW5mbzogdXNlci50b0pzb24oKSxcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZSB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBsb2dpbihyZXEsIHJlcywgbmV4dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHlcbiAgICAgIGlmICghZW1haWwgfHwgdHlwZW9mIGVtYWlsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQmFkIGVtYWlsIGZvcm1hdCwgZXhwZWN0ZWQgc3RyaW5nLlwiIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKCFwYXNzd29yZCB8fCB0eXBlb2YgcGFzc3dvcmQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJCYWQgcGFzc3dvcmQgZm9ybWF0LCBleHBlY3RlZCBzdHJpbmcuXCIgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBsZXQgdXNlckRhdGEgPSBhd2FpdCBVc2Vyc0RBTy5nZXRVc2VyKGVtYWlsKVxuICAgICAgaWYgKCF1c2VyRGF0YSkge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIk1ha2Ugc3VyZSB5b3VyIGVtYWlsIGlzIGNvcnJlY3QuXCIgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIodXNlckRhdGEpXG5cbiAgICAgIGlmICghKGF3YWl0IHVzZXIuY29tcGFyZVBhc3N3b3JkKHBhc3N3b3JkKSkpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJNYWtlIHN1cmUgeW91ciBwYXNzd29yZCBpcyBjb3JyZWN0LlwiIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBsb2dpblJlc3BvbnNlID0gYXdhaXQgVXNlcnNEQU8ubG9naW5Vc2VyKHVzZXIuZW1haWwsIHVzZXIuZW5jb2RlZCgpKVxuICAgICAgaWYgKCFsb2dpblJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogbG9naW5SZXNwb25zZS5lcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKHsgYXV0aF90b2tlbjogdXNlci5lbmNvZGVkKCksIGluZm86IHVzZXIudG9Kc29uKCkgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBlIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbG9nb3V0KHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJKd3QgPSByZXEuZ2V0KFwiQXV0aG9yaXphdGlvblwiKS5zbGljZShcIkJlYXJlciBcIi5sZW5ndGgpXG4gICAgICBjb25zdCB1c2VyT2JqID0gYXdhaXQgVXNlci5kZWNvZGVkKHVzZXJKd3QpXG4gICAgICB2YXIgeyBlcnJvciB9ID0gdXNlck9ialxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3IgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCBsb2dvdXRSZXN1bHQgPSBhd2FpdCBVc2Vyc0RBTy5sb2dvdXRVc2VyKHVzZXJPYmouZW1haWwpXG4gICAgICB2YXIgeyBlcnJvciB9ID0gbG9nb3V0UmVzdWx0XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKGxvZ291dFJlc3VsdClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbihlKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBkZWxldGUocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHsgcGFzc3dvcmQgfSA9IHJlcS5ib2R5XG4gICAgICBpZiAoIXBhc3N3b3JkIHx8IHR5cGVvZiBwYXNzd29yZCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkJhZCBwYXNzd29yZCBmb3JtYXQsIGV4cGVjdGVkIHN0cmluZy5cIiB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJKd3QgPSByZXEuZ2V0KFwiQXV0aG9yaXphdGlvblwiKS5zbGljZShcIkJlYXJlciBcIi5sZW5ndGgpXG4gICAgICBjb25zdCB1c2VyQ2xhaW0gPSBhd2FpdCBVc2VyLmRlY29kZWQodXNlckp3dClcbiAgICAgIHZhciB7IGVycm9yIH0gPSB1c2VyQ2xhaW1cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKGF3YWl0IFVzZXJzREFPLmdldFVzZXIodXNlckNsYWltLmVtYWlsKSlcbiAgICAgIGlmICghKGF3YWl0IHVzZXIuY29tcGFyZVBhc3N3b3JkKHBhc3N3b3JkKSkpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJNYWtlIHN1cmUgeW91ciBwYXNzd29yZCBpcyBjb3JyZWN0LlwiIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgZGVsZXRlUmVzdWx0ID0gYXdhaXQgVXNlcnNEQU8uZGVsZXRlVXNlcih1c2VyQ2xhaW0uZW1haWwpXG4gICAgICB2YXIgeyBlcnJvciB9ID0gZGVsZXRlUmVzdWx0XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKGRlbGV0ZVJlc3VsdClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbihlKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzYXZlKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJKd3QgPSByZXEuZ2V0KFwiQXV0aG9yaXphdGlvblwiKS5zbGljZShcIkJlYXJlciBcIi5sZW5ndGgpXG4gICAgICBjb25zdCB1c2VyRnJvbUhlYWRlciA9IGF3YWl0IFVzZXIuZGVjb2RlZCh1c2VySnd0KVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IHVzZXJGcm9tSGVhZGVyXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgYXdhaXQgVXNlcnNEQU8udXBkYXRlUHJlZmVyZW5jZXMoXG4gICAgICAgIHVzZXJGcm9tSGVhZGVyLmVtYWlsLFxuICAgICAgICByZXEuYm9keS5wcmVmZXJlbmNlcyxcbiAgICAgIClcbiAgICAgIGNvbnN0IHVzZXJGcm9tREIgPSBhd2FpdCBVc2Vyc0RBTy5nZXRVc2VyKHVzZXJGcm9tSGVhZGVyLmVtYWlsKVxuICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSBuZXcgVXNlcih1c2VyRnJvbURCKVxuXG4gICAgICByZXMuanNvbih7XG4gICAgICAgIGF1dGhfdG9rZW46IHVwZGF0ZWRVc2VyLmVuY29kZWQoKSxcbiAgICAgICAgaW5mbzogdXBkYXRlZFVzZXIudG9Kc29uKCksXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKGUpXG4gICAgfVxuICB9XG5cbiAgLy8gZm9yIGludGVybmFsIHVzZSBvbmx5XG4gIHN0YXRpYyBhc3luYyBjcmVhdGVBZG1pblVzZXIocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlckZyb21Cb2R5ID0gcmVxLmJvZHlcbiAgICAgIGxldCBlcnJvcnMgPSB7fVxuICAgICAgaWYgKHVzZXJGcm9tQm9keSAmJiB1c2VyRnJvbUJvZHkucGFzc3dvcmQubGVuZ3RoIDwgOCkge1xuICAgICAgICBlcnJvcnMucGFzc3dvcmQgPSBcIllvdXIgcGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMuXCJcbiAgICAgIH1cbiAgICAgIGlmICh1c2VyRnJvbUJvZHkgJiYgdXNlckZyb21Cb2R5Lm5hbWUubGVuZ3RoIDwgMykge1xuICAgICAgICBlcnJvcnMubmFtZSA9IFwiWW91IG11c3Qgc3BlY2lmeSBhIG5hbWUgb2YgYXQgbGVhc3QgMyBjaGFyYWN0ZXJzLlwiXG4gICAgICB9XG5cbiAgICAgIGlmIChPYmplY3Qua2V5cyhlcnJvcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oZXJyb3JzKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgdXNlckluZm8gPSB7XG4gICAgICAgIC4uLnVzZXJGcm9tQm9keSxcbiAgICAgICAgcGFzc3dvcmQ6IGF3YWl0IGhhc2hQYXNzd29yZCh1c2VyRnJvbUJvZHkucGFzc3dvcmQpLFxuICAgICAgfVxuXG4gICAgICBjb25zdCBpbnNlcnRSZXN1bHQgPSBhd2FpdCBVc2Vyc0RBTy5hZGRVc2VyKHVzZXJJbmZvKVxuICAgICAgaWYgKCFpbnNlcnRSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBlcnJvcnMuZW1haWwgPSBpbnNlcnRSZXN1bHQuZXJyb3JcbiAgICAgIH1cblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbihlcnJvcnMpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBtYWtlQWRtaW5SZXNwb25zZSA9IGF3YWl0IFVzZXJzREFPLm1ha2VBZG1pbih1c2VyRnJvbUJvZHkuZW1haWwpXG5cbiAgICAgIGNvbnN0IHVzZXJGcm9tREIgPSBhd2FpdCBVc2Vyc0RBTy5nZXRVc2VyKHVzZXJGcm9tQm9keS5lbWFpbClcbiAgICAgIGlmICghdXNlckZyb21EQikge1xuICAgICAgICBlcnJvcnMuZ2VuZXJhbCA9IFwiSW50ZXJuYWwgZXJyb3IsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXJcIlxuICAgICAgfVxuXG4gICAgICBpZiAoT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKGVycm9ycylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih1c2VyRnJvbURCKVxuICAgICAgY29uc3Qgand0ID0gdXNlci5lbmNvZGVkKClcbiAgICAgIGNvbnN0IGxvZ2luUmVzcG9uc2UgPSBhd2FpdCBVc2Vyc0RBTy5sb2dpblVzZXIodXNlci5lbWFpbCwgand0KVxuXG4gICAgICByZXMuanNvbih7XG4gICAgICAgIGF1dGhfdG9rZW46IGp3dCxcbiAgICAgICAgaW5mbzogdXNlci50b0pzb24oKSxcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oZSlcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7Ozs7QUFFQSxJQUFNQSxZQUFZO0VBQUEseUZBQUcsaUJBQU1DLFFBQU47SUFBQTtNQUFBO1FBQUE7VUFBQTtZQUFBO1lBQUEsT0FBd0JDLG9CQUFBLENBQU9DLElBQVAsQ0FBWUYsUUFBWixFQUFzQixFQUF0QixDQUF4Qjs7VUFBQTtZQUFBOztVQUFBO1VBQUE7WUFBQTtRQUFBO01BQUE7SUFBQTtFQUFBLENBQUg7O0VBQUEsZ0JBQVpELFlBQVk7SUFBQTtFQUFBO0FBQUEsR0FBbEI7O0lBRWFJLEk7RUFDWCxnQkFBOEQ7SUFBQSxnRkFBSixFQUFJO0lBQUEsSUFBaERDLElBQWdELFNBQWhEQSxJQUFnRDtJQUFBLElBQTFDQyxLQUEwQyxTQUExQ0EsS0FBMEM7SUFBQSxJQUFuQ0wsUUFBbUMsU0FBbkNBLFFBQW1DO0lBQUEsOEJBQXpCTSxXQUF5QjtJQUFBLElBQXpCQSxXQUF5QixrQ0FBWCxFQUFXOztJQUFBO0lBQzVELEtBQUtGLElBQUwsR0FBWUEsSUFBWjtJQUNBLEtBQUtDLEtBQUwsR0FBYUEsS0FBYjtJQUNBLEtBQUtMLFFBQUwsR0FBZ0JBLFFBQWhCO0lBQ0EsS0FBS00sV0FBTCxHQUFtQkEsV0FBbkI7RUFDRDs7OztXQUNELGtCQUFTO01BQ1AsT0FBTztRQUFFRixJQUFJLEVBQUUsS0FBS0EsSUFBYjtRQUFtQkMsS0FBSyxFQUFFLEtBQUtBLEtBQS9CO1FBQXNDQyxXQUFXLEVBQUUsS0FBS0E7TUFBeEQsQ0FBUDtJQUNEOzs7OzJHQUNELGtCQUFzQkMsU0FBdEI7UUFBQTtVQUFBO1lBQUE7Y0FBQTtnQkFBQTtnQkFBQSxPQUNlTixvQkFBQSxDQUFPTyxPQUFQLENBQWVELFNBQWYsRUFBMEIsS0FB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","map":{"version":3,"names":["hashPassword","password","bcrypt","hash","User","name","email","preferences","plainText","compare","jwt","sign","exp","Math","floor","Date","now","toJson","process","env","SECRET_KEY","userJwt","verify","error","res","UserController","req","userFromBody","body","errors","length","Object","keys","status","json","userInfo","UsersDAO","addUser","insertResult","success","getUser","userFromDB","general","user","auth_token","encoded","info","next","userData","comparePassword","loginUser","loginResponse","get","slice","decoded","userObj","logoutUser","logoutResult","userClaim","deleteUser","deleteResult","userFromHeader","updatePreferences","updatedUser","makeAdmin","makeAdminResponse"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\api\\","sources":["users.controller.js"],"sourcesContent":["import bcrypt from \"bcryptjs\"\nimport jwt from \"jsonwebtoken\"\nimport UsersDAO from \"../dao/usersDAO\"\n\nconst hashPassword = async password => await bcrypt.hash(password, 10)\n\nexport class User {\n  constructor({ name, email, password, preferences = {} } = {}) {\n    this.name = name\n    this.email = email\n    this.password = password\n    this.preferences = preferences\n  }\n  toJson() {\n    return { name: this.name, email: this.email, preferences: this.preferences }\n  }\n  async comparePassword(plainText) {\n    return await bcrypt.compare(plainText, this.password)\n  }\n  encoded() {\n    return jwt.sign(\n      {\n        exp: Math.floor(Date.now() / 1000) + 60 * 60 * 4,\n        ...this.toJson(),\n      },\n      process.env.SECRET_KEY,\n    )\n  }\n  static async decoded(userJwt) {\n    return jwt.verify(userJwt, process.env.SECRET_KEY, (error, res) => {\n      if (error) {\n        return { error }\n      }\n      return new User(res)\n    })\n  }\n}\n\nexport default class UserController {\n  static async register(req, res) {\n    try {\n      const userFromBody = req.body\n      let errors = {}\n      if (userFromBody && userFromBody.password.length < 8) {\n        errors.password = \"Your password must be at least 8 characters.\"\n      }\n      if (userFromBody && userFromBody.name.length < 3) {\n        errors.name = \"You must specify a name of at least 3 characters.\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const userInfo = {\n        ...userFromBody,\n        password: await hashPassword(userFromBody.password),\n      }\n\n      const insertResult = await UsersDAO.addUser(userInfo)\n      if (!insertResult.success) {\n        errors.email = insertResult.error\n      }\n      const userFromDB = await UsersDAO.getUser(userFromBody.email)\n      if (!userFromDB) {\n        errors.general = \"Internal error, please try again later\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const user = new User(userFromDB)\n\n      res.json({\n        auth_token: user.encoded(),\n        info: user.toJson(),\n      })\n    } catch (e) {\n      res.status(500).json({ error: e })\n    }\n  }\n\n  static async login(req, res, next) {\n    try {\n      const { email, password } = req.body\n      if (!email || typeof email !== \"string\") {\n        res.status(400).json({ error: \"Bad email format, expected string.\" })\n        return\n      }\n      if (!password || typeof password !== \"string\") {\n        res.status(400).json({ error: \"Bad password format, expected string.\" })\n        return\n      }\n      let userData = await UsersDAO.getUser(email)\n      if (!userData) {\n        res.status(401).json({ error: \"Make sure your email is correct.\" })\n        return\n      }\n      const user = new User(userData)\n\n      if (!(await user.comparePassword(password))) {\n        res.status(401).json({ error: \"Make sure your password is correct.\" })\n        return\n      }\n\n      const loginResponse = await UsersDAO.loginUser(user.email, user.encoded())\n      if (!loginResponse.success) {\n        res.status(500).json({ error: loginResponse.error })\n        return\n      }\n      res.json({ auth_token: user.encoded(), info: user.toJson() })\n    } catch (e) {\n      res.status(400).json({ error: e })\n      return\n    }\n  }\n\n  static async logout(req, res) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const userObj = await User.decoded(userJwt)\n      var { error } = userObj\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n      const logoutResult = await UsersDAO.logoutUser(userObj.email)\n      var { error } = logoutResult\n      if (error) {\n        res.status(500).json({ error })\n        return\n      }\n      res.json(logoutResult)\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n\n  static async delete(req, res) {\n    try {\n      let { password } = req.body\n      if (!password || typeof password !== \"string\") {\n        res.status(400).json({ error: \"Bad password format, expected string.\" })\n        return\n      }\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const userClaim = await User.decoded(userJwt)\n      var { error } = userClaim\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n      const user = new User(await UsersDAO.getUser(userClaim.email))\n      if (!(await user.comparePassword(password))) {\n        res.status(401).json({ error: \"Make sure your password is correct.\" })\n        return\n      }\n      const deleteResult = await UsersDAO.deleteUser(userClaim.email)\n      var { error } = deleteResult\n      if (error) {\n        res.status(500).json({ error })\n        return\n      }\n      res.json(deleteResult)\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n\n  static async save(req, res) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const userFromHeader = await User.decoded(userJwt)\n      var { error } = userFromHeader\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      await UsersDAO.updatePreferences(\n        userFromHeader.email,\n        req.body.preferences,\n      )\n      const userFromDB = await UsersDAO.getUser(userFromHeader.email)\n      const updatedUser = new User(userFromDB)\n\n      res.json({\n        auth_token: updatedUser.encoded(),\n        info: updatedUser.toJson(),\n      })\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n\n  // for internal use only\n  static async createAdminUser(req, res) {\n    try {\n      const userFromBody = req.body\n      let errors = {}\n      if (userFromBody && userFromBody.password.length < 8) {\n        errors.password = \"Your password must be at least 8 characters.\"\n      }\n      if (userFromBody && userFromBody.name.length < 3) {\n        errors.name = \"You must specify a name of at least 3 characters.\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const userInfo = {\n        ...userFromBody,\n        password: await hashPassword(userFromBody.password),\n      }\n\n      const insertResult = await UsersDAO.addUser(userInfo)\n      if (!insertResult.success) {\n        errors.email = insertResult.error\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const makeAdminResponse = await UsersDAO.makeAdmin(userFromBody.email)\n\n      const userFromDB = await UsersDAO.getUser(userFromBody.email)\n      if (!userFromDB) {\n        errors.general = \"Internal error, please try again later\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const user = new User(userFromDB)\n      const jwt = user.encoded()\n      const loginResponse = await UsersDAO.loginUser(user.email, jwt)\n\n      res.json({\n        auth_token: jwt,\n        info: user.toJson(),\n      })\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1655825402879},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\users.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _express = require(\"express\");\n\nvar _users = _interopRequireDefault(require(\"./users.controller\"));\n\nvar _comments = _interopRequireDefault(require(\"./comments.controller\"));\n\nvar router = new _express.Router(); // associate put, delete, and get(id)\n\nrouter.route(\"/register\").post(_users[\"default\"].register);\nrouter.route(\"/login\").post(_users[\"default\"].login);\nrouter.route(\"/logout\").post(_users[\"default\"].logout);\nrouter.route(\"/delete\")[\"delete\"](_users[\"default\"][\"delete\"]);\nrouter.route(\"/update-preferences\").put(_users[\"default\"].save);\nrouter.route(\"/comment-report\").get(_comments[\"default\"].apiCommentReport);\nrouter.route(\"/make-admin\").post(_users[\"default\"].createAdminUser);\nvar _default = router;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJyb3V0ZSIsInBvc3QiLCJ1c2Vyc0N0cmwiLCJyZWdpc3RlciIsImxvZ2luIiwibG9nb3V0IiwicHV0Iiwic2F2ZSIsImdldCIsImNvbW1lbnRzQ3RybCIsImFwaUNvbW1lbnRSZXBvcnQiLCJjcmVhdGVBZG1pblVzZXIiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcMzM2MTZcXE9uZURyaXZlXFxCdXJlYXVcXG1mbGl4LWpzXFxzcmNcXGFwaVxcIiwic291cmNlcyI6WyJ1c2Vycy5yb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiXG5pbXBvcnQgdXNlcnNDdHJsIGZyb20gXCIuL3VzZXJzLmNvbnRyb2xsZXJcIlxuaW1wb3J0IGNvbW1lbnRzQ3RybCBmcm9tIFwiLi9jb21tZW50cy5jb250cm9sbGVyXCJcblxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpXG5cbi8vIGFzc29jaWF0ZSBwdXQsIGRlbGV0ZSwgYW5kIGdldChpZClcbnJvdXRlci5yb3V0ZShcIi9yZWdpc3RlclwiKS5wb3N0KHVzZXJzQ3RybC5yZWdpc3RlcilcbnJvdXRlci5yb3V0ZShcIi9sb2dpblwiKS5wb3N0KHVzZXJzQ3RybC5sb2dpbilcbnJvdXRlci5yb3V0ZShcIi9sb2dvdXRcIikucG9zdCh1c2Vyc0N0cmwubG9nb3V0KVxucm91dGVyLnJvdXRlKFwiL2RlbGV0ZVwiKS5kZWxldGUodXNlcnNDdHJsLmRlbGV0ZSlcbnJvdXRlci5yb3V0ZShcIi91cGRhdGUtcHJlZmVyZW5jZXNcIikucHV0KHVzZXJzQ3RybC5zYXZlKVxucm91dGVyLnJvdXRlKFwiL2NvbW1lbnQtcmVwb3J0XCIpLmdldChjb21tZW50c0N0cmwuYXBpQ29tbWVudFJlcG9ydClcbnJvdXRlci5yb3V0ZShcIi9tYWtlLWFkbWluXCIpLnBvc3QodXNlcnNDdHJsLmNyZWF0ZUFkbWluVXNlcilcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUVBLElBQU1BLE1BQU0sR0FBRyxJQUFJQyxlQUFKLEVBQWYsQyxDQUVBOztBQUNBRCxNQUFNLENBQUNFLEtBQVAsQ0FBYSxXQUFiLEVBQTBCQyxJQUExQixDQUErQkMsaUJBQUEsQ0FBVUMsUUFBekM7QUFDQUwsTUFBTSxDQUFDRSxLQUFQLENBQWEsUUFBYixFQUF1QkMsSUFBdkIsQ0FBNEJDLGlCQUFBLENBQVVFLEtBQXRDO0FBQ0FOLE1BQU0sQ0FBQ0UsS0FBUCxDQUFhLFNBQWIsRUFBd0JDLElBQXhCLENBQTZCQyxpQkFBQSxDQUFVRyxNQUF2QztBQUNBUCxNQUFNLENBQUNFLEtBQVAsQ0FBYSxTQUFiLFlBQStCRSxpQkFBQSxVQUEvQjtBQUNBSixNQUFNLENBQUNFLEtBQVAsQ0FBYSxxQkFBYixFQUFvQ00sR0FBcEMsQ0FBd0NKLGlCQUFBLENBQVVLLElBQWxEO0FBQ0FULE1BQU0sQ0FBQ0UsS0FBUCxDQUFhLGlCQUFiLEVBQWdDUSxHQUFoQyxDQUFvQ0Msb0JBQUEsQ0FBYUMsZ0JBQWpEO0FBQ0FaLE1BQU0sQ0FBQ0UsS0FBUCxDQUFhLGFBQWIsRUFBNEJDLElBQTVCLENBQWlDQyxpQkFBQSxDQUFVUyxlQUEzQztlQUVlYixNIn0=","map":{"version":3,"names":["router","Router","route","post","usersCtrl","register","login","logout","put","save","get","commentsCtrl","apiCommentReport","createAdminUser"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\api\\","sources":["users.route.js"],"sourcesContent":["import { Router } from \"express\"\nimport usersCtrl from \"./users.controller\"\nimport commentsCtrl from \"./comments.controller\"\n\nconst router = new Router()\n\n// associate put, delete, and get(id)\nrouter.route(\"/register\").post(usersCtrl.register)\nrouter.route(\"/login\").post(usersCtrl.login)\nrouter.route(\"/logout\").post(usersCtrl.logout)\nrouter.route(\"/delete\").delete(usersCtrl.delete)\nrouter.route(\"/update-preferences\").put(usersCtrl.save)\nrouter.route(\"/comment-report\").get(commentsCtrl.apiCommentReport)\nrouter.route(\"/make-admin\").post(usersCtrl.createAdminUser)\n\nexport default router\n"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,MAAM,GAAG,IAAIC,eAAJ,EAAf,C,CAEA;;AACAD,MAAM,CAACE,KAAP,CAAa,WAAb,EAA0BC,IAA1B,CAA+BC,iBAAA,CAAUC,QAAzC;AACAL,MAAM,CAACE,KAAP,CAAa,QAAb,EAAuBC,IAAvB,CAA4BC,iBAAA,CAAUE,KAAtC;AACAN,MAAM,CAACE,KAAP,CAAa,SAAb,EAAwBC,IAAxB,CAA6BC,iBAAA,CAAUG,MAAvC;AACAP,MAAM,CAACE,KAAP,CAAa,SAAb,YAA+BE,iBAAA,UAA/B;AACAJ,MAAM,CAACE,KAAP,CAAa,qBAAb,EAAoCM,GAApC,CAAwCJ,iBAAA,CAAUK,IAAlD;AACAT,MAAM,CAACE,KAAP,CAAa,iBAAb,EAAgCQ,GAAhC,CAAoCC,oBAAA,CAAaC,gBAAjD;AACAZ,MAAM,CAACE,KAAP,CAAa,aAAb,EAA4BC,IAA5B,CAAiCC,iBAAA,CAAUS,eAA3C;eAEeb,M"}},"mtime":1655825402896},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\n\nvar _movies = _interopRequireDefault(require(\"../src/api/movies.route\"));\n\nvar _users = _interopRequireDefault(require(\"../src/api/users.route\"));\n\nvar app = (0, _express[\"default\"])();\napp.use((0, _cors[\"default\"])());\nprocess.env.NODE_ENV !== \"prod\" && app.use((0, _morgan[\"default\"])(\"dev\"));\napp.use(_bodyParser[\"default\"].json());\napp.use(_bodyParser[\"default\"].urlencoded({\n  extended: true\n})); // Register api routes\n\napp.use(\"/api/v1/movies\", _movies[\"default\"]);\napp.use(\"/api/v1/user\", _users[\"default\"]);\napp.use(\"/status\", _express[\"default\"][\"static\"](\"build\"));\napp.use(\"/\", _express[\"default\"][\"static\"](\"build\"));\napp.use(\"*\", function (req, res) {\n  return res.status(404).json({\n    error: \"not found\"\n  });\n});\nvar _default = app;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHAiLCJleHByZXNzIiwidXNlIiwiY29ycyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsIm1vcmdhbiIsImJvZHlQYXJzZXIiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwibW92aWVzIiwidXNlcnMiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFwzMzYxNlxcT25lRHJpdmVcXEJ1cmVhdVxcbWZsaXgtanNcXHNyY1xcIiwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIlxuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSBcImJvZHktcGFyc2VyXCJcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCJcbmltcG9ydCBtb3JnYW4gZnJvbSBcIm1vcmdhblwiXG5pbXBvcnQgbW92aWVzIGZyb20gXCIuLi9zcmMvYXBpL21vdmllcy5yb3V0ZVwiXG5pbXBvcnQgdXNlcnMgZnJvbSBcIi4uL3NyYy9hcGkvdXNlcnMucm91dGVcIlxuXG5jb25zdCBhcHAgPSBleHByZXNzKClcblxuYXBwLnVzZShjb3JzKCkpXG5wcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kXCIgJiYgYXBwLnVzZShtb3JnYW4oXCJkZXZcIikpXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKVxuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSlcblxuLy8gUmVnaXN0ZXIgYXBpIHJvdXRlc1xuYXBwLnVzZShcIi9hcGkvdjEvbW92aWVzXCIsIG1vdmllcylcbmFwcC51c2UoXCIvYXBpL3YxL3VzZXJcIiwgdXNlcnMpXG5hcHAudXNlKFwiL3N0YXR1c1wiLCBleHByZXNzLnN0YXRpYyhcImJ1aWxkXCIpKVxuYXBwLnVzZShcIi9cIiwgZXhwcmVzcy5zdGF0aWMoXCJidWlsZFwiKSlcbmFwcC51c2UoXCIqXCIsIChyZXEsIHJlcykgPT4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJub3QgZm91bmRcIiB9KSlcblxuZXhwb3J0IGRlZmF1bHQgYXBwXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBLElBQU1BLEdBQUcsR0FBRyxJQUFBQyxtQkFBQSxHQUFaO0FBRUFELEdBQUcsQ0FBQ0UsR0FBSixDQUFRLElBQUFDLGdCQUFBLEdBQVI7QUFDQUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFFBQVosS0FBeUIsTUFBekIsSUFBbUNOLEdBQUcsQ0FBQ0UsR0FBSixDQUFRLElBQUFLLGtCQUFBLEVBQU8sS0FBUCxDQUFSLENBQW5DO0FBQ0FQLEdBQUcsQ0FBQ0UsR0FBSixDQUFRTSxzQkFBQSxDQUFXQyxJQUFYLEVBQVI7QUFDQVQsR0FBRyxDQUFDRSxHQUFKLENBQVFNLHNCQUFBLENBQVdFLFVBQVgsQ0FBc0I7RUFBRUMsUUFBUSxFQUFFO0FBQVosQ0FBdEIsQ0FBUixFLENBRUE7O0FBQ0FYLEdBQUcsQ0FBQ0UsR0FBSixDQUFRLGdCQUFSLEVBQTBCVSxrQkFBMUI7QUFDQVosR0FBRyxDQUFDRSxHQUFKLENBQVEsY0FBUixFQUF3QlcsaUJBQXhCO0FBQ0FiLEdBQUcsQ0FBQ0UsR0FBSixDQUFRLFNBQVIsRUFBbUJELG1CQUFBLFdBQWUsT0FBZixDQUFuQjtBQUNBRCxHQUFHLENBQUNFLEdBQUosQ0FBUSxHQUFSLEVBQWFELG1CQUFBLFdBQWUsT0FBZixDQUFiO0FBQ0FELEdBQUcsQ0FBQ0UsR0FBSixDQUFRLEdBQVIsRUFBYSxVQUFDWSxHQUFELEVBQU1DLEdBQU47RUFBQSxPQUFjQSxHQUFHLENBQUNDLE1BQUosQ0FBVyxHQUFYLEVBQWdCUCxJQUFoQixDQUFxQjtJQUFFUSxLQUFLLEVBQUU7RUFBVCxDQUFyQixDQUFkO0FBQUEsQ0FBYjtlQUVlakIsRyJ9","map":{"version":3,"names":["app","express","use","cors","process","env","NODE_ENV","morgan","bodyParser","json","urlencoded","extended","movies","users","req","res","status","error"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\","sources":["server.js"],"sourcesContent":["import express from \"express\"\nimport bodyParser from \"body-parser\"\nimport cors from \"cors\"\nimport morgan from \"morgan\"\nimport movies from \"../src/api/movies.route\"\nimport users from \"../src/api/users.route\"\n\nconst app = express()\n\napp.use(cors())\nprocess.env.NODE_ENV !== \"prod\" && app.use(morgan(\"dev\"))\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({ extended: true }))\n\n// Register api routes\napp.use(\"/api/v1/movies\", movies)\napp.use(\"/api/v1/user\", users)\napp.use(\"/status\", express.static(\"build\"))\napp.use(\"/\", express.static(\"build\"))\napp.use(\"*\", (req, res) => res.status(404).json({ error: \"not found\" }))\n\nexport default app\n"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,GAAG,GAAG,IAAAC,mBAAA,GAAZ;AAEAD,GAAG,CAACE,GAAJ,CAAQ,IAAAC,gBAAA,GAAR;AACAC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,MAAzB,IAAmCN,GAAG,CAACE,GAAJ,CAAQ,IAAAK,kBAAA,EAAO,KAAP,CAAR,CAAnC;AACAP,GAAG,CAACE,GAAJ,CAAQM,sBAAA,CAAWC,IAAX,EAAR;AACAT,GAAG,CAACE,GAAJ,CAAQM,sBAAA,CAAWE,UAAX,CAAsB;EAAEC,QAAQ,EAAE;AAAZ,CAAtB,CAAR,E,CAEA;;AACAX,GAAG,CAACE,GAAJ,CAAQ,gBAAR,EAA0BU,kBAA1B;AACAZ,GAAG,CAACE,GAAJ,CAAQ,cAAR,EAAwBW,iBAAxB;AACAb,GAAG,CAACE,GAAJ,CAAQ,SAAR,EAAmBD,mBAAA,WAAe,OAAf,CAAnB;AACAD,GAAG,CAACE,GAAJ,CAAQ,GAAR,EAAaD,mBAAA,WAAe,OAAf,CAAb;AACAD,GAAG,CAACE,GAAJ,CAAQ,GAAR,EAAa,UAACY,GAAD,EAAMC,GAAN;EAAA,OAAcA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBP,IAAhB,CAAqB;IAAEQ,KAAK,EAAE;EAAT,CAArB,CAAd;AAAA,CAAb;eAEejB,G"}},"mtime":1655825402803},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\movies.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _express = require(\"express\");\n\nvar _movies = _interopRequireDefault(require(\"./movies.controller\"));\n\nvar _comments = _interopRequireDefault(require(\"./comments.controller\"));\n\nvar router = new _express.Router(); // associate put, delete, and get(id)\n\nrouter.route(\"/\").get(_movies[\"default\"].apiGetMovies);\nrouter.route(\"/search\").get(_movies[\"default\"].apiSearchMovies);\nrouter.route(\"/countries\").get(_movies[\"default\"].apiGetMoviesByCountry);\nrouter.route(\"/facet-search\").get(_movies[\"default\"].apiFacetedSearch);\nrouter.route(\"/id/:id\").get(_movies[\"default\"].apiGetMovieById);\nrouter.route(\"/config-options\").get(_movies[\"default\"].getConfig);\nrouter.route(\"/comment\").post(_comments[\"default\"].apiPostComment).put(_comments[\"default\"].apiUpdateComment)[\"delete\"](_comments[\"default\"].apiDeleteComment);\nvar _default = router;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJyb3V0ZSIsImdldCIsIk1vdmllc0N0cmwiLCJhcGlHZXRNb3ZpZXMiLCJhcGlTZWFyY2hNb3ZpZXMiLCJhcGlHZXRNb3ZpZXNCeUNvdW50cnkiLCJhcGlGYWNldGVkU2VhcmNoIiwiYXBpR2V0TW92aWVCeUlkIiwiZ2V0Q29uZmlnIiwicG9zdCIsIkNvbW1lbnRzQ3RybCIsImFwaVBvc3RDb21tZW50IiwicHV0IiwiYXBpVXBkYXRlQ29tbWVudCIsImFwaURlbGV0ZUNvbW1lbnQiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcMzM2MTZcXE9uZURyaXZlXFxCdXJlYXVcXG1mbGl4LWpzXFxzcmNcXGFwaVxcIiwic291cmNlcyI6WyJtb3ZpZXMucm91dGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIlxuaW1wb3J0IE1vdmllc0N0cmwgZnJvbSBcIi4vbW92aWVzLmNvbnRyb2xsZXJcIlxuaW1wb3J0IENvbW1lbnRzQ3RybCBmcm9tIFwiLi9jb21tZW50cy5jb250cm9sbGVyXCJcblxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpXG5cbi8vIGFzc29jaWF0ZSBwdXQsIGRlbGV0ZSwgYW5kIGdldChpZClcbnJvdXRlci5yb3V0ZShcIi9cIikuZ2V0KE1vdmllc0N0cmwuYXBpR2V0TW92aWVzKVxucm91dGVyLnJvdXRlKFwiL3NlYXJjaFwiKS5nZXQoTW92aWVzQ3RybC5hcGlTZWFyY2hNb3ZpZXMpXG5yb3V0ZXIucm91dGUoXCIvY291bnRyaWVzXCIpLmdldChNb3ZpZXNDdHJsLmFwaUdldE1vdmllc0J5Q291bnRyeSlcbnJvdXRlci5yb3V0ZShcIi9mYWNldC1zZWFyY2hcIikuZ2V0KE1vdmllc0N0cmwuYXBpRmFjZXRlZFNlYXJjaClcbnJvdXRlci5yb3V0ZShcIi9pZC86aWRcIikuZ2V0KE1vdmllc0N0cmwuYXBpR2V0TW92aWVCeUlkKVxucm91dGVyLnJvdXRlKFwiL2NvbmZpZy1vcHRpb25zXCIpLmdldChNb3ZpZXNDdHJsLmdldENvbmZpZylcblxucm91dGVyXG4gIC5yb3V0ZShcIi9jb21tZW50XCIpXG4gIC5wb3N0KENvbW1lbnRzQ3RybC5hcGlQb3N0Q29tbWVudClcbiAgLnB1dChDb21tZW50c0N0cmwuYXBpVXBkYXRlQ29tbWVudClcbiAgLmRlbGV0ZShDb21tZW50c0N0cmwuYXBpRGVsZXRlQ29tbWVudClcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUVBLElBQU1BLE1BQU0sR0FBRyxJQUFJQyxlQUFKLEVBQWYsQyxDQUVBOztBQUNBRCxNQUFNLENBQUNFLEtBQVAsQ0FBYSxHQUFiLEVBQWtCQyxHQUFsQixDQUFzQkMsa0JBQUEsQ0FBV0MsWUFBakM7QUFDQUwsTUFBTSxDQUFDRSxLQUFQLENBQWEsU0FBYixFQUF3QkMsR0FBeEIsQ0FBNEJDLGtCQUFBLENBQVdFLGVBQXZDO0FBQ0FOLE1BQU0sQ0FBQ0UsS0FBUCxDQUFhLFlBQWIsRUFBMkJDLEdBQTNCLENBQStCQyxrQkFBQSxDQUFXRyxxQkFBMUM7QUFDQVAsTUFBTSxDQUFDRSxLQUFQLENBQWEsZUFBYixFQUE4QkMsR0FBOUIsQ0FBa0NDLGtCQUFBLENBQVdJLGdCQUE3QztBQUNBUixNQUFNLENBQUNFLEtBQVAsQ0FBYSxTQUFiLEVBQXdCQyxHQUF4QixDQUE0QkMsa0JBQUEsQ0FBV0ssZUFBdkM7QUFDQVQsTUFBTSxDQUFDRSxLQUFQLENBQWEsaUJBQWIsRUFBZ0NDLEdBQWhDLENBQW9DQyxrQkFBQSxDQUFXTSxTQUEvQztBQUVBVixNQUFNLENBQ0hFLEtBREgsQ0FDUyxVQURULEVBRUdTLElBRkgsQ0FFUUMsb0JBQUEsQ0FBYUMsY0FGckIsRUFHR0MsR0FISCxDQUdPRixvQkFBQSxDQUFhRyxnQkFIcEIsWUFJVUgsb0JBQUEsQ0FBYUksZ0JBSnZCO2VBTWVoQixNIn0=","map":{"version":3,"names":["router","Router","route","get","MoviesCtrl","apiGetMovies","apiSearchMovies","apiGetMoviesByCountry","apiFacetedSearch","apiGetMovieById","getConfig","post","CommentsCtrl","apiPostComment","put","apiUpdateComment","apiDeleteComment"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\api\\","sources":["movies.route.js"],"sourcesContent":["import { Router } from \"express\"\nimport MoviesCtrl from \"./movies.controller\"\nimport CommentsCtrl from \"./comments.controller\"\n\nconst router = new Router()\n\n// associate put, delete, and get(id)\nrouter.route(\"/\").get(MoviesCtrl.apiGetMovies)\nrouter.route(\"/search\").get(MoviesCtrl.apiSearchMovies)\nrouter.route(\"/countries\").get(MoviesCtrl.apiGetMoviesByCountry)\nrouter.route(\"/facet-search\").get(MoviesCtrl.apiFacetedSearch)\nrouter.route(\"/id/:id\").get(MoviesCtrl.apiGetMovieById)\nrouter.route(\"/config-options\").get(MoviesCtrl.getConfig)\n\nrouter\n  .route(\"/comment\")\n  .post(CommentsCtrl.apiPostComment)\n  .put(CommentsCtrl.apiUpdateComment)\n  .delete(CommentsCtrl.apiDeleteComment)\n\nexport default router\n"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,MAAM,GAAG,IAAIC,eAAJ,EAAf,C,CAEA;;AACAD,MAAM,CAACE,KAAP,CAAa,GAAb,EAAkBC,GAAlB,CAAsBC,kBAAA,CAAWC,YAAjC;AACAL,MAAM,CAACE,KAAP,CAAa,SAAb,EAAwBC,GAAxB,CAA4BC,kBAAA,CAAWE,eAAvC;AACAN,MAAM,CAACE,KAAP,CAAa,YAAb,EAA2BC,GAA3B,CAA+BC,kBAAA,CAAWG,qBAA1C;AACAP,MAAM,CAACE,KAAP,CAAa,eAAb,EAA8BC,GAA9B,CAAkCC,kBAAA,CAAWI,gBAA7C;AACAR,MAAM,CAACE,KAAP,CAAa,SAAb,EAAwBC,GAAxB,CAA4BC,kBAAA,CAAWK,eAAvC;AACAT,MAAM,CAACE,KAAP,CAAa,iBAAb,EAAgCC,GAAhC,CAAoCC,kBAAA,CAAWM,SAA/C;AAEAV,MAAM,CACHE,KADH,CACS,UADT,EAEGS,IAFH,CAEQC,oBAAA,CAAaC,cAFrB,EAGGC,GAHH,CAGOF,oBAAA,CAAaG,gBAHpB,YAIUH,oBAAA,CAAaI,gBAJvB;eAMehB,M"}},"mtime":1655825402861},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\movies.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _moviesDAO = _interopRequireDefault(require(\"../dao/moviesDAO\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar MoviesController = /*#__PURE__*/function () {\n  function MoviesController() {\n    (0, _classCallCheck2[\"default\"])(this, MoviesController);\n  }\n\n  (0, _createClass2[\"default\"])(MoviesController, null, [{\n    key: \"apiGetMovies\",\n    value: function () {\n      var _apiGetMovies = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res, next) {\n        var MOVIES_PER_PAGE, _yield$MoviesDAO$getM, moviesList, totalNumMovies, response;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                MOVIES_PER_PAGE = 20;\n                _context.next = 3;\n                return _moviesDAO[\"default\"].getMovies();\n\n              case 3:\n                _yield$MoviesDAO$getM = _context.sent;\n                moviesList = _yield$MoviesDAO$getM.moviesList;\n                totalNumMovies = _yield$MoviesDAO$getM.totalNumMovies;\n                response = {\n                  movies: moviesList,\n                  page: 0,\n                  filters: {},\n                  entries_per_page: MOVIES_PER_PAGE,\n                  total_results: totalNumMovies\n                };\n                res.json(response);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function apiGetMovies(_x, _x2, _x3) {\n        return _apiGetMovies.apply(this, arguments);\n      }\n\n      return apiGetMovies;\n    }()\n  }, {\n    key: \"apiGetMoviesByCountry\",\n    value: function () {\n      var _apiGetMoviesByCountry = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res, next) {\n        var countries, countryList, moviesList, response;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                countries = req.query.countries == \"\" ? \"USA\" : req.query.countries;\n                countryList = Array.isArray(countries) ? countries : Array(countries);\n                _context2.next = 4;\n                return _moviesDAO[\"default\"].getMoviesByCountry(countryList);\n\n              case 4:\n                moviesList = _context2.sent;\n                response = {\n                  titles: moviesList\n                };\n                res.json(response);\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function apiGetMoviesByCountry(_x4, _x5, _x6) {\n        return _apiGetMoviesByCountry.apply(this, arguments);\n      }\n\n      return apiGetMoviesByCountry;\n    }()\n  }, {\n    key: \"apiGetMovieById\",\n    value: function () {\n      var _apiGetMovieById = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(req, res, next) {\n        var id, movie, updated_type;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                id = req.params.id || {};\n                _context3.next = 4;\n                return _moviesDAO[\"default\"].getMovieByID(id);\n\n              case 4:\n                movie = _context3.sent;\n\n                if (movie) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                res.status(404).json({\n                  error: \"Not found\"\n                });\n                return _context3.abrupt(\"return\");\n\n              case 8:\n                updated_type = movie.lastupdated instanceof Date ? \"Date\" : \"other\";\n                res.json({\n                  movie: movie,\n                  updated_type: updated_type\n                });\n                _context3.next = 16;\n                break;\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(\"api, \".concat(_context3.t0));\n                res.status(500).json({\n                  error: _context3.t0\n                });\n\n              case 16:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 12]]);\n      }));\n\n      function apiGetMovieById(_x7, _x8, _x9) {\n        return _apiGetMovieById.apply(this, arguments);\n      }\n\n      return apiGetMovieById;\n    }()\n  }, {\n    key: \"apiSearchMovies\",\n    value: function () {\n      var _apiSearchMovies = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res, next) {\n        var MOVIES_PER_PAGE, page, searchType, filters, _yield$MoviesDAO$getM2, moviesList, totalNumMovies, response;\n\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                MOVIES_PER_PAGE = 20;\n\n                try {\n                  page = req.query.page ? parseInt(req.query.page, 10) : 0;\n                } catch (e) {\n                  console.error(\"Got bad value for page:, \".concat(e));\n                  page = 0;\n                }\n\n                try {\n                  searchType = Object.keys(req.query)[0];\n                } catch (e) {\n                  console.error(\"No search keys specified: \".concat(e));\n                }\n\n                filters = {};\n                _context4.t0 = searchType;\n                _context4.next = _context4.t0 === \"genre\" ? 7 : _context4.t0 === \"cast\" ? 9 : _context4.t0 === \"text\" ? 11 : 13;\n                break;\n\n              case 7:\n                if (req.query.genre !== \"\") {\n                  filters.genre = req.query.genre;\n                }\n\n                return _context4.abrupt(\"break\", 13);\n\n              case 9:\n                if (req.query.cast !== \"\") {\n                  filters.cast = req.query.cast;\n                }\n\n                return _context4.abrupt(\"break\", 13);\n\n              case 11:\n                if (req.query.text !== \"\") {\n                  filters.text = req.query.text;\n                }\n\n                return _context4.abrupt(\"break\", 13);\n\n              case 13:\n                _context4.next = 15;\n                return _moviesDAO[\"default\"].getMovies({\n                  filters: filters,\n                  page: page,\n                  MOVIES_PER_PAGE: MOVIES_PER_PAGE\n                });\n\n              case 15:\n                _yield$MoviesDAO$getM2 = _context4.sent;\n                moviesList = _yield$MoviesDAO$getM2.moviesList;\n                totalNumMovies = _yield$MoviesDAO$getM2.totalNumMovies;\n                response = {\n                  movies: moviesList,\n                  page: page,\n                  filters: filters,\n                  entries_per_page: MOVIES_PER_PAGE,\n                  total_results: totalNumMovies\n                };\n                res.json(response);\n\n              case 20:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function apiSearchMovies(_x10, _x11, _x12) {\n        return _apiSearchMovies.apply(this, arguments);\n      }\n\n      return apiSearchMovies;\n    }()\n  }, {\n    key: \"apiFacetedSearch\",\n    value: function () {\n      var _apiFacetedSearch = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(req, res, next) {\n        var MOVIES_PER_PAGE, page, filters, facetedSearchResult, response;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                MOVIES_PER_PAGE = 20;\n\n                try {\n                  page = req.query.page ? parseInt(req.query.page, 10) : 0;\n                } catch (e) {\n                  console.error(\"Got bad value for page, defaulting to 0: \".concat(e));\n                  page = 0;\n                }\n\n                filters = {};\n                filters = req.query.cast !== \"\" ? {\n                  cast: new RegExp(req.query.cast, \"i\")\n                } : {\n                  cast: \"Tom Hanks\"\n                };\n                _context5.next = 6;\n                return _moviesDAO[\"default\"].facetedSearch({\n                  filters: filters,\n                  page: page,\n                  MOVIES_PER_PAGE: MOVIES_PER_PAGE\n                });\n\n              case 6:\n                facetedSearchResult = _context5.sent;\n                response = {\n                  movies: facetedSearchResult.movies,\n                  facets: {\n                    runtime: facetedSearchResult.runtime,\n                    rating: facetedSearchResult.rating\n                  },\n                  page: page,\n                  filters: filters,\n                  entries_per_page: MOVIES_PER_PAGE,\n                  total_results: facetedSearchResult.count\n                };\n                res.json(response);\n\n              case 9:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      function apiFacetedSearch(_x13, _x14, _x15) {\n        return _apiFacetedSearch.apply(this, arguments);\n      }\n\n      return apiFacetedSearch;\n    }()\n  }, {\n    key: \"getConfig\",\n    value: function () {\n      var _getConfig = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(req, res, next) {\n        var _yield$MoviesDAO$getC, poolSize, wtimeout, authInfo, response;\n\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return _moviesDAO[\"default\"].getConfiguration();\n\n              case 2:\n                _yield$MoviesDAO$getC = _context6.sent;\n                poolSize = _yield$MoviesDAO$getC.poolSize;\n                wtimeout = _yield$MoviesDAO$getC.wtimeout;\n                authInfo = _yield$MoviesDAO$getC.authInfo;\n\n                try {\n                  response = _objectSpread({\n                    pool_size: poolSize,\n                    wtimeout: wtimeout\n                  }, authInfo);\n                  res.json(response);\n                } catch (e) {\n                  res.status(500).json({\n                    error: e\n                  });\n                }\n\n              case 7:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      function getConfig(_x16, _x17, _x18) {\n        return _getConfig.apply(this, arguments);\n      }\n\n      return getConfig;\n    }()\n  }]);\n  return MoviesController;\n}();\n\nexports[\"default\"] = MoviesController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb3ZpZXNDb250cm9sbGVyIiwicmVxIiwicmVzIiwibmV4dCIsIk1PVklFU19QRVJfUEFHRSIsIk1vdmllc0RBTyIsImdldE1vdmllcyIsIm1vdmllc0xpc3QiLCJ0b3RhbE51bU1vdmllcyIsInJlc3BvbnNlIiwibW92aWVzIiwicGFnZSIsImZpbHRlcnMiLCJlbnRyaWVzX3Blcl9wYWdlIiwidG90YWxfcmVzdWx0cyIsImpzb24iLCJjb3VudHJpZXMiLCJxdWVyeSIsImNvdW50cnlMaXN0IiwiQXJyYXkiLCJpc0FycmF5IiwiZ2V0TW92aWVzQnlDb3VudHJ5IiwidGl0bGVzIiwiaWQiLCJwYXJhbXMiLCJnZXRNb3ZpZUJ5SUQiLCJtb3ZpZSIsInN0YXR1cyIsImVycm9yIiwidXBkYXRlZF90eXBlIiwibGFzdHVwZGF0ZWQiLCJEYXRlIiwiY29uc29sZSIsImxvZyIsInBhcnNlSW50IiwiZSIsInNlYXJjaFR5cGUiLCJPYmplY3QiLCJrZXlzIiwiZ2VucmUiLCJjYXN0IiwidGV4dCIsIlJlZ0V4cCIsImZhY2V0ZWRTZWFyY2giLCJmYWNldGVkU2VhcmNoUmVzdWx0IiwiZmFjZXRzIiwicnVudGltZSIsInJhdGluZyIsImNvdW50IiwiZ2V0Q29uZmlndXJhdGlvbiIsInBvb2xTaXplIiwid3RpbWVvdXQiLCJhdXRoSW5mbyIsInBvb2xfc2l6ZSJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFwzMzYxNlxcT25lRHJpdmVcXEJ1cmVhdVxcbWZsaXgtanNcXHNyY1xcYXBpXFwiLCJzb3VyY2VzIjpbIm1vdmllcy5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNb3ZpZXNEQU8gZnJvbSBcIi4uL2Rhby9tb3ZpZXNEQU9cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb3ZpZXNDb250cm9sbGVyIHtcbiAgc3RhdGljIGFzeW5jIGFwaUdldE1vdmllcyhyZXEsIHJlcywgbmV4dCkge1xuICAgIGNvbnN0IE1PVklFU19QRVJfUEFHRSA9IDIwXG4gICAgY29uc3QgeyBtb3ZpZXNMaXN0LCB0b3RhbE51bU1vdmllcyB9ID0gYXdhaXQgTW92aWVzREFPLmdldE1vdmllcygpXG4gICAgbGV0IHJlc3BvbnNlID0ge1xuICAgICAgbW92aWVzOiBtb3ZpZXNMaXN0LFxuICAgICAgcGFnZTogMCxcbiAgICAgIGZpbHRlcnM6IHt9LFxuICAgICAgZW50cmllc19wZXJfcGFnZTogTU9WSUVTX1BFUl9QQUdFLFxuICAgICAgdG90YWxfcmVzdWx0czogdG90YWxOdW1Nb3ZpZXMsXG4gICAgfVxuICAgIHJlcy5qc29uKHJlc3BvbnNlKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFwaUdldE1vdmllc0J5Q291bnRyeShyZXEsIHJlcywgbmV4dCkge1xuICAgIGxldCBjb3VudHJpZXMgPSByZXEucXVlcnkuY291bnRyaWVzID09IFwiXCIgPyBcIlVTQVwiIDogcmVxLnF1ZXJ5LmNvdW50cmllc1xuICAgIGxldCBjb3VudHJ5TGlzdCA9IEFycmF5LmlzQXJyYXkoY291bnRyaWVzKSA/IGNvdW50cmllcyA6IEFycmF5KGNvdW50cmllcylcbiAgICBsZXQgbW92aWVzTGlzdCA9IGF3YWl0IE1vdmllc0RBTy5nZXRNb3ZpZXNCeUNvdW50cnkoY291bnRyeUxpc3QpXG4gICAgbGV0IHJlc3BvbnNlID0ge1xuICAgICAgdGl0bGVzOiBtb3ZpZXNMaXN0LFxuICAgIH1cbiAgICByZXMuanNvbihyZXNwb25zZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBhcGlHZXRNb3ZpZUJ5SWQocmVxLCByZXMsIG5leHQpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IGlkID0gcmVxLnBhcmFtcy5pZCB8fCB7fVxuICAgICAgbGV0IG1vdmllID0gYXdhaXQgTW92aWVzREFPLmdldE1vdmllQnlJRChpZClcbiAgICAgIGlmICghbW92aWUpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJOb3QgZm91bmRcIiB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGxldCB1cGRhdGVkX3R5cGUgPSBtb3ZpZS5sYXN0dXBkYXRlZCBpbnN0YW5jZW9mIERhdGUgPyBcIkRhdGVcIiA6IFwib3RoZXJcIlxuICAgICAgcmVzLmpzb24oeyBtb3ZpZSwgdXBkYXRlZF90eXBlIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coYGFwaSwgJHtlfWApXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFwaVNlYXJjaE1vdmllcyhyZXEsIHJlcywgbmV4dCkge1xuICAgIGNvbnN0IE1PVklFU19QRVJfUEFHRSA9IDIwXG4gICAgbGV0IHBhZ2VcbiAgICB0cnkge1xuICAgICAgcGFnZSA9IHJlcS5xdWVyeS5wYWdlID8gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2UsIDEwKSA6IDBcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBHb3QgYmFkIHZhbHVlIGZvciBwYWdlOiwgJHtlfWApXG4gICAgICBwYWdlID0gMFxuICAgIH1cbiAgICBsZXQgc2VhcmNoVHlwZVxuICAgIHRyeSB7XG4gICAgICBzZWFyY2hUeXBlID0gT2JqZWN0LmtleXMocmVxLnF1ZXJ5KVswXVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYE5vIHNlYXJjaCBrZXlzIHNwZWNpZmllZDogJHtlfWApXG4gICAgfVxuXG4gICAgbGV0IGZpbHRlcnMgPSB7fVxuXG4gICAgc3dpdGNoIChzZWFyY2hUeXBlKSB7XG4gICAgICBjYXNlIFwiZ2VucmVcIjpcbiAgICAgICAgaWYgKHJlcS5xdWVyeS5nZW5yZSAhPT0gXCJcIikge1xuICAgICAgICAgIGZpbHRlcnMuZ2VucmUgPSByZXEucXVlcnkuZ2VucmVcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBcImNhc3RcIjpcbiAgICAgICAgaWYgKHJlcS5xdWVyeS5jYXN0ICE9PSBcIlwiKSB7XG4gICAgICAgICAgZmlsdGVycy5jYXN0ID0gcmVxLnF1ZXJ5LmNhc3RcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgaWYgKHJlcS5xdWVyeS50ZXh0ICE9PSBcIlwiKSB7XG4gICAgICAgICAgZmlsdGVycy50ZXh0ID0gcmVxLnF1ZXJ5LnRleHRcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgIC8vIG5vdGhpbmcgdG8gZG9cbiAgICB9XG5cbiAgICBjb25zdCB7IG1vdmllc0xpc3QsIHRvdGFsTnVtTW92aWVzIH0gPSBhd2FpdCBNb3ZpZXNEQU8uZ2V0TW92aWVzKHtcbiAgICAgIGZpbHRlcnMsXG4gICAgICBwYWdlLFxuICAgICAgTU9WSUVTX1BFUl9QQUdFLFxuICAgIH0pXG5cbiAgICBsZXQgcmVzcG9uc2UgPSB7XG4gICAgICBtb3ZpZXM6IG1vdmllc0xpc3QsXG4gICAgICBwYWdlOiBwYWdlLFxuICAgICAgZmlsdGVycyxcbiAgICAgIGVudHJpZXNfcGVyX3BhZ2U6IE1PVklFU19QRVJfUEFHRSxcbiAgICAgIHRvdGFsX3Jlc3VsdHM6IHRvdGFsTnVtTW92aWVzLFxuICAgIH1cblxuICAgIHJlcy5qc29uKHJlc3BvbnNlKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFwaUZhY2V0ZWRTZWFyY2gocmVxLCByZXMsIG5leHQpIHtcbiAgICBjb25zdCBNT1ZJRVNfUEVSX1BBR0UgPSAyMFxuXG4gICAgbGV0IHBhZ2VcbiAgICB0cnkge1xuICAgICAgcGFnZSA9IHJlcS5xdWVyeS5wYWdlID8gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2UsIDEwKSA6IDBcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBHb3QgYmFkIHZhbHVlIGZvciBwYWdlLCBkZWZhdWx0aW5nIHRvIDA6ICR7ZX1gKVxuICAgICAgcGFnZSA9IDBcbiAgICB9XG5cbiAgICBsZXQgZmlsdGVycyA9IHt9XG5cbiAgICBmaWx0ZXJzID1cbiAgICAgIHJlcS5xdWVyeS5jYXN0ICE9PSBcIlwiXG4gICAgICAgID8geyBjYXN0OiBuZXcgUmVnRXhwKHJlcS5xdWVyeS5jYXN0LCBcImlcIikgfVxuICAgICAgICA6IHsgY2FzdDogXCJUb20gSGFua3NcIiB9XG5cbiAgICBjb25zdCBmYWNldGVkU2VhcmNoUmVzdWx0ID0gYXdhaXQgTW92aWVzREFPLmZhY2V0ZWRTZWFyY2goe1xuICAgICAgZmlsdGVycyxcbiAgICAgIHBhZ2UsXG4gICAgICBNT1ZJRVNfUEVSX1BBR0UsXG4gICAgfSlcblxuICAgIGxldCByZXNwb25zZSA9IHtcbiAgICAgIG1vdmllczogZmFjZXRlZFNlYXJjaFJlc3VsdC5tb3ZpZXMsXG4gICAgICBmYWNldHM6IHtcbiAgICAgICAgcnVudGltZTogZmFjZXRlZFNlYXJjaFJlc3VsdC5ydW50aW1lLFxuICAgICAgICByYXRpbmc6IGZhY2V0ZWRTZWFyY2hSZXN1bHQucmF0aW5nLFxuICAgICAgfSxcbiAgICAgIHBhZ2U6IHBhZ2UsXG4gICAgICBmaWx0ZXJzLFxuICAgICAgZW50cmllc19wZXJfcGFnZTogTU9WSUVTX1BFUl9QQUdFLFxuICAgICAgdG90YWxfcmVzdWx0czogZmFjZXRlZFNlYXJjaFJlc3VsdC5jb3VudCxcbiAgICB9XG5cbiAgICByZXMuanNvbihyZXNwb25zZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRDb25maWcocmVxLCByZXMsIG5leHQpIHtcbiAgICBjb25zdCB7IHBvb2xTaXplLCB3dGltZW91dCwgYXV0aEluZm8gfSA9IGF3YWl0IE1vdmllc0RBTy5nZXRDb25maWd1cmF0aW9uKClcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0ge1xuICAgICAgICBwb29sX3NpemU6IHBvb2xTaXplLFxuICAgICAgICB3dGltZW91dCxcbiAgICAgICAgLi4uYXV0aEluZm8sXG4gICAgICB9XG4gICAgICByZXMuanNvbihyZXNwb25zZSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlIH0pXG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7O0lBRXFCQSxnQjs7Ozs7Ozs7d0dBQ25CLGlCQUEwQkMsR0FBMUIsRUFBK0JDLEdBQS9CLEVBQW9DQyxJQUFwQztRQUFBOztRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUNRQyxlQURSLEdBQzBCLEVBRDFCO2dCQUFBO2dCQUFBLE9BRStDQyxxQkFBQSxDQUFVQyxTQUFWLEVBRi9DOztjQUFBO2dCQUFBO2dCQUVVQyxVQUZWLHlCQUVVQSxVQUZWO2dCQUVzQkMsY0FGdEIseUJBRXNCQSxjQUZ0QjtnQkFHTUMsUUFITixHQUdpQjtrQkFDYkMsTUFBTSxFQUFFSCxVQURLO2tCQUViSSxJQUFJLEVBQUUsQ0FGTztrQkFHYkMsT0FBTyxFQUFFLEVBSEk7a0JBSWJDLGdCQUFnQixFQUFFVCxlQUpMO2tCQUtiVSxhQUFhLEVBQUVOO2dCQUxGLENBSGpCO2dCQVVFTixHQUFHLENBQUNhLElBQUosQ0FBU04sUUFBVDs7Y0FWRjtjQUFBO2dCQUFBO1lBQUE7VUFBQTtRQUFBO01BQUEsQzs7Ozs7Ozs7Ozs7aUhBYUEsa0JBQW1DUixHQUFuQyxFQUF3Q0MsR0FBeEMsRUFBNkNDLElBQTdDO1FBQUE7UUFBQTtVQUFBO1lBQUE7Y0FBQTtnQkFDTWEsU0FETixHQUNrQmYsR0FBRyxDQUFDZ0IsS0FBSixDQUFVRCxTQUFWLElBQXVCLEVBQXZCLEdBQTRCLEtBQTVCLEdBQW9DZixHQUFHLENBQUNnQixLQUFKLENBQVVELFNBRGhFO2dCQUVNRSxXQUZOLEdBRW9CQyxLQUFLLENBQUNDLE9BQU4sQ0FBY0osU0FBZCxJQUEyQkEsU0FBM0IsR0FBdUNHLEtBQUssQ0FBQ0gsU0FBRCxDQUZoRTtnQkFBQTtnQkFBQSxPQUd5QlgscUJBQUEsQ0FBVWdCLGtCQUFWLENBQTZCSCxXQUE3QixDQUh6Qjs7Y0FBQTtnQkFHTVgsVUFITjtnQkFJTUUsUUFK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","map":{"version":3,"names":["MoviesController","req","res","next","MOVIES_PER_PAGE","MoviesDAO","getMovies","moviesList","totalNumMovies","response","movies","page","filters","entries_per_page","total_results","json","countries","query","countryList","Array","isArray","getMoviesByCountry","titles","id","params","getMovieByID","movie","status","error","updated_type","lastupdated","Date","console","log","parseInt","e","searchType","Object","keys","genre","cast","text","RegExp","facetedSearch","facetedSearchResult","facets","runtime","rating","count","getConfiguration","poolSize","wtimeout","authInfo","pool_size"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\api\\","sources":["movies.controller.js"],"sourcesContent":["import MoviesDAO from \"../dao/moviesDAO\"\n\nexport default class MoviesController {\n  static async apiGetMovies(req, res, next) {\n    const MOVIES_PER_PAGE = 20\n    const { moviesList, totalNumMovies } = await MoviesDAO.getMovies()\n    let response = {\n      movies: moviesList,\n      page: 0,\n      filters: {},\n      entries_per_page: MOVIES_PER_PAGE,\n      total_results: totalNumMovies,\n    }\n    res.json(response)\n  }\n\n  static async apiGetMoviesByCountry(req, res, next) {\n    let countries = req.query.countries == \"\" ? \"USA\" : req.query.countries\n    let countryList = Array.isArray(countries) ? countries : Array(countries)\n    let moviesList = await MoviesDAO.getMoviesByCountry(countryList)\n    let response = {\n      titles: moviesList,\n    }\n    res.json(response)\n  }\n\n  static async apiGetMovieById(req, res, next) {\n    try {\n      let id = req.params.id || {}\n      let movie = await MoviesDAO.getMovieByID(id)\n      if (!movie) {\n        res.status(404).json({ error: \"Not found\" })\n        return\n      }\n      let updated_type = movie.lastupdated instanceof Date ? \"Date\" : \"other\"\n      res.json({ movie, updated_type })\n    } catch (e) {\n      console.log(`api, ${e}`)\n      res.status(500).json({ error: e })\n    }\n  }\n\n  static async apiSearchMovies(req, res, next) {\n    const MOVIES_PER_PAGE = 20\n    let page\n    try {\n      page = req.query.page ? parseInt(req.query.page, 10) : 0\n    } catch (e) {\n      console.error(`Got bad value for page:, ${e}`)\n      page = 0\n    }\n    let searchType\n    try {\n      searchType = Object.keys(req.query)[0]\n    } catch (e) {\n      console.error(`No search keys specified: ${e}`)\n    }\n\n    let filters = {}\n\n    switch (searchType) {\n      case \"genre\":\n        if (req.query.genre !== \"\") {\n          filters.genre = req.query.genre\n        }\n        break\n      case \"cast\":\n        if (req.query.cast !== \"\") {\n          filters.cast = req.query.cast\n        }\n        break\n      case \"text\":\n        if (req.query.text !== \"\") {\n          filters.text = req.query.text\n        }\n        break\n      default:\n      // nothing to do\n    }\n\n    const { moviesList, totalNumMovies } = await MoviesDAO.getMovies({\n      filters,\n      page,\n      MOVIES_PER_PAGE,\n    })\n\n    let response = {\n      movies: moviesList,\n      page: page,\n      filters,\n      entries_per_page: MOVIES_PER_PAGE,\n      total_results: totalNumMovies,\n    }\n\n    res.json(response)\n  }\n\n  static async apiFacetedSearch(req, res, next) {\n    const MOVIES_PER_PAGE = 20\n\n    let page\n    try {\n      page = req.query.page ? parseInt(req.query.page, 10) : 0\n    } catch (e) {\n      console.error(`Got bad value for page, defaulting to 0: ${e}`)\n      page = 0\n    }\n\n    let filters = {}\n\n    filters =\n      req.query.cast !== \"\"\n        ? { cast: new RegExp(req.query.cast, \"i\") }\n        : { cast: \"Tom Hanks\" }\n\n    const facetedSearchResult = await MoviesDAO.facetedSearch({\n      filters,\n      page,\n      MOVIES_PER_PAGE,\n    })\n\n    let response = {\n      movies: facetedSearchResult.movies,\n      facets: {\n        runtime: facetedSearchResult.runtime,\n        rating: facetedSearchResult.rating,\n      },\n      page: page,\n      filters,\n      entries_per_page: MOVIES_PER_PAGE,\n      total_results: facetedSearchResult.count,\n    }\n\n    res.json(response)\n  }\n\n  static async getConfig(req, res, next) {\n    const { poolSize, wtimeout, authInfo } = await MoviesDAO.getConfiguration()\n    try {\n      let response = {\n        pool_size: poolSize,\n        wtimeout,\n        ...authInfo,\n      }\n      res.json(response)\n    } catch (e) {\n      res.status(500).json({ error: e })\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1655825402844},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\dao\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\dao\\\\moviesDAO.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _bson = require(\"bson\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar movies;\nvar mflix;\nvar DEFAULT_SORT = [[\"tomatoes.viewer.numReviews\", -1]];\n\nvar MoviesDAO = /*#__PURE__*/function () {\n  function MoviesDAO() {\n    (0, _classCallCheck2[\"default\"])(this, MoviesDAO);\n  }\n\n  (0, _createClass2[\"default\"])(MoviesDAO, null, [{\n    key: \"injectDB\",\n    value: function () {\n      var _injectDB = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(conn) {\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!movies) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.prev = 2;\n                _context.next = 5;\n                return conn.db(process.env.MFLIX_NS);\n\n              case 5:\n                mflix = _context.sent;\n                _context.next = 8;\n                return conn.db(process.env.MFLIX_NS).collection(\"movies\");\n\n              case 8:\n                movies = _context.sent;\n                this.movies = movies; // this is only for testing\n\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Unable to establish a collection handle in moviesDAO: \".concat(_context.t0));\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 12]]);\n      }));\n\n      function injectDB(_x) {\n        return _injectDB.apply(this, arguments);\n      }\n\n      return injectDB;\n    }()\n    /**\n     * Retrieves the connection pool size, write concern and user roles on the\n     * current client.\n     * @returns {Promise<ConfigurationResult>} An object with configuration details.\n     */\n\n  }, {\n    key: \"getConfiguration\",\n    value: function () {\n      var _getConfiguration = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var roleInfo, authInfo, _movies$s$db$serverCo, poolSize, wtimeout, response;\n\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return mflix.command({\n                  connectionStatus: 1\n                });\n\n              case 2:\n                roleInfo = _context2.sent;\n                authInfo = roleInfo.authInfo.authenticatedUserRoles[0];\n                _movies$s$db$serverCo = movies.s.db.serverConfig.s.options, poolSize = _movies$s$db$serverCo.poolSize, wtimeout = _movies$s$db$serverCo.wtimeout;\n                response = {\n                  poolSize: poolSize,\n                  wtimeout: wtimeout,\n                  authInfo: authInfo\n                };\n                return _context2.abrupt(\"return\", response);\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getConfiguration() {\n        return _getConfiguration.apply(this, arguments);\n      }\n\n      return getConfiguration;\n    }()\n    /**\n     * Finds and returns movies originating from one or more countries.\n     * Returns a list of objects, each object contains a title and an _id.\n     * @param {string[]} countries - The list of countries.\n     * @returns {Promise<CountryResult>} A promise that will resolve to a list of CountryResults.\n     */\n\n  }, {\n    key: \"getMoviesByCountry\",\n    value: function () {\n      var _getMoviesByCountry = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(countries) {\n        var cursor;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return movies.find({\n                  countries: {\n                    $in: countries\n                  }\n                }, {\n                  projection: {\n                    title: 1\n                  }\n                });\n\n              case 3:\n                cursor = _context3.sent;\n                _context3.next = 10;\n                break;\n\n              case 6:\n                _context3.prev = 6;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.error(\"Unable to issue find command, \".concat(_context3.t0));\n                return _context3.abrupt(\"return\", []);\n\n              case 10:\n                return _context3.abrupt(\"return\", cursor.toArray());\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 6]]);\n      }));\n\n      function getMoviesByCountry(_x2) {\n        return _getMoviesByCountry.apply(this, arguments);\n      }\n\n      return getMoviesByCountry;\n    }()\n    /**\n     * Finds and returns movies matching a given text in their title or description.\n     * @param {string} text - The text to match with.\n     * @returns {QueryParams} The QueryParams for text search\n     */\n\n  }, {\n    key: \"textSearchQuery\",\n    value: function textSearchQuery(text) {\n      var query = {\n        $text: {\n          $search: text\n        }\n      };\n      var meta_score = {\n        $meta: \"textScore\"\n      };\n      var sort = [[\"score\", meta_score]];\n      var project = {\n        score: meta_score\n      };\n      return {\n        query: query,\n        project: project,\n        sort: sort\n      };\n    }\n    /**\n     * Finds and returns movies including one or more cast members.\n     * @param {string[]} cast - The cast members to match with.\n     * @returns {QueryParams} The QueryParams for cast search\n     */\n\n  }, {\n    key: \"castSearchQuery\",\n    value: function castSearchQuery(cast) {\n      var searchCast = Array.isArray(cast) ? cast : cast.split(\", \");\n      var query = {\n        cast: {\n          $in: searchCast\n        }\n      };\n      var project = {};\n      var sort = DEFAULT_SORT;\n      return {\n        query: query,\n        project: project,\n        sort: sort\n      };\n    }\n    /**\n     * Finds and returns movies matching a one or more genres.\n     * @param {string[]} genre - The genres to match with.\n     * @returns {QueryParams} The QueryParams for genre search\n     */\n\n  }, {\n    key: \"genreSearchQuery\",\n    value: function genreSearchQuery(genre) {\n      /**\n      Ticket: Text and Subfield Search\n       Given an array of one or more genres, construct a query that searches\n      MongoDB for movies with that genre.\n      */\n      var searchGenre = Array.isArray(genre) ? genre : genre.split(\", \"); // TODO Ticket: Text and Subfield Search\n      // Construct a query that will search for the chosen genre.\n\n      var query = {\n        genres: {\n          $in: searchGenre\n        }\n      };\n      var project = {};\n      var sort = DEFAULT_SORT;\n      return {\n        query: query,\n        project: project,\n        sort: sort\n      };\n    }\n    /**\n     *\n     * @param {Object} filters - The search parameter to use in the query. Comes\n     * in the form of `{cast: { $in: [...castMembers]}}`\n     * @param {number} page - The page of movies to retrieve.\n     * @param {number} moviesPerPage - The number of movies to display per page.\n     * @returns {FacetedSearchReturn} FacetedSearchReturn\n     */\n\n  }, {\n    key: \"facetedSearch\",\n    value: function () {\n      var _facetedSearch = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4() {\n        var _ref,\n            _ref$filters,\n            filters,\n            _ref$page,\n            page,\n            _ref$moviesPerPage,\n            moviesPerPage,\n            matchStage,\n            sortStage,\n            countingPipeline,\n            skipStage,\n            limitStage,\n            facetStage,\n            queryPipeline,\n            results,\n            count,\n            _args4 = arguments;\n\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _ref = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : {}, _ref$filters = _ref.filters, filters = _ref$filters === void 0 ? null : _ref$filters, _ref$page = _ref.page, page = _ref$page === void 0 ? 0 : _ref$page, _ref$moviesPerPage = _ref.moviesPerPage, moviesPerPage = _ref$moviesPerPage === void 0 ? 20 : _ref$moviesPerPage;\n\n                if (!(!filters || !filters.cast)) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                throw new Error(\"Must specify cast members to filter by.\");\n\n              case 3:\n                matchStage = {\n                  $match: filters\n                };\n                sortStage = {\n                  $sort: {\n                    \"tomatoes.viewer.numReviews\": -1\n                  }\n                };\n                countingPipeline = [matchStage, sortStage, {\n                  $count: \"count\"\n                }];\n                skipStage = {\n                  $skip: moviesPerPage * page\n                };\n                limitStage = {\n                  $limit: moviesPerPage\n                };\n                facetStage = {\n                  $facet: {\n                    runtime: [{\n                      $bucket: {\n                        groupBy: \"$runtime\",\n                        boundaries: [0, 60, 90, 120, 180],\n                        \"default\": \"other\",\n                        output: {\n                          count: {\n                            $sum: 1\n                          }\n                        }\n                      }\n                    }],\n                    rating: [{\n                      $bucket: {\n                        groupBy: \"$metacritic\",\n                        boundaries: [0, 50, 70, 90, 100],\n                        \"default\": \"other\",\n                        output: {\n                          count: {\n                            $sum: 1\n                          }\n                        }\n                      }\n                    }],\n                    movies: [{\n                      $addFields: {\n                        title: \"$title\"\n                      }\n                    }]\n                  }\n                };\n                /**\n                Ticket: Faceted Search\n                 Please append the skipStage, limitStage, and facetStage to the queryPipeline\n                (in that order). You can accomplish this by adding the stages directly to\n                the queryPipeline.\n                 The queryPipeline is a Javascript array, so you can use push() or concat()\n                to complete this task, but you might have to do something about `const`.\n                */\n\n                queryPipeline = [matchStage, sortStage, skipStage, limitStage, facetStage // TODO Ticket: Faceted Search\n                // Add the stages to queryPipeline in the correct order.\n                ];\n                _context4.prev = 10;\n                _context4.next = 13;\n                return movies.aggregate(queryPipeline);\n\n              case 13:\n                _context4.next = 15;\n                return _context4.sent.next();\n\n              case 15:\n                results = _context4.sent;\n                _context4.next = 18;\n                return movies.aggregate(countingPipeline);\n\n              case 18:\n                _context4.next = 20;\n                return _context4.sent.next();\n\n              case 20:\n                count = _context4.sent;\n                return _context4.abrupt(\"return\", _objectSpread(_objectSpread({}, results), count));\n\n              case 24:\n                _context4.prev = 24;\n                _context4.t0 = _context4[\"catch\"](10);\n                return _context4.abrupt(\"return\", {\n                  error: \"Results too large, be more restrictive in filter\"\n                });\n\n              case 27:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[10, 24]]);\n      }));\n\n      function facetedSearch() {\n        return _facetedSearch.apply(this, arguments);\n      }\n\n      return facetedSearch;\n    }()\n    /**\n     * Finds and returns movies by country.\n     * Returns a list of objects, each object contains a title and an _id.\n     * @param {Object} filters - The search parameters to use in the query.\n     * @param {number} page - The page of movies to retrieve.\n     * @param {number} moviesPerPage - The number of movies to display per page.\n     * @returns {GetMoviesResult} An object with movie results and total results\n     * that would match this query\n     */\n\n  }, {\n    key: \"getMovies\",\n    value: function () {\n      var _getMovies = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n        var _ref2,\n            _ref2$filters,\n            filters,\n            _ref2$page,\n            page,\n            _ref2$moviesPerPage,\n            moviesPerPage,\n            queryParams,\n            _queryParams,\n            _queryParams$query,\n            query,\n            _queryParams$project,\n            project,\n            _queryParams$sort,\n            sort,\n            cursor,\n            displayCursor,\n            moviesList,\n            totalNumMovies,\n            _args5 = arguments;\n\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _ref2 = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {}, _ref2$filters = _ref2.filters, filters = _ref2$filters === void 0 ? null : _ref2$filters, _ref2$page = _ref2.page, page = _ref2$page === void 0 ? 0 : _ref2$page, _ref2$moviesPerPage = _ref2.moviesPerPage, moviesPerPage = _ref2$moviesPerPage === void 0 ? 20 : _ref2$moviesPerPage;\n                queryParams = {};\n\n                if (filters) {\n                  if (\"text\" in filters) {\n                    queryParams = this.textSearchQuery(filters[\"text\"]);\n                  } else if (\"cast\" in filters) {\n                    queryParams = this.castSearchQuery(filters[\"cast\"]);\n                  } else if (\"genre\" in filters) {\n                    queryParams = this.genreSearchQuery(filters[\"genre\"]);\n                  }\n                }\n\n                _queryParams = queryParams, _queryParams$query = _queryParams.query, query = _queryParams$query === void 0 ? {} : _queryParams$query, _queryParams$project = _queryParams.project, project = _queryParams$project === void 0 ? {} : _queryParams$project, _queryParams$sort = _queryParams.sort, sort = _queryParams$sort === void 0 ? DEFAULT_SORT : _queryParams$sort;\n                _context5.prev = 4;\n                _context5.next = 7;\n                return movies.find(query).project(project).sort(sort);\n\n              case 7:\n                cursor = _context5.sent;\n                _context5.next = 14;\n                break;\n\n              case 10:\n                _context5.prev = 10;\n                _context5.t0 = _context5[\"catch\"](4);\n                console.error(\"Unable to issue find command, \".concat(_context5.t0));\n                return _context5.abrupt(\"return\", {\n                  moviesList: [],\n                  totalNumMovies: 0\n                });\n\n              case 14:\n                /**\n                Ticket: Paging\n                 Before this method returns back to the API, use the \"moviesPerPage\" and\n                \"page\" arguments to decide the movies to display.\n                 Paging can be implemented by using the skip() and limit() cursor methods.\n                */\n                // TODO Ticket: Paging\n                // Use the cursor to only return the movies that belong on the current page\n                displayCursor = cursor.limit(moviesPerPage).skip(moviesPerPage * page);\n                _context5.prev = 15;\n                _context5.next = 18;\n                return displayCursor.toArray();\n\n              case 18:\n                moviesList = _context5.sent;\n\n                if (!(page === 0)) {\n                  _context5.next = 25;\n                  break;\n                }\n\n                _context5.next = 22;\n                return movies.countDocuments(query);\n\n              case 22:\n                _context5.t1 = _context5.sent;\n                _context5.next = 26;\n                break;\n\n              case 25:\n                _context5.t1 = 0;\n\n              case 26:\n                totalNumMovies = _context5.t1;\n                return _context5.abrupt(\"return\", {\n                  moviesList: moviesList,\n                  totalNumMovies: totalNumMovies\n                });\n\n              case 30:\n                _context5.prev = 30;\n                _context5.t2 = _context5[\"catch\"](15);\n                console.error(\"Unable to convert cursor to array or problem counting documents, \".concat(_context5.t2));\n                return _context5.abrupt(\"return\", {\n                  moviesList: [],\n                  totalNumMovies: 0\n                });\n\n              case 34:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[4, 10], [15, 30]]);\n      }));\n\n      function getMovies() {\n        return _getMovies.apply(this, arguments);\n      }\n\n      return getMovies;\n    }()\n    /**\n     * Gets a movie by its id\n     * @param {string} id - The desired movie id, the _id in Mongo\n     * @returns {MflixMovie | null} Returns either a single movie or nothing\n     */\n\n  }, {\n    key: \"getMovieByID\",\n    value: function () {\n      var _getMovieByID = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(id) {\n        var pipeline;\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n\n                /**\n                Ticket: Get Comments\n                 Given a movie ID, build an Aggregation Pipeline to retrieve the comments\n                matching that movie's ID.\n                 The $match stage is already completed. You will need to add a $lookup\n                stage that searches the `comments` collection for the correct comments.\n                */\n                // TODO Ticket: Get Comments\n                // Implement the required pipeline.\n                pipeline = [{\n                  $match: {\n                    _id: (0, _bson.ObjectId)(id)\n                  }\n                }, {\n                  $lookup: {\n                    from: \"comments\",\n                    \"let\": {\n                      id: \"$_id\"\n                    },\n                    pipeline: [{\n                      $match: {\n                        $expr: {\n                          $eq: [\"$movie_id\", \"$$id\"]\n                        }\n                      }\n                    }, {\n                      $sort: {\n                        date: -1\n                      }\n                    }],\n                    as: \"comments\"\n                  }\n                }];\n                _context6.next = 4;\n                return movies.aggregate(pipeline).next();\n\n              case 4:\n                return _context6.abrupt(\"return\", _context6.sent);\n\n              case 7:\n                _context6.prev = 7;\n                _context6.t0 = _context6[\"catch\"](0);\n\n                /**\n                Ticket: Error Handling\n                 Handle the error that occurs when an invalid ID is passed to this method.\n                When this specific error is thrown, the method should return `null`.\n                */\n                // TODO Ticket: Error Handling\n                // Catch the InvalidId error by string matching, and then handle it.\n                console.error(\"Something went wrong in getMovieByID: \".concat(_context6.t0));\n                console.log(_context6.t0.toString());\n                return _context6.abrupt(\"return\", null);\n\n              case 12:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 7]]);\n      }));\n\n      function getMovieByID(_x3) {\n        return _getMovieByID.apply(this, arguments);\n      }\n\n      return getMovieByID;\n    }()\n  }]);\n  return MoviesDAO;\n}();\n/**\n * This is a parsed query, sort, and project bundle.\n * @typedef QueryParams\n * @property {Object} query - The specified query, transformed accordingly\n * @property {any[]} sort - The specified sort\n * @property {Object} project - The specified project, if any\n */\n\n/**\n * Represents a single country result\n * @typedef CountryResult\n * @property {string} ObjectID - The ObjectID of the movie\n * @property {string} title - The title of the movie\n */\n\n/**\n * A Movie from mflix\n * @typedef MflixMovie\n * @property {string} _id\n * @property {string} title\n * @property {number} year\n * @property {number} runtime\n * @property {Date} released\n * @property {string[]} cast\n * @property {number} metacriticd\n * @property {string} poster\n * @property {string} plot\n * @property {string} fullplot\n * @property {string|Date} lastupdated\n * @property {string} type\n * @property {string[]} languages\n * @property {string[]} directors\n * @property {string[]} writers\n * @property {IMDB} imdb\n * @property {string[]} countries\n * @property {string[]} rated\n * @property {string[]} genres\n * @property {string[]} comments\n */\n\n/**\n * IMDB subdocument\n * @typedef IMDB\n * @property {number} rating\n * @property {number} votes\n * @property {number} id\n */\n\n/**\n * Result set for getMovies method\n * @typedef GetMoviesResult\n * @property {MflixMovies[]} moviesList\n * @property {number} totalNumResults\n */\n\n/**\n * Faceted Search Return\n *\n * The type of return from faceted search. It will be a single document with\n * 3 fields: rating, runtime, and movies.\n * @typedef FacetedSearchReturn\n * @property {object} rating\n * @property {object} runtime\n * @property {MFlixMovie[]}movies\n */\n\n\nexports[\"default\"] = MoviesDAO;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb3ZpZXMiLCJtZmxpeCIsIkRFRkFVTFRfU09SVCIsIk1vdmllc0RBTyIsImNvbm4iLCJkYiIsInByb2Nlc3MiLCJlbnYiLCJNRkxJWF9OUyIsImNvbGxlY3Rpb24iLCJjb25zb2xlIiwiZXJyb3IiLCJjb21tYW5kIiwiY29ubmVjdGlvblN0YXR1cyIsInJvbGVJbmZvIiwiYXV0aEluZm8iLCJhdXRoZW50aWNhdGVkVXNlclJvbGVzIiwicyIsInNlcnZlckNvbmZpZyIsIm9wdGlvbnMiLCJwb29sU2l6ZSIsInd0aW1lb3V0IiwicmVzcG9uc2UiLCJjb3VudHJpZXMiLCJmaW5kIiwiJGluIiwicHJvamVjdGlvbiIsInRpdGxlIiwiY3Vyc29yIiwidG9BcnJheSIsInRleHQiLCJxdWVyeSIsIiR0ZXh0IiwiJHNlYXJjaCIsIm1ldGFfc2NvcmUiLCIkbWV0YSIsInNvcnQiLCJwcm9qZWN0Iiwic2NvcmUiLCJjYXN0Iiwic2VhcmNoQ2FzdCIsIkFycmF5IiwiaXNBcnJheSIsInNwbGl0IiwiZ2VucmUiLCJzZWFyY2hHZW5yZSIsImdlbnJlcyIsImZpbHRlcnMiLCJwYWdlIiwibW92aWVzUGVyUGFnZSIsIkVycm9yIiwibWF0Y2hTdGFnZSIsIiRtYXRjaCIsInNvcnRTdGFnZSIsIiRzb3J0IiwiY291bnRpbmdQaXBlbGluZSIsIiRjb3VudCIsInNraXBTdGFnZSIsIiRza2lwIiwibGltaXRTdGFnZSIsIiRsaW1pdCIsImZhY2V0U3RhZ2UiLCIkZmFjZXQiLCJydW50aW1lIiwiJGJ1Y2tldCIsImdyb3VwQnkiLCJib3VuZGFyaWVzIiwib3V0cHV0IiwiY291bnQiLCIkc3VtIiwicmF0aW5nIiwiJGFkZEZpZWxkcyIsInF1ZXJ5UGlwZWxpbmUiLCJhZ2dyZWdhdGUiLCJuZXh0IiwicmVzdWx0cyIsInF1ZXJ5UGFyYW1zIiwidGV4dFNlYXJjaFF1ZXJ5IiwiY2FzdFNlYXJjaFF1ZXJ5IiwiZ2VucmVTZWFyY2hRdWVyeSIsIm1vdmllc0xpc3QiLCJ0b3RhbE51bU1vdmllcyIsImRpc3BsYXlDdXJzb3IiLCJsaW1pdCIsInNraXAiLCJjb3VudERvY3VtZW50cyIsImlkIiwicGlwZWxpbmUiLCJfaWQiLCJPYmplY3RJZCIsIiRsb29rdXAiLCJmcm9tIiwiJGV4cHIiLCIkZXEiLCJkYXRlIiwiYXMiLCJsb2ciLCJ0b1N0cmluZyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFwzMzYxNlxcT25lRHJpdmVcXEJ1cmVhdVxcbWZsaXgtanNcXHNyY1xcZGFvXFwiLCJzb3VyY2VzIjpbIm1vdmllc0RBTy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYmplY3RJZCB9IGZyb20gXCJic29uXCJcblxubGV0IG1vdmllc1xubGV0IG1mbGl4XG5jb25zdCBERUZBVUxUX1NPUlQgPSBbW1widG9tYXRvZXMudmlld2VyLm51bVJldmlld3NcIiwgLTFdXVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb3ZpZXNEQU8ge1xuICBzdGF0aWMgYXN5bmMgaW5qZWN0REIoY29ubikge1xuICAgIGlmIChtb3ZpZXMpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0cnkge1xuICAgICAgbWZsaXggPSBhd2FpdCBjb25uLmRiKHByb2Nlc3MuZW52Lk1GTElYX05TKVxuICAgICAgbW92aWVzID0gYXdhaXQgY29ubi5kYihwcm9jZXNzLmVudi5NRkxJWF9OUykuY29sbGVjdGlvbihcIm1vdmllc1wiKVxuICAgICAgdGhpcy5tb3ZpZXMgPSBtb3ZpZXMgLy8gdGhpcyBpcyBvbmx5IGZvciB0ZXN0aW5nXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYFVuYWJsZSB0byBlc3RhYmxpc2ggYSBjb2xsZWN0aW9uIGhhbmRsZSBpbiBtb3ZpZXNEQU86ICR7ZX1gLFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIGNvbm5lY3Rpb24gcG9vbCBzaXplLCB3cml0ZSBjb25jZXJuIGFuZCB1c2VyIHJvbGVzIG9uIHRoZVxuICAgKiBjdXJyZW50IGNsaWVudC5cbiAgICogQHJldHVybnMge1Byb21pc2U8Q29uZmlndXJhdGlvblJlc3VsdD59IEFuIG9iamVjdCB3aXRoIGNvbmZpZ3VyYXRpb24gZGV0YWlscy5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRDb25maWd1cmF0aW9uKCkge1xuICAgIGNvbnN0IHJvbGVJbmZvID0gYXdhaXQgbWZsaXguY29tbWFuZCh7IGNvbm5lY3Rpb25TdGF0dXM6IDEgfSlcbiAgICBjb25zdCBhdXRoSW5mbyA9IHJvbGVJbmZvLmF1dGhJbmZvLmF1dGhlbnRpY2F0ZWRVc2VyUm9sZXNbMF1cbiAgICBjb25zdCB7IHBvb2xTaXplLCB3dGltZW91dCB9ID0gbW92aWVzLnMuZGIuc2VydmVyQ29uZmlnLnMub3B0aW9uc1xuICAgIGxldCByZXNwb25zZSA9IHtcbiAgICAgIHBvb2xTaXplLFxuICAgICAgd3RpbWVvdXQsXG4gICAgICBhdXRoSW5mbyxcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH1cblxuICAvKipcbiAgICogRmluZHMgYW5kIHJldHVybnMgbW92aWVzIG9yaWdpbmF0aW5nIGZyb20gb25lIG9yIG1vcmUgY291bnRyaWVzLlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBvYmplY3RzLCBlYWNoIG9iamVjdCBjb250YWlucyBhIHRpdGxlIGFuZCBhbiBfaWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IGNvdW50cmllcyAtIFRoZSBsaXN0IG9mIGNvdW50cmllcy5cbiAgICogQHJldHVybnMge1Byb21pc2U8Q291bnRyeVJlc3VsdD59IEEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSB0byBhIGxpc3Qgb2YgQ291bnRyeVJlc3VsdHMuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0TW92aWVzQnlDb3VudHJ5KGNvdW50cmllcykge1xuICAgIC8qKlxuICAgIFRpY2tldDogUHJvamVjdGlvblxuXG4gICAgV3JpdGUgYSBxdWVyeSB0aGF0IG1hdGNoZXMgbW92aWVzIHdpdGggdGhlIGNvdW50cmllcyBpbiB0aGUgXCJjb3VudHJpZXNcIlxuICAgIGxpc3QsIGJ1dCBvbmx5IHJldHVybnMgdGhlIHRpdGxlIGFuZCBfaWQgb2YgZWFjaCBtb3ZpZS5cblxuICAgIFJlbWVtYmVyIHRoYXQgaW4gTW9uZ29EQiwgdGhlICRpbiBvcGVyYXRvciBjYW4gYmUgdXNlZCB3aXRoIGEgbGlzdCB0b1xuICAgIG1hdGNoIG9uZSBvciBtb3JlIHZhbHVlcyBvZiBhIHNwZWNpZmljIGZpZWxkLlxuICAgICovXG5cbiAgICBsZXQgY3Vyc29yXG4gICAgdHJ5IHtcbiAgICAgIC8vIFRPRE8gVGlja2V0OiBQcm9qZWN0aW9uXG4gICAgICAvLyBGaW5kIG1vdmllcyBtYXRjaGluZyB0aGUgXCJjb3VudHJpZXNcIiBsaXN0LCBidXQgb25seSByZXR1cm4gdGhlIHRpdGxlXG4gICAgICAvLyBhbmQgX2lkLiBEbyBub3QgcHV0IGEgbGltaXQgaW4geW91ciBvd24gaW1wbGVtZW50YXRpb24sIHRoZSBsaW1pdFxuICAgICAgLy8gaGVyZSBpcyBvbmx5IGluY2x1ZGVkIHRvIGF2b2lkIHNlbmRpbmcgNDYwMDAgZG9jdW1lbnRzIGRvd24gdGhlXG4gICAgICAvLyB3aXJlLlxuICAgICAgY3Vyc29yID0gYXdhaXQgbW92aWVzLmZpbmQoXG4gICAgICAgIHsgY291bnRyaWVzOiB7ICRpbjogY291bnRyaWVzIH0gfSxcbiAgICAgICAgeyBwcm9qZWN0aW9uOiB7IHRpdGxlOiAxIH0gfSxcbiAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbmFibGUgdG8gaXNzdWUgZmluZCBjb21tYW5kLCAke2V9YClcbiAgICAgIHJldHVybiBbXVxuICAgIH1cblxuICAgIHJldHVybiBjdXJzb3IudG9BcnJheSgpXG4gIH1cblxuICAvKipcbiAgICogRmluZHMgYW5kIHJldHVybnMgbW92aWVzIG1hdGNoaW5nIGEgZ2l2ZW4gdGV4dCBpbiB0aGVpciB0aXRsZSBvciBkZXNjcmlwdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgdGV4dCB0byBtYXRjaCB3aXRoLlxuICAgKiBAcmV0dXJucyB7UXVlcnlQYXJhbXN9IFRoZSBRdWVyeVBhcmFtcyBmb3IgdGV4dCBzZWFyY2hcbiAgICovXG4gIHN0YXRpYyB0ZXh0U2VhcmNoUXVlcnkodGV4dCkge1xuICAgIGNvbnN0IHF1ZXJ5ID0geyAkdGV4dDogeyAkc2VhcmNoOiB0ZXh0IH0gfVxuICAgIGNvbnN0IG1ldGFfc2NvcmUgPSB7ICRtZXRhOiBcInRleHRTY29yZVwiIH1cbiAgICBjb25zdCBzb3J0ID0gW1tcInNjb3JlXCIsIG1ldGFfc2NvcmVdXVxuICAgIGNvbnN0IHByb2plY3QgPSB7IHNjb3JlOiBtZXRhX3Njb3JlIH1cblxuICAgIHJldHVybiB7IHF1ZXJ5LCBwcm9qZWN0LCBzb3J0IH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyBhbmQgcmV0dXJucyBtb3ZpZXMgaW5jbHVkaW5nIG9uZSBvciBtb3JlIGNhc3QgbWVtYmVycy5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gY2FzdCAtIFRoZSBjYXN0IG1lbWJlcnMgdG8gbWF0Y2ggd2l0aC5cbiAgICogQHJldHVybnMge1F1ZXJ5UGFyYW1zfSBUaGUgUXVlcnlQYXJhbXMgZm9yIGNhc3Qgc2VhcmNoXG4gICAqL1xuICBzdGF0aWMgY2FzdFNlYXJjaFF1ZXJ5KGNhc3QpIHtcbiAgICBjb25zdCBzZWFyY2hDYXN0ID0gQXJyYXkuaXNBcnJheShjYXN0KSA/IGNhc3QgOiBjYXN0LnNwbGl0KFwiLCBcIilcblxuICAgIGNvbnN0IHF1ZXJ5ID0geyBjYXN0OiB7ICRpbjogc2VhcmNoQ2FzdCB9IH1cbiAgICBjb25zdCBwcm9qZWN0ID0ge31cbiAgICBjb25zdCBzb3J0ID0gREVGQVVMVF9TT1JUXG5cbiAgICByZXR1cm4geyBxdWVyeSwgcHJvamVjdCwgc29ydCB9XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgYW5kIHJldHVybnMgbW92aWVzIG1hdGNoaW5nIGEgb25lIG9yIG1vcmUgZ2VucmVzLlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBnZW5yZSAtIFRoZSBnZW5yZXMgdG8gbWF0Y2ggd2l0aC5cbiAgICogQHJldHVybnMge1F1ZXJ5UGFyYW1zfSBUaGUgUXVlcnlQYXJhbXMgZm9yIGdlbnJlIHNlYXJjaFxuICAgKi9cbiAgc3RhdGljIGdlbnJlU2VhcmNoUXVlcnkoZ2VucmUpIHtcbiAgICAvKipcbiAgICBUaWNrZXQ6IFRleHQgYW5kIFN1YmZpZWxkIFNlYXJjaFxuXG4gICAgR2l2ZW4gYW4gYXJyYXkgb2Ygb25lIG9yIG1vcmUgZ2VucmVzLCBjb25zdHJ1Y3QgYSBxdWVyeSB0aGF0IHNlYXJjaGVzXG4gICAgTW9uZ29EQiBmb3IgbW92aWVzIHdpdGggdGhhdCBnZW5yZS5cbiAgICAqL1xuXG4gICAgY29uc3Qgc2VhcmNoR2VucmUgPSBBcnJheS5pc0FycmF5KGdlbnJlKSA/IGdlbnJlIDogZ2VucmUuc3BsaXQoXCIsIFwiKVxuXG4gICAgLy8gVE9ETyBUaWNrZXQ6IFRleHQgYW5kIFN1YmZpZWxkIFNlYXJjaFxuICAgIC8vIENvbnN0cnVjdCBhIHF1ZXJ5IHRoYXQgd2lsbCBzZWFyY2ggZm9yIHRoZSBjaG9zZW4gZ2VucmUuXG4gICAgY29uc3QgcXVlcnkgPSB7IGdlbnJlczogeyAkaW46IHNlYXJjaEdlbnJlIH0gfVxuICAgIGNvbnN0IHByb2plY3QgPSB7fVxuICAgIGNvbnN0IHNvcnQgPSBERUZBVUxUX1NPUlRcblxuICAgIHJldHVybiB7IHF1ZXJ5LCBwcm9qZWN0LCBzb3J0IH1cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZmlsdGVycyAtIFRoZSBzZWFyY2ggcGFyYW1ldGVyIHRvIHVzZSBpbiB0aGUgcXVlcnkuIENvbWVzXG4gICAqIGluIHRoZSBmb3JtIG9mIGB7Y2FzdDogeyAkaW46IFsuLi5jYXN0TWVtYmVyc119fWBcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2UgLSBUaGUgcGFnZSBvZiBtb3ZpZXMgdG8gcmV0cmlldmUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtb3ZpZXNQZXJQYWdlIC0gVGhlIG51bWJlciBvZiBtb3ZpZXMgdG8gZGlzcGxheSBwZXIgcGFnZS5cbiAgICogQHJldHVybnMge0ZhY2V0ZWRTZWFyY2hSZXR1cm59IEZhY2V0ZWRTZWFyY2hSZXR1cm5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBmYWNldGVkU2VhcmNoKHtcbiAgICBmaWx0ZXJzID0gbnVsbCxcbiAgICBwYWdlID0gMCxcbiAgICBtb3ZpZXNQZXJQYWdlID0gMjAsXG4gIH0gPSB7fSkge1xuICAgIGlmICghZmlsdGVycyB8fCAhZmlsdGVycy5jYXN0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHNwZWNpZnkgY2FzdCBtZW1iZXJzIHRvIGZpbHRlciBieS5cIilcbiAgICB9XG4gICAgY29uc3QgbWF0Y2hTdGFnZSA9IHsgJG1hdGNoOiBmaWx0ZXJzIH1cbiAgICBjb25zdCBzb3J0U3RhZ2UgPSB7ICRzb3J0OiB7IFwidG9tYXRvZXMudmlld2VyLm51bVJldmlld3NcIjogLTEgfSB9XG4gICAgY29uc3QgY291bnRpbmdQaXBlbGluZSA9IFttYXRjaFN0YWdlLCBzb3J0U3RhZ2UsIHsgJGNvdW50OiBcImNvdW50XCIgfV1cbiAgICBjb25zdCBza2lwU3RhZ2UgPSB7ICRza2lwOiBtb3ZpZXNQZXJQYWdlICogcGFnZSB9XG4gICAgY29uc3QgbGltaXRTdGFnZSA9IHsgJGxpbWl0OiBtb3ZpZXNQZXJQYWdlIH1cbiAgICBjb25zdCBmYWNldFN0YWdlID0ge1xuICAgICAgJGZhY2V0OiB7XG4gICAgICAgIHJ1bnRpbWU6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICAkYnVja2V0OiB7XG4gICAgICAgICAgICAgIGdyb3VwQnk6IFwiJHJ1bnRpbWVcIixcbiAgICAgICAgICAgICAgYm91bmRhcmllczogWzAsIDYwLCA5MCwgMTIwLCAxODBdLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgICAgIGNvdW50OiB7ICRzdW06IDEgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgcmF0aW5nOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgJGJ1Y2tldDoge1xuICAgICAgICAgICAgICBncm91cEJ5OiBcIiRtZXRhY3JpdGljXCIsXG4gICAgICAgICAgICAgIGJvdW5kYXJpZXM6IFswLCA1MCwgNzAsIDkwLCAxMDBdLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgICAgIGNvdW50OiB7ICRzdW06IDEgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgbW92aWVzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgJGFkZEZpZWxkczoge1xuICAgICAgICAgICAgICB0aXRsZTogXCIkdGl0bGVcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfVxuXG4gICAgLyoqXG4gICAgVGlja2V0OiBGYWNldGVkIFNlYXJjaFxuXG4gICAgUGxlYXNlIGFwcGVuZCB0aGUgc2tpcFN0YWdlLCBsaW1pdFN0YWdlLCBhbmQgZmFjZXRTdGFnZSB0byB0aGUgcXVlcnlQaXBlbGluZVxuICAgIChpbiB0aGF0IG9yZGVyKS4gWW91IGNhbiBhY2NvbXBsaXNoIHRoaXMgYnkgYWRkaW5nIHRoZSBzdGFnZXMgZGlyZWN0bHkgdG9cbiAgICB0aGUgcXVlcnlQaXBlbGluZS5cblxuICAgIFRoZSBxdWVyeVBpcGVsaW5lIGlzIGEgSmF2YXNjcmlwdCBhcnJheSwgc28geW91IGNhbiB1c2UgcHVzaCgpIG9yIGNvbmNhdCgpXG4gICAgdG8gY29tcGxldGUgdGhpcyB0YXNrLCBidXQgeW91IG1pZ2h0IGhhdmUgdG8gZG8gc29tZXRoaW5nIGFib3V0IGBjb25zdGAuXG4gICAgKi9cblxuICAgIGNvbnN0IHF1ZXJ5UGlwZWxpbmUgPSBbXG4gICAgICBtYXRjaFN0YWdlLFxuICAgICAgc29ydFN0YWdlLFxuICAgICAgc2tpcFN0YWdlLFxuICAgICAgbGltaXRTdGFnZSxcbiAgICAgIGZhY2V0U3RhZ2UsXG4gICAgICAvLyBUT0RPIFRpY2tldDogRmFjZXRlZCBTZWFyY2hcbiAgICAgIC8vIEFkZCB0aGUgc3RhZ2VzIHRvIHF1ZXJ5UGlwZWxpbmUgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuXG4gICAgXVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCAoYXdhaXQgbW92aWVzLmFnZ3JlZ2F0ZShxdWVyeVBpcGVsaW5lKSkubmV4dCgpXG4gICAgICBjb25zdCBjb3VudCA9IGF3YWl0IChhd2FpdCBtb3ZpZXMuYWdncmVnYXRlKGNvdW50aW5nUGlwZWxpbmUpKS5uZXh0KClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnJlc3VsdHMsXG4gICAgICAgIC4uLmNvdW50LFxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB7IGVycm9yOiBcIlJlc3VsdHMgdG9vIGxhcmdlLCBiZSBtb3JlIHJlc3RyaWN0aXZlIGluIGZpbHRlclwiIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgYW5kIHJldHVybnMgbW92aWVzIGJ5IGNvdW50cnkuXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIG9iamVjdHMsIGVhY2ggb2JqZWN0IGNvbnRhaW5zIGEgdGl0bGUgYW5kIGFuIF9pZC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGZpbHRlcnMgLSBUaGUgc2VhcmNoIHBhcmFtZXRlcnMgdG8gdXNlIGluIHRoZSBxdWVyeS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2UgLSBUaGUgcGFnZSBvZiBtb3ZpZXMgdG8gcmV0cmlldmUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtb3ZpZXNQZXJQYWdlIC0gVGhlIG51bWJlciBvZiBtb3ZpZXMgdG8gZGlzcGxheSBwZXIgcGFnZS5cbiAgICogQHJldHVybnMge0dldE1vdmllc1Jlc3VsdH0gQW4gb2JqZWN0IHdpdGggbW92aWUgcmVzdWx0cyBhbmQgdG90YWwgcmVzdWx0c1xuICAgKiB0aGF0IHdvdWxkIG1hdGNoIHRoaXMgcXVlcnlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRNb3ZpZXMoe1xuICAgIC8vIGhlcmUncyB3aGVyZSB0aGUgZGVmYXVsdCBwYXJhbWV0ZXJzIGFyZSBzZXQgZm9yIHRoZSBnZXRNb3ZpZXMgbWV0aG9kXG4gICAgZmlsdGVycyA9IG51bGwsXG4gICAgcGFnZSA9IDAsXG4gICAgbW92aWVzUGVyUGFnZSA9IDIwLFxuICB9ID0ge30pIHtcbiAgICBsZXQgcXVlcnlQYXJhbXMgPSB7fVxuICAgIGlmIChmaWx0ZXJzKSB7XG4gICAgICBpZiAoXCJ0ZXh0XCIgaW4gZmlsdGVycykge1xuICAgICAgICBxdWVyeVBhcmFtcyA9IHRoaXMudGV4dFNlYXJjaFF1ZXJ5KGZpbHRlcnNbXCJ0ZXh0XCJdKVxuICAgICAgfSBlbHNlIGlmIChcImNhc3RcIiBpbiBmaWx0ZXJzKSB7XG4gICAgICAgIHF1ZXJ5UGFyYW1zID0gdGhpcy5jYXN0U2VhcmNoUXVlcnkoZmlsdGVyc1tcImNhc3RcIl0pXG4gICAgICB9IGVsc2UgaWYgKFwiZ2VucmVcIiBpbiBmaWx0ZXJzKSB7XG4gICAgICAgIHF1ZXJ5UGFyYW1zID0gdGhpcy5nZW5yZVNlYXJjaFF1ZXJ5KGZpbHRlcnNbXCJnZW5yZVwiXSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgeyBxdWVyeSA9IHt9LCBwcm9qZWN0ID0ge30sIHNvcnQgPSBERUZBVUxUX1NPUlQgfSA9IHF1ZXJ5UGFyYW1zXG4gICAgbGV0IGN1cnNvclxuICAgIHRyeSB7XG4gICAgICBjdXJzb3IgPSBhd2FpdCBtb3ZpZXNcbiAgICAgICAgLmZpbmQocXVlcnkpXG4gICAgICAgIC5wcm9qZWN0KHByb2plY3QpXG4gICAgICAgIC5zb3J0KHNvcnQpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIGlzc3VlIGZpbmQgY29tbWFuZCwgJHtlfWApXG4gICAgICByZXR1cm4geyBtb3ZpZXNMaXN0OiBbXSwgdG90YWxOdW1Nb3ZpZXM6IDAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgIFRpY2tldDogUGFnaW5nXG5cbiAgICBCZWZvcmUgdGhpcyBtZXRob2QgcmV0dXJucyBiYWNrIHRvIHRoZSBBUEksIHVzZSB0aGUgXCJtb3ZpZXNQZXJQYWdlXCIgYW5kXG4gICAgXCJwYWdlXCIgYXJndW1lbnRzIHRvIGRlY2lkZSB0aGUgbW92aWVzIHRvIGRpc3BsYXkuXG5cbiAgICBQYWdpbmcgY2FuIGJlIGltcGxlbWVudGVkIGJ5IHVzaW5nIHRoZSBza2lwKCkgYW5kIGxpbWl0KCkgY3Vyc29yIG1ldGhvZHMuXG4gICAgKi9cblxuICAgIC8vIFRPRE8gVGlja2V0OiBQYWdpbmdcbiAgICAvLyBVc2UgdGhlIGN1cnNvciB0byBvbmx5IHJldHVybiB0aGUgbW92aWVzIHRoYXQgYmVsb25nIG9uIHRoZSBjdXJyZW50IHBhZ2VcbiAgICBjb25zdCBkaXNwbGF5Q3Vyc29yID0gY3Vyc29yLmxpbWl0KG1vdmllc1BlclBhZ2UpLnNraXAobW92aWVzUGVyUGFnZSAqIHBhZ2UpXG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgbW92aWVzTGlzdCA9IGF3YWl0IGRpc3BsYXlDdXJzb3IudG9BcnJheSgpXG4gICAgICBjb25zdCB0b3RhbE51bU1vdmllcyA9IHBhZ2UgPT09IDAgPyBhd2FpdCBtb3ZpZXMuY291bnREb2N1bWVudHMocXVlcnkpIDogMFxuXG4gICAgICByZXR1cm4geyBtb3ZpZXNMaXN0LCB0b3RhbE51bU1vdmllcyB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYFVuYWJsZSB0byBjb252ZXJ0IGN1cnNvciB0byBhcnJheSBvciBwcm9ibGVtIGNvdW50aW5nIGRvY3VtZW50cywgJHtlfWAsXG4gICAgICApXG4gICAgICByZXR1cm4geyBtb3ZpZXNMaXN0OiBbXSwgdG90YWxOdW1Nb3ZpZXM6IDAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgbW92aWUgYnkgaXRzIGlkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBkZXNpcmVkIG1vdmllIGlkLCB0aGUgX2lkIGluIE1vbmdvXG4gICAqIEByZXR1cm5zIHtNZmxpeE1vdmllIHwgbnVsbH0gUmV0dXJucyBlaXRoZXIgYSBzaW5nbGUgbW92aWUgb3Igbm90aGluZ1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldE1vdmllQnlJRChpZCkge1xuICAgIHRyeSB7XG4gICAgICAvKipcbiAgICAgIFRpY2tldDogR2V0IENvbW1lbnRzXG5cbiAgICAgIEdpdmVuIGEgbW92aWUgSUQsIGJ1aWxkIGFuIEFnZ3JlZ2F0aW9uIFBpcGVsaW5lIHRvIHJldHJpZXZlIHRoZSBjb21tZW50c1xuICAgICAgbWF0Y2hpbmcgdGhhdCBtb3ZpZSdzIElELlxuXG4gICAgICBUaGUgJG1hdGNoIHN0YWdlIGlzIGFscmVhZHkgY29tcGxldGVkLiBZb3Ugd2lsbCBuZWVkIHRvIGFkZCBhICRsb29rdXBcbiAgICAgIHN0YWdlIHRoYXQgc2VhcmNoZXMgdGhlIGBjb21tZW50c2AgY29sbGVjdGlvbiBmb3IgdGhlIGNvcnJlY3QgY29tbWVudHMuXG4gICAgICAqL1xuXG4gICAgICAvLyBUT0RPIFRpY2tldDogR2V0IENvbW1lbnRzXG4gICAgICAvLyBJbXBsZW1lbnQgdGhlIHJlcXVpcmVkIHBpcGVsaW5lLlxuXG4gICAgICBjb25zdCBwaXBlbGluZSA9IFtcbiAgICAgICAge1xuICAgICAgICAgICRtYXRjaDoge1xuICAgICAgICAgICAgX2lkOiBPYmplY3RJZChpZCksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICRsb29rdXA6IHtcbiAgICAgICAgICAgIGZyb206IFwiY29tbWVudHNcIixcbiAgICAgICAgICAgIGxldDoge1xuICAgICAgICAgICAgICBpZDogXCIkX2lkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGlwZWxpbmU6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICRtYXRjaDoge1xuICAgICAgICAgICAgICAgICAgJGV4cHI6IHtcbiAgICAgICAgICAgICAgICAgICAgJGVxOiBbXCIkbW92aWVfaWRcIiwgXCIkJGlkXCJdLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJHNvcnQ6IHtcbiAgICAgICAgICAgICAgICAgIGRhdGU6IC0xLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYXM6IFwiY29tbWVudHNcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgXVxuICAgICAgcmV0dXJuIGF3YWl0IG1vdmllcy5hZ2dyZWdhdGUocGlwZWxpbmUpLm5leHQoKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8qKlxuICAgICAgVGlja2V0OiBFcnJvciBIYW5kbGluZ1xuXG4gICAgICBIYW5kbGUgdGhlIGVycm9yIHRoYXQgb2NjdXJzIHdoZW4gYW4gaW52YWxpZCBJRCBpcyBwYXNzZWQgdG8gdGhpcyBtZXRob2QuXG4gICAgICBXaGVuIHRoaXMgc3BlY2lmaWMgZXJyb3IgaXMgdGhyb3duLCB0aGUgbWV0aG9kIHNob3VsZCByZXR1cm4gYG51bGxgLlxuICAgICAgKi9cblxuICAgICAgLy8gVE9ETyBUaWNrZXQ6IEVycm9yIEhhbmRsaW5nXG4gICAgICAvLyBDYXRjaCB0aGUgSW52YWxpZElkIGVycm9yIGJ5IHN0cmluZyBtYXRjaGluZywgYW5kIHRoZW4gaGFuZGxlIGl0LlxuICAgICAgY29uc29sZS5lcnJvcihgU29tZXRoaW5nIHdlbnQgd3JvbmcgaW4gZ2V0TW92aWVCeUlEOiAke2V9YClcbiAgICAgIGNvbnNvbGUubG9nKGUudG9TdHJpbmcoKSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVGhpcyBpcyBhIHBhcnNlZCBxdWVyeSwgc29ydCwgYW5kIHByb2plY3QgYnVuZGxlLlxuICogQHR5cGVkZWYgUXVlcnlQYXJhbXNcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBxdWVyeSAtIFRoZSBzcGVjaWZpZWQgcXVlcnksIHRyYW5zZm9ybWVkIGFjY29yZGluZ2x5XG4gKiBAcHJvcGVydHkge2FueVtdfSBzb3J0IC0gVGhlIHNwZWNpZmllZCBzb3J0XG4gKiBAcHJvcGVydHkge09iamVjdH0gcHJvamVjdCAtIFRoZSBzcGVjaWZpZWQgcHJvamVjdCwgaWYgYW55XG4gKi9cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgc2luZ2xlIGNvdW50cnkgcmVzdWx0XG4gKiBAdHlwZWRlZiBDb3VudHJ5UmVzdWx0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gT2JqZWN0SUQgLSBUaGUgT2JqZWN0SUQgb2YgdGhlIG1vdmllXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdGl0bGUgLSBUaGUgdGl0bGUgb2YgdGhlIG1vdmllXG4gKi9cblxuLyoqXG4gKiBBIE1vdmllIGZyb20gbWZsaXhcbiAqIEB0eXBlZGVmIE1mbGl4TW92aWVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBfaWRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0aXRsZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IHllYXJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBydW50aW1lXG4gKiBAcHJvcGVydHkge0RhdGV9IHJlbGVhc2VkXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBjYXN0XG4gKiBAcHJvcGVydHkge251bWJlcn0gbWV0YWNyaXRpY2RcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwb3N0ZXJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwbG90XG4gKiBAcHJvcGVydHkge3N0cmluZ30gZnVsbHBsb3RcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfERhdGV9IGxhc3R1cGRhdGVkXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZVxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gbGFuZ3VhZ2VzXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBkaXJlY3RvcnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IHdyaXRlcnNcbiAqIEBwcm9wZXJ0eSB7SU1EQn0gaW1kYlxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gY291bnRyaWVzXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSByYXRlZFxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gZ2VucmVzXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBjb21tZW50c1xuICovXG5cbi8qKlxuICogSU1EQiBzdWJkb2N1bWVudFxuICogQHR5cGVkZWYgSU1EQlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJhdGluZ1xuICogQHByb3BlcnR5IHtudW1iZXJ9IHZvdGVzXG4gKiBAcHJvcGVydHkge251bWJlcn0gaWRcbiAqL1xuXG4vKipcbiAqIFJlc3VsdCBzZXQgZm9yIGdldE1vdmllcyBtZXRob2RcbiAqIEB0eXBlZGVmIEdldE1vdmllc1Jlc3VsdFxuICogQHByb3BlcnR5IHtNZmxpeE1vdmllc1tdfSBtb3ZpZXNMaXN0XG4gKiBAcHJvcGVydHkge251bWJlcn0gdG90YWxOdW1SZXN1bHRzXG4gKi9cblxuLyoqXG4gKiBGYWNldGVkIFNlYXJjaCBSZXR1cm5cbiAqXG4gKiBUaGUgdHlwZSBvZiByZXR1cm4gZnJvbSBmYWNldGVkIHNlYXJjaC4gSXQgd2lsbCBiZSBhIHNpbmdsZSBkb2N1bWVudCB3aXRoXG4gKiAzIGZpZWxkczogcmF0aW5nLCBydW50aW1lLCBhbmQgbW92aWVzLlxuICogQHR5cGVkZWYgRmFjZXRlZFNlYXJjaFJldHVyblxuICogQHByb3BlcnR5IHtvYmplY3R9IHJhdGluZ1xuICogQHByb3BlcnR5IHtvYmplY3R9IHJ1bnRpbWVcbiAqIEBwcm9wZXJ0eSB7TUZsaXhNb3ZpZVtdfW1vdmllc1xuICovXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7O0FBRUEsSUFBSUEsTUFBSjtBQUNBLElBQUlDLEtBQUo7QUFDQSxJQUFNQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLDRCQUFELEVBQStCLENBQUMsQ0FBaEMsQ0FBRCxDQUFyQjs7SUFFcUJDLFM7Ozs7Ozs7O29HQUNuQixpQkFBc0JDLElBQXRCO1FBQUE7VUFBQTtZQUFBO2NBQUE7Z0JBQUEsS0FDTUosTUFETjtrQkFBQTtrQkFBQTtnQkFBQTs7Z0JBQUE7O2NBQUE7Z0JBQUE7Z0JBQUE7Z0JBQUEsT0FLa0JJLElBQUksQ0FBQ0MsRUFBTCxDQUFRQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFBcEIsQ0FMbEI7O2NBQUE7Z0JBS0lQLEtBTEo7Z0JBQUE7Z0JBQUEsT0FNbUJHLElBQUksQ0FBQ0MsRUFBTCxDQUFRQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFBcEIsRUFBOEJDLFVBQTlCLENBQXlDLFFBQXpDLENBTm5COztjQUFBO2dCQU1JVCxNQU5KO2dCQU9JLEtBQUtBLE1BQUwsR0FBY0EsTUFBZCxDQVBKLENBT3lCOztnQkFQekI7Z0JBQUE7O2NBQUE7Z0JBQUE7Z0JBQUE7Z0JBU0lVLE9BQU8sQ0FBQ0MsS0FBUjs7Y0FUSjtjQUFBO2dCQUFBO1lBQUE7VUFBQTtRQUFBO01BQUEsQzs7Ozs7Ozs7SUFlQTtBQUNGO0FBQ0E7QUFDQTtBQUNBOzs7Ozs0R0FDRTtRQUFBOztRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUFBO2dCQUFBLE9BQ3lCVixLQUFLLENBQUNXLE9BQU4sQ0FBYztrQkFBRUMsZ0JBQWdCLEVBQUU7Z0JBQXBCLENBQWQsQ0FEekI7O2NBQUE7Z0JBQ1FDLFFBRFI7Z0JBRVFDLFFBRlIsR0FFbUJELFFBQVEsQ0FBQ0MsUUFBVCxD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QUE7TUFBQSxDOzs7Ozs7OztJQXVEQTtBQUNGO0FBQ0E7QUFDQTtBQUNBOzs7Ozt3R0FDRSxrQkFBMEJLLEVBQTFCO1FBQUE7UUFBQTtVQUFBO1lBQUE7Y0FBQTtnQkFBQTs7Z0JBRUk7QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Z0JBSU07Z0JBQ0E7Z0JBRU1DLFFBZlYsR0FlcUIsQ0FDZjtrQkFDRW5DLE1BQU0sRUFBRTtvQkFDTm9DLEdBQUcsRUFBRSxJQUFBQyxjQUFBLEVBQVNILEVBQVQ7a0JBREM7Z0JBRFYsQ0FEZSxFQU1mO2tCQUNFSSxPQUFPLEVBQUU7b0JBQ1BDLElBQUksRUFBRSxVQURDO29CQUVQLE9BQUs7c0JBQ0hMLEVBQUUsRUFBRTtvQkFERCxDQUZFO29CQUtQQyxRQUFRLEVBQUUsQ0FDUjtzQkFDRW5DLE1BQU0sRUFBRTt3QkFDTndDLEtBQUssRUFBRTswQkFDTEMsR0FBRyxFQUFFLENBQUMsV0FBRCxFQUFjLE1BQWQ7d0JBREE7c0JBREQ7b0JBRFYsQ0FEUSxFQVFSO3NCQUNFdkMsS0FBSyxFQUFFO3dCQUNMd0MsSUFBSSxFQUFFLENBQUM7c0JBREY7b0JBRFQsQ0FSUSxDQUxIO29CQW1CUEMsRUFBRSxFQUFFO2tCQW5CRztnQkFEWCxDQU5lLENBZnJCO2dCQUFBO2dCQUFBLE9BNkNpQi9GLE1BQU0sQ0FBQ3lFLFNBQVAsQ0FBaUJjLFFBQWpCLEVBQTJCYixJQUEzQixFQTdDakI7O2NBQUE7Z0JBQUE7O2NBQUE7Z0JBQUE7Z0JBQUE7O2dCQStDSTtBQUNOO0FBQ0E7QUFDQTtBQUNBO2dCQUdNO2dCQUNBO2dCQUNBaEUsT0FBTyxDQUFDQyxLQUFSO2dCQUNBRCxPQUFPLENBQUNzRixHQUFSLENBQVksYUFBRUMsUUFBRixFQUFaO2dCQXpESixrQ0EwRFcsSUExRFg7O2NBQUE7Y0FBQTtnQkFBQTtZQUFBO1VBQUE7UUFBQTtNQUFBLEM7Ozs7Ozs7Ozs7O0FBK0RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIn0=","map":{"version":3,"names":["movies","mflix","DEFAULT_SORT","MoviesDAO","conn","db","process","env","MFLIX_NS","collection","console","error","command","connectionStatus","roleInfo","authInfo","authenticatedUserRoles","s","serverConfig","options","poolSize","wtimeout","response","countries","find","$in","projection","title","cursor","toArray","text","query","$text","$search","meta_score","$meta","sort","project","score","cast","searchCast","Array","isArray","split","genre","searchGenre","genres","filters","page","moviesPerPage","Error","matchStage","$match","sortStage","$sort","countingPipeline","$count","skipStage","$skip","limitStage","$limit","facetStage","$facet","runtime","$bucket","groupBy","boundaries","output","count","$sum","rating","$addFields","queryPipeline","aggregate","next","results","queryParams","textSearchQuery","castSearchQuery","genreSearchQuery","moviesList","totalNumMovies","displayCursor","limit","skip","countDocuments","id","pipeline","_id","ObjectId","$lookup","from","$expr","$eq","date","as","log","toString"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\dao\\","sources":["moviesDAO.js"],"sourcesContent":["import { ObjectId } from \"bson\"\n\nlet movies\nlet mflix\nconst DEFAULT_SORT = [[\"tomatoes.viewer.numReviews\", -1]]\n\nexport default class MoviesDAO {\n  static async injectDB(conn) {\n    if (movies) {\n      return\n    }\n    try {\n      mflix = await conn.db(process.env.MFLIX_NS)\n      movies = await conn.db(process.env.MFLIX_NS).collection(\"movies\")\n      this.movies = movies // this is only for testing\n    } catch (e) {\n      console.error(\n        `Unable to establish a collection handle in moviesDAO: ${e}`,\n      )\n    }\n  }\n\n  /**\n   * Retrieves the connection pool size, write concern and user roles on the\n   * current client.\n   * @returns {Promise<ConfigurationResult>} An object with configuration details.\n   */\n  static async getConfiguration() {\n    const roleInfo = await mflix.command({ connectionStatus: 1 })\n    const authInfo = roleInfo.authInfo.authenticatedUserRoles[0]\n    const { poolSize, wtimeout } = movies.s.db.serverConfig.s.options\n    let response = {\n      poolSize,\n      wtimeout,\n      authInfo,\n    }\n    return response\n  }\n\n  /**\n   * Finds and returns movies originating from one or more countries.\n   * Returns a list of objects, each object contains a title and an _id.\n   * @param {string[]} countries - The list of countries.\n   * @returns {Promise<CountryResult>} A promise that will resolve to a list of CountryResults.\n   */\n  static async getMoviesByCountry(countries) {\n    /**\n    Ticket: Projection\n\n    Write a query that matches movies with the countries in the \"countries\"\n    list, but only returns the title and _id of each movie.\n\n    Remember that in MongoDB, the $in operator can be used with a list to\n    match one or more values of a specific field.\n    */\n\n    let cursor\n    try {\n      // TODO Ticket: Projection\n      // Find movies matching the \"countries\" list, but only return the title\n      // and _id. Do not put a limit in your own implementation, the limit\n      // here is only included to avoid sending 46000 documents down the\n      // wire.\n      cursor = await movies.find(\n        { countries: { $in: countries } },\n        { projection: { title: 1 } },\n      )\n    } catch (e) {\n      console.error(`Unable to issue find command, ${e}`)\n      return []\n    }\n\n    return cursor.toArray()\n  }\n\n  /**\n   * Finds and returns movies matching a given text in their title or description.\n   * @param {string} text - The text to match with.\n   * @returns {QueryParams} The QueryParams for text search\n   */\n  static textSearchQuery(text) {\n    const query = { $text: { $search: text } }\n    const meta_score = { $meta: \"textScore\" }\n    const sort = [[\"score\", meta_score]]\n    const project = { score: meta_score }\n\n    return { query, project, sort }\n  }\n\n  /**\n   * Finds and returns movies including one or more cast members.\n   * @param {string[]} cast - The cast members to match with.\n   * @returns {QueryParams} The QueryParams for cast search\n   */\n  static castSearchQuery(cast) {\n    const searchCast = Array.isArray(cast) ? cast : cast.split(\", \")\n\n    const query = { cast: { $in: searchCast } }\n    const project = {}\n    const sort = DEFAULT_SORT\n\n    return { query, project, sort }\n  }\n\n  /**\n   * Finds and returns movies matching a one or more genres.\n   * @param {string[]} genre - The genres to match with.\n   * @returns {QueryParams} The QueryParams for genre search\n   */\n  static genreSearchQuery(genre) {\n    /**\n    Ticket: Text and Subfield Search\n\n    Given an array of one or more genres, construct a query that searches\n    MongoDB for movies with that genre.\n    */\n\n    const searchGenre = Array.isArray(genre) ? genre : genre.split(\", \")\n\n    // TODO Ticket: Text and Subfield Search\n    // Construct a query that will search for the chosen genre.\n    const query = { genres: { $in: searchGenre } }\n    const project = {}\n    const sort = DEFAULT_SORT\n\n    return { query, project, sort }\n  }\n\n  /**\n   *\n   * @param {Object} filters - The search parameter to use in the query. Comes\n   * in the form of `{cast: { $in: [...castMembers]}}`\n   * @param {number} page - The page of movies to retrieve.\n   * @param {number} moviesPerPage - The number of movies to display per page.\n   * @returns {FacetedSearchReturn} FacetedSearchReturn\n   */\n  static async facetedSearch({\n    filters = null,\n    page = 0,\n    moviesPerPage = 20,\n  } = {}) {\n    if (!filters || !filters.cast) {\n      throw new Error(\"Must specify cast members to filter by.\")\n    }\n    const matchStage = { $match: filters }\n    const sortStage = { $sort: { \"tomatoes.viewer.numReviews\": -1 } }\n    const countingPipeline = [matchStage, sortStage, { $count: \"count\" }]\n    const skipStage = { $skip: moviesPerPage * page }\n    const limitStage = { $limit: moviesPerPage }\n    const facetStage = {\n      $facet: {\n        runtime: [\n          {\n            $bucket: {\n              groupBy: \"$runtime\",\n              boundaries: [0, 60, 90, 120, 180],\n              default: \"other\",\n              output: {\n                count: { $sum: 1 },\n              },\n            },\n          },\n        ],\n        rating: [\n          {\n            $bucket: {\n              groupBy: \"$metacritic\",\n              boundaries: [0, 50, 70, 90, 100],\n              default: \"other\",\n              output: {\n                count: { $sum: 1 },\n              },\n            },\n          },\n        ],\n        movies: [\n          {\n            $addFields: {\n              title: \"$title\",\n            },\n          },\n        ],\n      },\n    }\n\n    /**\n    Ticket: Faceted Search\n\n    Please append the skipStage, limitStage, and facetStage to the queryPipeline\n    (in that order). You can accomplish this by adding the stages directly to\n    the queryPipeline.\n\n    The queryPipeline is a Javascript array, so you can use push() or concat()\n    to complete this task, but you might have to do something about `const`.\n    */\n\n    const queryPipeline = [\n      matchStage,\n      sortStage,\n      skipStage,\n      limitStage,\n      facetStage,\n      // TODO Ticket: Faceted Search\n      // Add the stages to queryPipeline in the correct order.\n    ]\n\n    try {\n      const results = await (await movies.aggregate(queryPipeline)).next()\n      const count = await (await movies.aggregate(countingPipeline)).next()\n      return {\n        ...results,\n        ...count,\n      }\n    } catch (e) {\n      return { error: \"Results too large, be more restrictive in filter\" }\n    }\n  }\n\n  /**\n   * Finds and returns movies by country.\n   * Returns a list of objects, each object contains a title and an _id.\n   * @param {Object} filters - The search parameters to use in the query.\n   * @param {number} page - The page of movies to retrieve.\n   * @param {number} moviesPerPage - The number of movies to display per page.\n   * @returns {GetMoviesResult} An object with movie results and total results\n   * that would match this query\n   */\n  static async getMovies({\n    // here's where the default parameters are set for the getMovies method\n    filters = null,\n    page = 0,\n    moviesPerPage = 20,\n  } = {}) {\n    let queryParams = {}\n    if (filters) {\n      if (\"text\" in filters) {\n        queryParams = this.textSearchQuery(filters[\"text\"])\n      } else if (\"cast\" in filters) {\n        queryParams = this.castSearchQuery(filters[\"cast\"])\n      } else if (\"genre\" in filters) {\n        queryParams = this.genreSearchQuery(filters[\"genre\"])\n      }\n    }\n\n    let { query = {}, project = {}, sort = DEFAULT_SORT } = queryParams\n    let cursor\n    try {\n      cursor = await movies\n        .find(query)\n        .project(project)\n        .sort(sort)\n    } catch (e) {\n      console.error(`Unable to issue find command, ${e}`)\n      return { moviesList: [], totalNumMovies: 0 }\n    }\n\n    /**\n    Ticket: Paging\n\n    Before this method returns back to the API, use the \"moviesPerPage\" and\n    \"page\" arguments to decide the movies to display.\n\n    Paging can be implemented by using the skip() and limit() cursor methods.\n    */\n\n    // TODO Ticket: Paging\n    // Use the cursor to only return the movies that belong on the current page\n    const displayCursor = cursor.limit(moviesPerPage).skip(moviesPerPage * page)\n\n    try {\n      const moviesList = await displayCursor.toArray()\n      const totalNumMovies = page === 0 ? await movies.countDocuments(query) : 0\n\n      return { moviesList, totalNumMovies }\n    } catch (e) {\n      console.error(\n        `Unable to convert cursor to array or problem counting documents, ${e}`,\n      )\n      return { moviesList: [], totalNumMovies: 0 }\n    }\n  }\n\n  /**\n   * Gets a movie by its id\n   * @param {string} id - The desired movie id, the _id in Mongo\n   * @returns {MflixMovie | null} Returns either a single movie or nothing\n   */\n  static async getMovieByID(id) {\n    try {\n      /**\n      Ticket: Get Comments\n\n      Given a movie ID, build an Aggregation Pipeline to retrieve the comments\n      matching that movie's ID.\n\n      The $match stage is already completed. You will need to add a $lookup\n      stage that searches the `comments` collection for the correct comments.\n      */\n\n      // TODO Ticket: Get Comments\n      // Implement the required pipeline.\n\n      const pipeline = [\n        {\n          $match: {\n            _id: ObjectId(id),\n          },\n        },\n        {\n          $lookup: {\n            from: \"comments\",\n            let: {\n              id: \"$_id\",\n            },\n            pipeline: [\n              {\n                $match: {\n                  $expr: {\n                    $eq: [\"$movie_id\", \"$$id\"],\n                  },\n                },\n              },\n              {\n                $sort: {\n                  date: -1,\n                },\n              },\n            ],\n            as: \"comments\",\n          },\n        },\n      ]\n      return await movies.aggregate(pipeline).next()\n    } catch (e) {\n      /**\n      Ticket: Error Handling\n\n      Handle the error that occurs when an invalid ID is passed to this method.\n      When this specific error is thrown, the method should return `null`.\n      */\n\n      // TODO Ticket: Error Handling\n      // Catch the InvalidId error by string matching, and then handle it.\n      console.error(`Something went wrong in getMovieByID: ${e}`)\n      console.log(e.toString())\n      return null\n    }\n  }\n}\n\n/**\n * This is a parsed query, sort, and project bundle.\n * @typedef QueryParams\n * @property {Object} query - The specified query, transformed accordingly\n * @property {any[]} sort - The specified sort\n * @property {Object} project - The specified project, if any\n */\n\n/**\n * Represents a single country result\n * @typedef CountryResult\n * @property {string} ObjectID - The ObjectID of the movie\n * @property {string} title - The title of the movie\n */\n\n/**\n * A Movie from mflix\n * @typedef MflixMovie\n * @property {string} _id\n * @property {string} title\n * @property {number} year\n * @property {number} runtime\n * @property {Date} released\n * @property {string[]} cast\n * @property {number} metacriticd\n * @property {string} poster\n * @property {string} plot\n * @property {string} fullplot\n * @property {string|Date} lastupdated\n * @property {string} type\n * @property {string[]} languages\n * @property {string[]} directors\n * @property {string[]} writers\n * @property {IMDB} imdb\n * @property {string[]} countries\n * @property {string[]} rated\n * @property {string[]} genres\n * @property {string[]} comments\n */\n\n/**\n * IMDB subdocument\n * @typedef IMDB\n * @property {number} rating\n * @property {number} votes\n * @property {number} id\n */\n\n/**\n * Result set for getMovies method\n * @typedef GetMoviesResult\n * @property {MflixMovies[]} moviesList\n * @property {number} totalNumResults\n */\n\n/**\n * Faceted Search Return\n *\n * The type of return from faceted search. It will be a single document with\n * 3 fields: rating, runtime, and movies.\n * @typedef FacetedSearchReturn\n * @property {object} rating\n * @property {object} runtime\n * @property {MFlixMovie[]}movies\n */\n"],"mappings":"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"}},"mtime":1656337723578},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\comments.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _usersDAO = _interopRequireDefault(require(\"../dao/usersDAO\"));\n\nvar _commentsDAO = _interopRequireDefault(require(\"../dao/commentsDAO\"));\n\nvar _moviesDAO = _interopRequireDefault(require(\"../dao/moviesDAO\"));\n\nvar _users = require(\"./users.controller\");\n\nvar _bson = require(\"bson\");\n\nvar CommentsController = /*#__PURE__*/function () {\n  function CommentsController() {\n    (0, _classCallCheck2[\"default\"])(this, CommentsController);\n  }\n\n  (0, _createClass2[\"default\"])(CommentsController, null, [{\n    key: \"apiPostComment\",\n    value: function () {\n      var _apiPostComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res, next) {\n        var userJwt, user, error, movieId, comment, date, commentResponse, updatedComments;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context.next = 4;\n                return _users.User.decoded(userJwt);\n\n              case 4:\n                user = _context.sent;\n                error = user.error;\n\n                if (!error) {\n                  _context.next = 9;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: error\n                });\n                return _context.abrupt(\"return\");\n\n              case 9:\n                movieId = req.body.movie_id;\n                comment = req.body.comment;\n                date = new Date();\n                _context.next = 14;\n                return _commentsDAO[\"default\"].addComment((0, _bson.ObjectId)(movieId), user, comment, date);\n\n              case 14:\n                commentResponse = _context.sent;\n                _context.next = 17;\n                return _moviesDAO[\"default\"].getMovieByID(movieId);\n\n              case 17:\n                updatedComments = _context.sent;\n                res.json({\n                  status: \"success\",\n                  comments: updatedComments.comments\n                });\n                _context.next = 24;\n                break;\n\n              case 21:\n                _context.prev = 21;\n                _context.t0 = _context[\"catch\"](0);\n                res.status(500).json({\n                  e: _context.t0\n                });\n\n              case 24:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 21]]);\n      }));\n\n      function apiPostComment(_x, _x2, _x3) {\n        return _apiPostComment.apply(this, arguments);\n      }\n\n      return apiPostComment;\n    }()\n  }, {\n    key: \"apiUpdateComment\",\n    value: function () {\n      var _apiUpdateComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res, next) {\n        var userJwt, user, error, commentId, text, date, commentResponse, movieId, updatedComments;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context2.next = 4;\n                return _users.User.decoded(userJwt);\n\n              case 4:\n                user = _context2.sent;\n                error = user.error;\n\n                if (!error) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: error\n                });\n                return _context2.abrupt(\"return\");\n\n              case 9:\n                commentId = req.body.comment_id;\n                text = req.body.updated_comment;\n                date = new Date();\n                _context2.next = 14;\n                return _commentsDAO[\"default\"].updateComment((0, _bson.ObjectId)(commentId), user.email, text, date);\n\n              case 14:\n                commentResponse = _context2.sent;\n                error = commentResponse.error;\n\n                if (error) {\n                  res.status(400).json({\n                    error: error\n                  });\n                }\n\n                if (!(commentResponse.modifiedCount === 0)) {\n                  _context2.next = 19;\n                  break;\n                }\n\n                throw new Error(\"unable to update comment - user may not be original poster\");\n\n              case 19:\n                movieId = req.body.movie_id;\n                _context2.next = 22;\n                return _moviesDAO[\"default\"].getMovieByID(movieId);\n\n              case 22:\n                updatedComments = _context2.sent;\n                res.json({\n                  comments: updatedComments.comments\n                });\n                _context2.next = 29;\n                break;\n\n              case 26:\n                _context2.prev = 26;\n                _context2.t0 = _context2[\"catch\"](0);\n                res.status(500).json({\n                  e: _context2.t0\n                });\n\n              case 29:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 26]]);\n      }));\n\n      function apiUpdateComment(_x4, _x5, _x6) {\n        return _apiUpdateComment.apply(this, arguments);\n      }\n\n      return apiUpdateComment;\n    }()\n  }, {\n    key: \"apiDeleteComment\",\n    value: function () {\n      var _apiDeleteComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(req, res, next) {\n        var userJwt, user, error, commentId, userEmail, commentResponse, movieId, _yield$MoviesDAO$getM, comments;\n\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context3.next = 4;\n                return _users.User.decoded(userJwt);\n\n              case 4:\n                user = _context3.sent;\n                error = user.error;\n\n                if (!error) {\n                  _context3.next = 9;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: error\n                });\n                return _context3.abrupt(\"return\");\n\n              case 9:\n                commentId = req.body.comment_id;\n                userEmail = user.email;\n                _context3.next = 13;\n                return _commentsDAO[\"default\"].deleteComment((0, _bson.ObjectId)(commentId), userEmail);\n\n              case 13:\n                commentResponse = _context3.sent;\n                movieId = req.body.movie_id;\n                _context3.next = 17;\n                return _moviesDAO[\"default\"].getMovieByID(movieId);\n\n              case 17:\n                _yield$MoviesDAO$getM = _context3.sent;\n                comments = _yield$MoviesDAO$getM.comments;\n                res.json({\n                  comments: comments\n                });\n                _context3.next = 25;\n                break;\n\n              case 22:\n                _context3.prev = 22;\n                _context3.t0 = _context3[\"catch\"](0);\n                res.status(500).json({\n                  e: _context3.t0\n                });\n\n              case 25:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 22]]);\n      }));\n\n      function apiDeleteComment(_x7, _x8, _x9) {\n        return _apiDeleteComment.apply(this, arguments);\n      }\n\n      return apiDeleteComment;\n    }()\n  }, {\n    key: \"apiCommentReport\",\n    value: function () {\n      var _apiCommentReport = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res, next) {\n        var userJwt, user, error, report;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context4.next = 4;\n                return _users.User.decoded(userJwt);\n\n              case 4:\n                user = _context4.sent;\n                error = user.error;\n\n                if (!error) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: error\n                });\n                return _context4.abrupt(\"return\");\n\n              case 9:\n                if (!_usersDAO[\"default\"].checkAdmin(user.email)) {\n                  _context4.next = 15;\n                  break;\n                }\n\n                _context4.next = 12;\n                return _commentsDAO[\"default\"].mostActiveCommenters();\n\n              case 12:\n                report = _context4.sent;\n                res.json({\n                  report: report\n                });\n                return _context4.abrupt(\"return\");\n\n              case 15:\n                res.status(401).json({\n                  status: \"fail\"\n                });\n                _context4.next = 21;\n                break;\n\n              case 18:\n                _context4.prev = 18;\n                _context4.t0 = _context4[\"catch\"](0);\n                res.status(500).json({\n                  e: _context4.t0\n                });\n\n              case 21:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 18]]);\n      }));\n\n      function apiCommentReport(_x10, _x11, _x12) {\n        return _apiCommentReport.apply(this, arguments);\n      }\n\n      return apiCommentReport;\n    }()\n  }]);\n  return CommentsController;\n}();\n\nexports[\"default\"] = CommentsController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDb21tZW50c0NvbnRyb2xsZXIiLCJyZXEiLCJyZXMiLCJuZXh0IiwidXNlckp3dCIsImdldCIsInNsaWNlIiwibGVuZ3RoIiwiVXNlciIsImRlY29kZWQiLCJ1c2VyIiwiZXJyb3IiLCJzdGF0dXMiLCJqc29uIiwibW92aWVJZCIsImJvZHkiLCJtb3ZpZV9pZCIsImNvbW1lbnQiLCJkYXRlIiwiRGF0ZSIsIkNvbW1lbnRzREFPIiwiYWRkQ29tbWVudCIsIk9iamVjdElkIiwiY29tbWVudFJlc3BvbnNlIiwiTW92aWVzREFPIiwiZ2V0TW92aWVCeUlEIiwidXBkYXRlZENvbW1lbnRzIiwiY29tbWVudHMiLCJlIiwiY29tbWVudElkIiwiY29tbWVudF9pZCIsInRleHQiLCJ1cGRhdGVkX2NvbW1lbnQiLCJ1cGRhdGVDb21tZW50IiwiZW1haWwiLCJtb2RpZmllZENvdW50IiwiRXJyb3IiLCJ1c2VyRW1haWwiLCJkZWxldGVDb21tZW50IiwiVXNlcnNEQU8iLCJjaGVja0FkbWluIiwibW9zdEFjdGl2ZUNvbW1lbnRlcnMiLCJyZXBvcnQiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcMzM2MTZcXE9uZURyaXZlXFxCdXJlYXVcXG1mbGl4LWpzXFxzcmNcXGFwaVxcIiwic291cmNlcyI6WyJjb21tZW50cy5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBVc2Vyc0RBTyBmcm9tIFwiLi4vZGFvL3VzZXJzREFPXCJcbmltcG9ydCBDb21tZW50c0RBTyBmcm9tIFwiLi4vZGFvL2NvbW1lbnRzREFPXCJcbmltcG9ydCBNb3ZpZXNEQU8gZnJvbSBcIi4uL2Rhby9tb3ZpZXNEQU9cIlxuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuL3VzZXJzLmNvbnRyb2xsZXJcIlxuaW1wb3J0IHsgT2JqZWN0SWQgfSBmcm9tIFwiYnNvblwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbW1lbnRzQ29udHJvbGxlciB7XG4gIHN0YXRpYyBhc3luYyBhcGlQb3N0Q29tbWVudChyZXEsIHJlcywgbmV4dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySnd0ID0gcmVxLmdldChcIkF1dGhvcml6YXRpb25cIikuc2xpY2UoXCJCZWFyZXIgXCIubGVuZ3RoKVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZGVjb2RlZCh1c2VySnd0KVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IHVzZXJcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBtb3ZpZUlkID0gcmVxLmJvZHkubW92aWVfaWRcbiAgICAgIGNvbnN0IGNvbW1lbnQgPSByZXEuYm9keS5jb21tZW50XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxuXG4gICAgICBjb25zdCBjb21tZW50UmVzcG9uc2UgPSBhd2FpdCBDb21tZW50c0RBTy5hZGRDb21tZW50KFxuICAgICAgICBPYmplY3RJZChtb3ZpZUlkKSxcbiAgICAgICAgdXNlcixcbiAgICAgICAgY29tbWVudCxcbiAgICAgICAgZGF0ZSxcbiAgICAgIClcblxuICAgICAgY29uc3QgdXBkYXRlZENvbW1lbnRzID0gYXdhaXQgTW92aWVzREFPLmdldE1vdmllQnlJRChtb3ZpZUlkKVxuXG4gICAgICByZXMuanNvbih7IHN0YXR1czogXCJzdWNjZXNzXCIsIGNvbW1lbnRzOiB1cGRhdGVkQ29tbWVudHMuY29tbWVudHMgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGUgfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgYXBpVXBkYXRlQ29tbWVudChyZXEsIHJlcywgbmV4dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySnd0ID0gcmVxLmdldChcIkF1dGhvcml6YXRpb25cIikuc2xpY2UoXCJCZWFyZXIgXCIubGVuZ3RoKVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZGVjb2RlZCh1c2VySnd0KVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IHVzZXJcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb21tZW50SWQgPSByZXEuYm9keS5jb21tZW50X2lkXG4gICAgICBjb25zdCB0ZXh0ID0gcmVxLmJvZHkudXBkYXRlZF9jb21tZW50XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxuXG4gICAgICBjb25zdCBjb21tZW50UmVzcG9uc2UgPSBhd2FpdCBDb21tZW50c0RBTy51cGRhdGVDb21tZW50KFxuICAgICAgICBPYmplY3RJZChjb21tZW50SWQpLFxuICAgICAgICB1c2VyLmVtYWlsLFxuICAgICAgICB0ZXh0LFxuICAgICAgICBkYXRlLFxuICAgICAgKVxuXG4gICAgICB2YXIgeyBlcnJvciB9ID0gY29tbWVudFJlc3BvbnNlXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvciB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoY29tbWVudFJlc3BvbnNlLm1vZGlmaWVkQ291bnQgPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwidW5hYmxlIHRvIHVwZGF0ZSBjb21tZW50IC0gdXNlciBtYXkgbm90IGJlIG9yaWdpbmFsIHBvc3RlclwiLFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1vdmllSWQgPSByZXEuYm9keS5tb3ZpZV9pZFxuICAgICAgY29uc3QgdXBkYXRlZENvbW1lbnRzID0gYXdhaXQgTW92aWVzREFPLmdldE1vdmllQnlJRChtb3ZpZUlkKVxuXG4gICAgICByZXMuanNvbih7IGNvbW1lbnRzOiB1cGRhdGVkQ29tbWVudHMuY29tbWVudHMgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGUgfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgYXBpRGVsZXRlQ29tbWVudChyZXEsIHJlcywgbmV4dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySnd0ID0gcmVxLmdldChcIkF1dGhvcml6YXRpb25cIikuc2xpY2UoXCJCZWFyZXIgXCIubGVuZ3RoKVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZGVjb2RlZCh1c2VySnd0KVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IHVzZXJcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb21tZW50SWQgPSByZXEuYm9keS5jb21tZW50X2lkXG4gICAgICBjb25zdCB1c2VyRW1haWwgPSB1c2VyLmVtYWlsXG4gICAgICBjb25zdCBjb21tZW50UmVzcG9uc2UgPSBhd2FpdCBDb21tZW50c0RBTy5kZWxldGVDb21tZW50KFxuICAgICAgICBPYmplY3RJZChjb21tZW50SWQpLFxuICAgICAgICB1c2VyRW1haWwsXG4gICAgICApXG5cbiAgICAgIGNvbnN0IG1vdmllSWQgPSByZXEuYm9keS5tb3ZpZV9pZFxuXG4gICAgICBjb25zdCB7IGNvbW1lbnRzIH0gPSBhd2FpdCBNb3ZpZXNEQU8uZ2V0TW92aWVCeUlEKG1vdmllSWQpXG4gICAgICByZXMuanNvbih7IGNvbW1lbnRzIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFwaUNvbW1lbnRSZXBvcnQocmVxLCByZXMsIG5leHQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlckp3dCA9IHJlcS5nZXQoXCJBdXRob3JpemF0aW9uXCIpLnNsaWNlKFwiQmVhcmVyIFwiLmxlbmd0aClcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmRlY29kZWQodXNlckp3dClcbiAgICAgIHZhciB7IGVycm9yIH0gPSB1c2VyXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKFVzZXJzREFPLmNoZWNrQWRtaW4odXNlci5lbWFpbCkpIHtcbiAgICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgQ29tbWVudHNEQU8ubW9zdEFjdGl2ZUNvbW1lbnRlcnMoKVxuICAgICAgICByZXMuanNvbih7IHJlcG9ydCB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBzdGF0dXM6IFwiZmFpbFwiIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlIH0pXG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0lBRXFCQSxrQjs7Ozs7Ozs7MEdBQ25CLGlCQUE0QkMsR0FBNUIsRUFBaUNDLEdBQWpDLEVBQXNDQyxJQUF0QztRQUFBO1FBQUE7VUFBQTtZQUFBO2NBQUE7Z0JBQUE7Z0JBRVVDLE9BRlYsR0FFb0JILEdBQUcsQ0FBQ0ksR0FBSixDQUFRLGVBQVIsRUFBeUJDLEtBQXpCLENBQStCLFVBQVVDLE1BQXpDLENBRnBCO2dCQUFBO2dCQUFBLE9BR3VCQyxXQUFBLENBQUtDLE9BQUwsQ0FBYUwsT0FBYixDQUh2Qjs7Y0FBQTtnQkFHVU0sSUFIVjtnQkFJVUMsS0FKVixHQUlvQkQsSUFKcEIsQ0FJVUMsS0FKVjs7Z0JBQUEsS0FLUUEsS0FMUjtrQkFBQTtrQkFBQTtnQkFBQTs7Z0JBTU1ULEdBQUcsQ0FBQ1UsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO2tC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","map":{"version":3,"names":["CommentsController","req","res","next","userJwt","get","slice","length","User","decoded","user","error","status","json","movieId","body","movie_id","comment","date","Date","CommentsDAO","addComment","ObjectId","commentResponse","MoviesDAO","getMovieByID","updatedComments","comments","e","commentId","comment_id","text","updated_comment","updateComment","email","modifiedCount","Error","userEmail","deleteComment","UsersDAO","checkAdmin","mostActiveCommenters","report"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\api\\","sources":["comments.controller.js"],"sourcesContent":["import UsersDAO from \"../dao/usersDAO\"\nimport CommentsDAO from \"../dao/commentsDAO\"\nimport MoviesDAO from \"../dao/moviesDAO\"\nimport { User } from \"./users.controller\"\nimport { ObjectId } from \"bson\"\n\nexport default class CommentsController {\n  static async apiPostComment(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      const movieId = req.body.movie_id\n      const comment = req.body.comment\n      const date = new Date()\n\n      const commentResponse = await CommentsDAO.addComment(\n        ObjectId(movieId),\n        user,\n        comment,\n        date,\n      )\n\n      const updatedComments = await MoviesDAO.getMovieByID(movieId)\n\n      res.json({ status: \"success\", comments: updatedComments.comments })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n\n  static async apiUpdateComment(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      const commentId = req.body.comment_id\n      const text = req.body.updated_comment\n      const date = new Date()\n\n      const commentResponse = await CommentsDAO.updateComment(\n        ObjectId(commentId),\n        user.email,\n        text,\n        date,\n      )\n\n      var { error } = commentResponse\n      if (error) {\n        res.status(400).json({ error })\n      }\n\n      if (commentResponse.modifiedCount === 0) {\n        throw new Error(\n          \"unable to update comment - user may not be original poster\",\n        )\n      }\n\n      const movieId = req.body.movie_id\n      const updatedComments = await MoviesDAO.getMovieByID(movieId)\n\n      res.json({ comments: updatedComments.comments })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n\n  static async apiDeleteComment(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      const commentId = req.body.comment_id\n      const userEmail = user.email\n      const commentResponse = await CommentsDAO.deleteComment(\n        ObjectId(commentId),\n        userEmail,\n      )\n\n      const movieId = req.body.movie_id\n\n      const { comments } = await MoviesDAO.getMovieByID(movieId)\n      res.json({ comments })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n\n  static async apiCommentReport(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      if (UsersDAO.checkAdmin(user.email)) {\n        const report = await CommentsDAO.mostActiveCommenters()\n        res.json({ report })\n        return\n      }\n\n      res.status(401).json({ status: \"fail\" })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1655825402827},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\dao\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\dao\\\\usersDAO.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar users;\nvar sessions;\n\nvar UsersDAO = /*#__PURE__*/function () {\n  function UsersDAO() {\n    (0, _classCallCheck2[\"default\"])(this, UsersDAO);\n  }\n\n  (0, _createClass2[\"default\"])(UsersDAO, null, [{\n    key: \"injectDB\",\n    value: function () {\n      var _injectDB = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(conn) {\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(users && sessions)) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.prev = 2;\n                _context.next = 5;\n                return conn.db(process.env.MFLIX_NS).collection(\"users\");\n\n              case 5:\n                users = _context.sent;\n                _context.next = 8;\n                return conn.db(process.env.MFLIX_NS).collection(\"sessions\");\n\n              case 8:\n                sessions = _context.sent;\n                _context.next = 14;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Unable to establish collection handles in userDAO: \".concat(_context.t0));\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 11]]);\n      }));\n\n      function injectDB(_x) {\n        return _injectDB.apply(this, arguments);\n      }\n\n      return injectDB;\n    }()\n    /**\n    Ticket: User Management\n     For this ticket, you will need to implement the following five methods:\n     - getUser\n    - addUser\n    - loginUser\n    - logoutUser\n    - getUserSession\n     You can find these methods below this comment. Make sure to read the comments\n    in each method to better understand the implementation.\n     The method deleteUser is already given to you.\n    */\n\n    /**\n     * Finds a user in the `users` collection\n     * @param {string} email - The email of the desired user\n     * @returns {Object | null} Returns either a single user or nothing\n     */\n\n  }, {\n    key: \"getUser\",\n    value: function () {\n      var _getUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(email) {\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return users.findOne({\n                  email: email\n                });\n\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getUser(_x2) {\n        return _getUser.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n    /**\n     * Adds a user to the `users` collection\n     * @param {UserInfo} userInfo - The information of the user to add\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n\n  }, {\n    key: \"addUser\",\n    value: function () {\n      var _addUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(userInfo) {\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return users.insertOne({\n                  name: userInfo.name,\n                  email: userInfo.email,\n                  password: userInfo.password\n                }, {\n                  w: 1\n                });\n\n              case 3:\n                return _context3.abrupt(\"return\", {\n                  success: true\n                });\n\n              case 6:\n                _context3.prev = 6;\n                _context3.t0 = _context3[\"catch\"](0);\n\n                if (!String(_context3.t0).startsWith(\"MongoError: E11000 duplicate key error\")) {\n                  _context3.next = 10;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", {\n                  error: \"A user with the given email already exists.\"\n                });\n\n              case 10:\n                console.error(\"Error occurred while adding new user, \".concat(_context3.t0, \".\"));\n                return _context3.abrupt(\"return\", {\n                  error: _context3.t0\n                });\n\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 6]]);\n      }));\n\n      function addUser(_x3) {\n        return _addUser.apply(this, arguments);\n      }\n\n      return addUser;\n    }()\n    /**\n     * Adds a user to the `sessions` collection\n     * @param {string} email - The email of the user to login\n     * @param {string} jwt - A JSON web token representing the user's claims\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n\n  }, {\n    key: \"loginUser\",\n    value: function () {\n      var _loginUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(email, jwt) {\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return sessions.updateOne({\n                  user_id: email\n                }, {\n                  $set: {\n                    user_id: email,\n                    jwt: jwt\n                  }\n                }, {\n                  upsert: true\n                });\n\n              case 3:\n                return _context4.abrupt(\"return\", {\n                  success: true\n                });\n\n              case 6:\n                _context4.prev = 6;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.error(\"Error occurred while logging in user, \".concat(_context4.t0));\n                return _context4.abrupt(\"return\", {\n                  error: _context4.t0\n                });\n\n              case 10:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 6]]);\n      }));\n\n      function loginUser(_x4, _x5) {\n        return _loginUser.apply(this, arguments);\n      }\n\n      return loginUser;\n    }()\n    /**\n     * Removes a user from the `sessons` collection\n     * @param {string} email - The email of the user to logout\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n\n  }, {\n    key: \"logoutUser\",\n    value: function () {\n      var _logoutUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(email) {\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return sessions.deleteOne({\n                  user_id: email\n                });\n\n              case 3:\n                return _context5.abrupt(\"return\", {\n                  success: true\n                });\n\n              case 6:\n                _context5.prev = 6;\n                _context5.t0 = _context5[\"catch\"](0);\n                console.error(\"Error occurred while logging out user, \".concat(_context5.t0));\n                return _context5.abrupt(\"return\", {\n                  error: _context5.t0\n                });\n\n              case 10:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 6]]);\n      }));\n\n      function logoutUser(_x6) {\n        return _logoutUser.apply(this, arguments);\n      }\n\n      return logoutUser;\n    }()\n    /**\n     * Gets a user from the `sessions` collection\n     * @param {string} email - The email of the user to search for in `sessions`\n     * @returns {Object | null} Returns a user session Object, an \"error\" Object\n     * if something went wrong, or null if user was not found.\n     */\n\n  }, {\n    key: \"getUserSession\",\n    value: function () {\n      var _getUserSession = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(email) {\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                return _context6.abrupt(\"return\", sessions.findOne({\n                  user_id: email\n                }));\n\n              case 4:\n                _context6.prev = 4;\n                _context6.t0 = _context6[\"catch\"](0);\n                console.error(\"Error occurred while retrieving user session, \".concat(_context6.t0));\n                return _context6.abrupt(\"return\", null);\n\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 4]]);\n      }));\n\n      function getUserSession(_x7) {\n        return _getUserSession.apply(this, arguments);\n      }\n\n      return getUserSession;\n    }()\n    /**\n     * Removes a user from the `sessions` and `users` collections\n     * @param {string} email - The email of the user to delete\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n\n  }, {\n    key: \"deleteUser\",\n    value: function () {\n      var _deleteUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(email) {\n        return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                _context7.next = 3;\n                return users.deleteOne({\n                  email: email\n                });\n\n              case 3:\n                _context7.next = 5;\n                return sessions.deleteOne({\n                  user_id: email\n                });\n\n              case 5:\n                _context7.next = 7;\n                return this.getUser(email);\n\n              case 7:\n                _context7.t0 = !_context7.sent;\n\n                if (!_context7.t0) {\n                  _context7.next = 12;\n                  break;\n                }\n\n                _context7.next = 11;\n                return this.getUserSession(email);\n\n              case 11:\n                _context7.t0 = !_context7.sent;\n\n              case 12:\n                if (!_context7.t0) {\n                  _context7.next = 16;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", {\n                  success: true\n                });\n\n              case 16:\n                console.error(\"Deletion unsuccessful\");\n                return _context7.abrupt(\"return\", {\n                  error: \"Deletion unsuccessful\"\n                });\n\n              case 18:\n                _context7.next = 24;\n                break;\n\n              case 20:\n                _context7.prev = 20;\n                _context7.t1 = _context7[\"catch\"](0);\n                console.error(\"Error occurred while deleting user, \".concat(_context7.t1));\n                return _context7.abrupt(\"return\", {\n                  error: _context7.t1\n                });\n\n              case 24:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 20]]);\n      }));\n\n      function deleteUser(_x8) {\n        return _deleteUser.apply(this, arguments);\n      }\n\n      return deleteUser;\n    }()\n    /**\n     * Given a user's email and an object of new preferences, update that user's\n     * data to include those preferences.\n     * @param {string} email - The email of the user to update.\n     * @param {Object} preferences - The preferences to include in the user's data.\n     * @returns {DAOResponse}\n     */\n\n  }, {\n    key: \"updatePreferences\",\n    value: function () {\n      var _updatePreferences = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee8(email, preferences) {\n        var updateResponse;\n        return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n\n                /**\n                Ticket: User Preferences\n                 Update the \"preferences\" field in the corresponding user's document to\n                reflect the new information in preferences.\n                */\n                preferences = preferences || {}; // TODO Ticket: User Preferences\n                // Use the data in \"preferences\" to update the user's preferences.\n\n                _context8.next = 4;\n                return users.updateOne({\n                  email: email\n                }, {\n                  $set: {\n                    preferences: preferences\n                  }\n                });\n\n              case 4:\n                updateResponse = _context8.sent;\n\n                if (!(updateResponse.matchedCount === 0)) {\n                  _context8.next = 7;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", {\n                  error: \"No user found with that email\"\n                });\n\n              case 7:\n                return _context8.abrupt(\"return\", updateResponse);\n\n              case 10:\n                _context8.prev = 10;\n                _context8.t0 = _context8[\"catch\"](0);\n                console.error(\"An error occurred while updating this user's preferences, \".concat(_context8.t0));\n                return _context8.abrupt(\"return\", {\n                  error: _context8.t0\n                });\n\n              case 14:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[0, 10]]);\n      }));\n\n      function updatePreferences(_x9, _x10) {\n        return _updatePreferences.apply(this, arguments);\n      }\n\n      return updatePreferences;\n    }()\n  }, {\n    key: \"checkAdmin\",\n    value: function () {\n      var _checkAdmin = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee9(email) {\n        var _yield$this$getUser, isAdmin;\n\n        return _regenerator[\"default\"].wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                _context9.next = 3;\n                return this.getUser(email);\n\n              case 3:\n                _yield$this$getUser = _context9.sent;\n                isAdmin = _yield$this$getUser.isAdmin;\n                return _context9.abrupt(\"return\", isAdmin || false);\n\n              case 8:\n                _context9.prev = 8;\n                _context9.t0 = _context9[\"catch\"](0);\n                return _context9.abrupt(\"return\", {\n                  error: _context9.t0\n                });\n\n              case 11:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[0, 8]]);\n      }));\n\n      function checkAdmin(_x11) {\n        return _checkAdmin.apply(this, arguments);\n      }\n\n      return checkAdmin;\n    }()\n  }, {\n    key: \"makeAdmin\",\n    value: function () {\n      var _makeAdmin = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee10(email) {\n        var updateResponse;\n        return _regenerator[\"default\"].wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.prev = 0;\n                updateResponse = users.updateOne({\n                  email: email\n                }, {\n                  $set: {\n                    isAdmin: true\n                  }\n                });\n                return _context10.abrupt(\"return\", updateResponse);\n\n              case 5:\n                _context10.prev = 5;\n                _context10.t0 = _context10[\"catch\"](0);\n                return _context10.abrupt(\"return\", {\n                  error: _context10.t0\n                });\n\n              case 8:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, null, [[0, 5]]);\n      }));\n\n      function makeAdmin(_x12) {\n        return _makeAdmin.apply(this, arguments);\n      }\n\n      return makeAdmin;\n    }()\n  }]);\n  return UsersDAO;\n}();\n/**\n * Parameter passed to addUser method\n * @typedef UserInfo\n * @property {string} name\n * @property {string} email\n * @property {string} password\n */\n\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\n\n\nexports[\"default\"] = UsersDAO;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VycyIsInNlc3Npb25zIiwiVXNlcnNEQU8iLCJjb25uIiwiZGIiLCJwcm9jZXNzIiwiZW52IiwiTUZMSVhfTlMiLCJjb2xsZWN0aW9uIiwiY29uc29sZSIsImVycm9yIiwiZW1haWwiLCJmaW5kT25lIiwidXNlckluZm8iLCJpbnNlcnRPbmUiLCJuYW1lIiwicGFzc3dvcmQiLCJ3Iiwic3VjY2VzcyIsIlN0cmluZyIsInN0YXJ0c1dpdGgiLCJqd3QiLCJ1cGRhdGVPbmUiLCJ1c2VyX2lkIiwiJHNldCIsInVwc2VydCIsImRlbGV0ZU9uZSIsImdldFVzZXIiLCJnZXRVc2VyU2Vzc2lvbiIsInByZWZlcmVuY2VzIiwidXBkYXRlUmVzcG9uc2UiLCJtYXRjaGVkQ291bnQiLCJpc0FkbWluIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXDMzNjE2XFxPbmVEcml2ZVxcQnVyZWF1XFxtZmxpeC1qc1xcc3JjXFxkYW9cXCIsInNvdXJjZXMiOlsidXNlcnNEQU8uanMiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IHVzZXJzXG5sZXQgc2Vzc2lvbnNcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlcnNEQU8ge1xuICBzdGF0aWMgYXN5bmMgaW5qZWN0REIoY29ubikge1xuICAgIGlmICh1c2VycyAmJiBzZXNzaW9ucykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB1c2VycyA9IGF3YWl0IGNvbm4uZGIocHJvY2Vzcy5lbnYuTUZMSVhfTlMpLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKVxuICAgICAgc2Vzc2lvbnMgPSBhd2FpdCBjb25uLmRiKHByb2Nlc3MuZW52Lk1GTElYX05TKS5jb2xsZWN0aW9uKFwic2Vzc2lvbnNcIilcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbmFibGUgdG8gZXN0YWJsaXNoIGNvbGxlY3Rpb24gaGFuZGxlcyBpbiB1c2VyREFPOiAke2V9YClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgVGlja2V0OiBVc2VyIE1hbmFnZW1lbnRcblxuICBGb3IgdGhpcyB0aWNrZXQsIHlvdSB3aWxsIG5lZWQgdG8gaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcgZml2ZSBtZXRob2RzOlxuXG4gIC0gZ2V0VXNlclxuICAtIGFkZFVzZXJcbiAgLSBsb2dpblVzZXJcbiAgLSBsb2dvdXRVc2VyXG4gIC0gZ2V0VXNlclNlc3Npb25cblxuICBZb3UgY2FuIGZpbmQgdGhlc2UgbWV0aG9kcyBiZWxvdyB0aGlzIGNvbW1lbnQuIE1ha2Ugc3VyZSB0byByZWFkIHRoZSBjb21tZW50c1xuICBpbiBlYWNoIG1ldGhvZCB0byBiZXR0ZXIgdW5kZXJzdGFuZCB0aGUgaW1wbGVtZW50YXRpb24uXG5cbiAgVGhlIG1ldGhvZCBkZWxldGVVc2VyIGlzIGFscmVhZHkgZ2l2ZW4gdG8geW91LlxuICAqL1xuXG4gIC8qKlxuICAgKiBGaW5kcyBhIHVzZXIgaW4gdGhlIGB1c2Vyc2AgY29sbGVjdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWwgLSBUaGUgZW1haWwgb2YgdGhlIGRlc2lyZWQgdXNlclxuICAgKiBAcmV0dXJucyB7T2JqZWN0IHwgbnVsbH0gUmV0dXJucyBlaXRoZXIgYSBzaW5nbGUgdXNlciBvciBub3RoaW5nXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0VXNlcihlbWFpbCkge1xuICAgIC8vIFRPRE8gVGlja2V0OiBVc2VyIE1hbmFnZW1lbnRcbiAgICAvLyBSZXRyaWV2ZSB0aGUgdXNlciBkb2N1bWVudCBjb3JyZXNwb25kaW5nIHdpdGggdGhlIHVzZXIncyBlbWFpbC5cbiAgICByZXR1cm4gYXdhaXQgdXNlcnMuZmluZE9uZSh7IGVtYWlsOiBlbWFpbCB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSB1c2VyIHRvIHRoZSBgdXNlcnNgIGNvbGxlY3Rpb25cbiAgICogQHBhcmFtIHtVc2VySW5mb30gdXNlckluZm8gLSBUaGUgaW5mb3JtYXRpb24gb2YgdGhlIHVzZXIgdG8gYWRkXG4gICAqIEByZXR1cm5zIHtEQU9SZXNwb25zZX0gUmV0dXJucyBlaXRoZXIgYSBcInN1Y2Nlc3NcIiBvciBhbiBcImVycm9yXCIgT2JqZWN0XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgYWRkVXNlcih1c2VySW5mbykge1xuICAgIC8qKlxuICAgIFRpY2tldDogRHVyYWJsZSBXcml0ZXNcblxuICAgIFBsZWFzZSBpbmNyZWFzZSB0aGUgZHVyYWJpbGl0eSBvZiB0aGlzIG1ldGhvZCBieSB1c2luZyBhIG5vbi1kZWZhdWx0IHdyaXRlXG4gICAgY29uY2VybiB3aXRoIGBgaW5zZXJ0T25lYGAuXG4gICAgKi9cblxuICAgIHRyeSB7XG4gICAgICAvLyBUT0RPIFRpY2tldDogVXNlciBNYW5hZ2VtZW50XG4gICAgICAvLyBJbnNlcnQgYSB1c2VyIHdpdGggdGhlIFwibmFtZVwiLCBcImVtYWlsXCIsIGFuZCBcInBhc3N3b3JkXCIgZmllbGRzLlxuICAgICAgLy8gVE9ETyBUaWNrZXQ6IER1cmFibGUgV3JpdGVzXG4gICAgICAvLyBVc2UgYSBtb3JlIGR1cmFibGUgV3JpdGUgQ29uY2VybiBmb3IgdGhpcyBvcGVyYXRpb24uXG4gICAgICBhd2FpdCB1c2Vycy5pbnNlcnRPbmUoXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiB1c2VySW5mby5uYW1lLFxuICAgICAgICAgIGVtYWlsOiB1c2VySW5mby5lbWFpbCxcbiAgICAgICAgICBwYXNzd29yZDogdXNlckluZm8ucGFzc3dvcmQsXG4gICAgICAgIH0sXG4gICAgICAgIHsgdzogMSB9LFxuICAgICAgKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKFN0cmluZyhlKS5zdGFydHNXaXRoKFwiTW9uZ29FcnJvcjogRTExMDAwIGR1cGxpY2F0ZSBrZXkgZXJyb3JcIikpIHtcbiAgICAgICAgcmV0dXJuIHsgZXJyb3I6IFwiQSB1c2VyIHdpdGggdGhlIGdpdmVuIGVtYWlsIGFscmVhZHkgZXhpc3RzLlwiIH1cbiAgICAgIH1cbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIG9jY3VycmVkIHdoaWxlIGFkZGluZyBuZXcgdXNlciwgJHtlfS5gKVxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGUgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgdXNlciB0byB0aGUgYHNlc3Npb25zYCBjb2xsZWN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbCAtIFRoZSBlbWFpbCBvZiB0aGUgdXNlciB0byBsb2dpblxuICAgKiBAcGFyYW0ge3N0cmluZ30gand0IC0gQSBKU09OIHdlYiB0b2tlbiByZXByZXNlbnRpbmcgdGhlIHVzZXIncyBjbGFpbXNcbiAgICogQHJldHVybnMge0RBT1Jlc3BvbnNlfSBSZXR1cm5zIGVpdGhlciBhIFwic3VjY2Vzc1wiIG9yIGFuIFwiZXJyb3JcIiBPYmplY3RcbiAgICovXG4gIHN0YXRpYyBhc3luYyBsb2dpblVzZXIoZW1haWwsIGp3dCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBUT0RPIFRpY2tldDogVXNlciBNYW5hZ2VtZW50XG4gICAgICAvLyBVc2UgYW4gVVBTRVJUIHN0YXRlbWVudCB0byB1cGRhdGUgdGhlIFwiand0XCIgZmllbGQgaW4gdGhlIGRvY3VtZW50LFxuICAgICAgLy8gbWF0Y2hpbmcgdGhlIFwidXNlcl9pZFwiIGZpZWxkIHdpdGggdGhlIGVtYWlsIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uLlxuICAgICAgYXdhaXQgc2Vzc2lvbnMudXBkYXRlT25lKFxuICAgICAgICB7IHVzZXJfaWQ6IGVtYWlsIH0sXG4gICAgICAgIHsgJHNldDogeyB1c2VyX2lkOiBlbWFpbCwgand0OiBqd3QgfSB9LFxuICAgICAgICB7IHVwc2VydDogdHJ1ZSB9LFxuICAgICAgKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igb2NjdXJyZWQgd2hpbGUgbG9nZ2luZyBpbiB1c2VyLCAke2V9YClcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhIHVzZXIgZnJvbSB0aGUgYHNlc3NvbnNgIGNvbGxlY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIC0gVGhlIGVtYWlsIG9mIHRoZSB1c2VyIHRvIGxvZ291dFxuICAgKiBAcmV0dXJucyB7REFPUmVzcG9uc2V9IFJldHVybnMgZWl0aGVyIGEgXCJzdWNjZXNzXCIgb3IgYW4gXCJlcnJvclwiIE9iamVjdFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGxvZ291dFVzZXIoZW1haWwpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETyBUaWNrZXQ6IFVzZXIgTWFuYWdlbWVudFxuICAgICAgLy8gRGVsZXRlIHRoZSBkb2N1bWVudCBpbiB0aGUgYHNlc3Npb25zYCBjb2xsZWN0aW9uIG1hdGNoaW5nIHRoZSBlbWFpbC5cbiAgICAgIGF3YWl0IHNlc3Npb25zLmRlbGV0ZU9uZSh7IHVzZXJfaWQ6IGVtYWlsIH0pXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBvY2N1cnJlZCB3aGlsZSBsb2dnaW5nIG91dCB1c2VyLCAke2V9YClcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhIHVzZXIgZnJvbSB0aGUgYHNlc3Npb25zYCBjb2xsZWN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbCAtIFRoZSBlbWFpbCBvZiB0aGUgdXNlciB0byBzZWFyY2ggZm9yIGluIGBzZXNzaW9uc2BcbiAgICogQHJldHVybnMge09iamVjdCB8IG51bGx9IFJldHVybnMgYSB1c2VyIHNlc3Npb24gT2JqZWN0LCBhbiBcImVycm9yXCIgT2JqZWN0XG4gICAqIGlmIHNvbWV0aGluZyB3ZW50IHdyb25nLCBvciBudWxsIGlmIHVzZXIgd2FzIG5vdCBmb3VuZC5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRVc2VyU2Vzc2lvbihlbWFpbCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBUT0RPIFRpY2tldDogVXNlciBNYW5hZ2VtZW50XG4gICAgICAvLyBSZXRyaWV2ZSB0aGUgc2Vzc2lvbiBkb2N1bWVudCBjb3JyZXNwb25kaW5nIHdpdGggdGhlIHVzZXIncyBlbWFpbC5cbiAgICAgIHJldHVybiBzZXNzaW9ucy5maW5kT25lKHsgdXNlcl9pZDogZW1haWwgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBvY2N1cnJlZCB3aGlsZSByZXRyaWV2aW5nIHVzZXIgc2Vzc2lvbiwgJHtlfWApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgdXNlciBmcm9tIHRoZSBgc2Vzc2lvbnNgIGFuZCBgdXNlcnNgIGNvbGxlY3Rpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbCAtIFRoZSBlbWFpbCBvZiB0aGUgdXNlciB0byBkZWxldGVcbiAgICogQHJldHVybnMge0RBT1Jlc3BvbnNlfSBSZXR1cm5zIGVpdGhlciBhIFwic3VjY2Vzc1wiIG9yIGFuIFwiZXJyb3JcIiBPYmplY3RcbiAgICovXG4gIHN0YXRpYyBhc3luYyBkZWxldGVVc2VyKGVtYWlsKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHVzZXJzLmRlbGV0ZU9uZSh7IGVtYWlsIH0pXG4gICAgICBhd2FpdCBzZXNzaW9ucy5kZWxldGVPbmUoeyB1c2VyX2lkOiBlbWFpbCB9KVxuICAgICAgaWYgKCEoYXdhaXQgdGhpcy5nZXRVc2VyKGVtYWlsKSkgJiYgIShhd2FpdCB0aGlzLmdldFVzZXJTZXNzaW9uKGVtYWlsKSkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBEZWxldGlvbiB1bnN1Y2Nlc3NmdWxgKVxuICAgICAgICByZXR1cm4geyBlcnJvcjogYERlbGV0aW9uIHVuc3VjY2Vzc2Z1bGAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIG9jY3VycmVkIHdoaWxlIGRlbGV0aW5nIHVzZXIsICR7ZX1gKVxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGUgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIHVzZXIncyBlbWFpbCBhbmQgYW4gb2JqZWN0IG9mIG5ldyBwcmVmZXJlbmNlcywgdXBkYXRlIHRoYXQgdXNlcidzXG4gICAqIGRhdGEgdG8gaW5jbHVkZSB0aG9zZSBwcmVmZXJlbmNlcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIC0gVGhlIGVtYWlsIG9mIHRoZSB1c2VyIHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IHByZWZlcmVuY2VzIC0gVGhlIHByZWZlcmVuY2VzIHRvIGluY2x1ZGUgaW4gdGhlIHVzZXIncyBkYXRhLlxuICAgKiBAcmV0dXJucyB7REFPUmVzcG9uc2V9XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgdXBkYXRlUHJlZmVyZW5jZXMoZW1haWwsIHByZWZlcmVuY2VzKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8qKlxuICAgICAgVGlja2V0OiBVc2VyIFByZWZlcmVuY2VzXG5cbiAgICAgIFVwZGF0ZSB0aGUgXCJwcmVmZXJlbmNlc1wiIGZpZWxkIGluIHRoZSBjb3JyZXNwb25kaW5nIHVzZXIncyBkb2N1bWVudCB0b1xuICAgICAgcmVmbGVjdCB0aGUgbmV3IGluZm9ybWF0aW9uIGluIHByZWZlcmVuY2VzLlxuICAgICAgKi9cblxuICAgICAgcHJlZmVyZW5jZXMgPSBwcmVmZXJlbmNlcyB8fCB7fVxuXG4gICAgICAvLyBUT0RPIFRpY2tldDogVXNlciBQcmVmZXJlbmNlc1xuICAgICAgLy8gVXNlIHRoZSBkYXRhIGluIFwicHJlZmVyZW5jZXNcIiB0byB1cGRhdGUgdGhlIHVzZXIncyBwcmVmZXJlbmNlcy5cbiAgICAgIGNvbnN0IHVwZGF0ZVJlc3BvbnNlID0gYXdhaXQgdXNlcnMudXBkYXRlT25lKFxuICAgICAgICB7IGVtYWlsOiBlbWFpbCB9LFxuICAgICAgICB7ICRzZXQ6IHsgcHJlZmVyZW5jZXM6IHByZWZlcmVuY2VzIH0gfSxcbiAgICAgIClcblxuICAgICAgaWYgKHVwZGF0ZVJlc3BvbnNlLm1hdGNoZWRDb3VudCA9PT0gMCkge1xuICAgICAgICByZXR1cm4geyBlcnJvcjogXCJObyB1c2VyIGZvdW5kIHdpdGggdGhhdCBlbWFpbFwiIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB1cGRhdGVSZXNwb25zZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB1cGRhdGluZyB0aGlzIHVzZXIncyBwcmVmZXJlbmNlcywgJHtlfWAsXG4gICAgICApXG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNoZWNrQWRtaW4oZW1haWwpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpc0FkbWluIH0gPSBhd2FpdCB0aGlzLmdldFVzZXIoZW1haWwpXG4gICAgICByZXR1cm4gaXNBZG1pbiB8fCBmYWxzZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbWFrZUFkbWluKGVtYWlsKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVwZGF0ZVJlc3BvbnNlID0gdXNlcnMudXBkYXRlT25lKFxuICAgICAgICB7IGVtYWlsIH0sXG4gICAgICAgIHsgJHNldDogeyBpc0FkbWluOiB0cnVlIH0gfSxcbiAgICAgIClcbiAgICAgIHJldHVybiB1cGRhdGVSZXNwb25zZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJhbWV0ZXIgcGFzc2VkIHRvIGFkZFVzZXIgbWV0aG9kXG4gKiBAdHlwZWRlZiBVc2VySW5mb1xuICogQHByb3BlcnR5IHtzdHJpbmd9IG5hbWVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBlbWFpbFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHBhc3N3b3JkXG4gKi9cblxuLyoqXG4gKiBTdWNjZXNzL0Vycm9yIHJldHVybiBvYmplY3RcbiAqIEB0eXBlZGVmIERBT1Jlc3BvbnNlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzdWNjZXNzXSAtIFN1Y2Nlc3NcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZXJyb3JdIC0gRXJyb3JcbiAqL1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLEtBQUo7QUFDQSxJQUFJQyxRQUFKOztJQUVxQkMsUTs7Ozs7Ozs7b0dBQ25CLGlCQUFzQkMsSUFBdEI7UUFBQTtVQUFBO1lBQUE7Y0FBQTtnQkFBQSxNQUNNSCxLQUFLLElBQUlDLFFBRGY7a0JBQUE7a0JBQUE7Z0JBQUE7O2dCQUFBOztjQUFBO2dCQUFBO2dCQUFBO2dCQUFBLE9BS2tCRSxJQUFJLENBQUNDLEVBQUwsQ0FBUUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFFBQXBCLEVBQThCQyxVQUE5QixDQUF5QyxPQUF6QyxDQUxsQjs7Y0FBQTtnQkFLSVIsS0FMSjtnQkFBQTtnQkFBQSxPQU1xQkcsSUFBSSxDQUFDQyxFQUFMLENBQVFDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxRQUFwQixFQUE4QkMsVUFBOUIsQ0FBeUMsVUFBekMsQ0FOckI7O2NBQUE7Z0JBTUlQLFFBTko7Z0JBQUE7Z0JBQUE7O2NBQUE7Z0JBQUE7Z0JBQUE7Z0JBUUlRLE9BQU8sQ0FBQ0MsS0FBUjs7Y0FSSjtjQUFBO2dCQUFBO1lBQUE7VUFBQTtRQUFBO01BQUEsQzs7Ozs7Ozs7SUFZQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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","map":{"version":3,"names":["users","sessions","UsersDAO","conn","db","process","env","MFLIX_NS","collection","console","error","email","findOne","userInfo","insertOne","name","password","w","success","String","startsWith","jwt","updateOne","user_id","$set","upsert","deleteOne","getUser","getUserSession","preferences","updateResponse","matchedCount","isAdmin"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\dao\\","sources":["usersDAO.js"],"sourcesContent":["let users\nlet sessions\n\nexport default class UsersDAO {\n  static async injectDB(conn) {\n    if (users && sessions) {\n      return\n    }\n    try {\n      users = await conn.db(process.env.MFLIX_NS).collection(\"users\")\n      sessions = await conn.db(process.env.MFLIX_NS).collection(\"sessions\")\n    } catch (e) {\n      console.error(`Unable to establish collection handles in userDAO: ${e}`)\n    }\n  }\n\n  /**\n  Ticket: User Management\n\n  For this ticket, you will need to implement the following five methods:\n\n  - getUser\n  - addUser\n  - loginUser\n  - logoutUser\n  - getUserSession\n\n  You can find these methods below this comment. Make sure to read the comments\n  in each method to better understand the implementation.\n\n  The method deleteUser is already given to you.\n  */\n\n  /**\n   * Finds a user in the `users` collection\n   * @param {string} email - The email of the desired user\n   * @returns {Object | null} Returns either a single user or nothing\n   */\n  static async getUser(email) {\n    // TODO Ticket: User Management\n    // Retrieve the user document corresponding with the user's email.\n    return await users.findOne({ email: email })\n  }\n\n  /**\n   * Adds a user to the `users` collection\n   * @param {UserInfo} userInfo - The information of the user to add\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async addUser(userInfo) {\n    /**\n    Ticket: Durable Writes\n\n    Please increase the durability of this method by using a non-default write\n    concern with ``insertOne``.\n    */\n\n    try {\n      // TODO Ticket: User Management\n      // Insert a user with the \"name\", \"email\", and \"password\" fields.\n      // TODO Ticket: Durable Writes\n      // Use a more durable Write Concern for this operation.\n      await users.insertOne(\n        {\n          name: userInfo.name,\n          email: userInfo.email,\n          password: userInfo.password,\n        },\n        { w: 1 },\n      )\n      return { success: true }\n    } catch (e) {\n      if (String(e).startsWith(\"MongoError: E11000 duplicate key error\")) {\n        return { error: \"A user with the given email already exists.\" }\n      }\n      console.error(`Error occurred while adding new user, ${e}.`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Adds a user to the `sessions` collection\n   * @param {string} email - The email of the user to login\n   * @param {string} jwt - A JSON web token representing the user's claims\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async loginUser(email, jwt) {\n    try {\n      // TODO Ticket: User Management\n      // Use an UPSERT statement to update the \"jwt\" field in the document,\n      // matching the \"user_id\" field with the email passed to this function.\n      await sessions.updateOne(\n        { user_id: email },\n        { $set: { user_id: email, jwt: jwt } },\n        { upsert: true },\n      )\n      return { success: true }\n    } catch (e) {\n      console.error(`Error occurred while logging in user, ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Removes a user from the `sessons` collection\n   * @param {string} email - The email of the user to logout\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async logoutUser(email) {\n    try {\n      // TODO Ticket: User Management\n      // Delete the document in the `sessions` collection matching the email.\n      await sessions.deleteOne({ user_id: email })\n      return { success: true }\n    } catch (e) {\n      console.error(`Error occurred while logging out user, ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Gets a user from the `sessions` collection\n   * @param {string} email - The email of the user to search for in `sessions`\n   * @returns {Object | null} Returns a user session Object, an \"error\" Object\n   * if something went wrong, or null if user was not found.\n   */\n  static async getUserSession(email) {\n    try {\n      // TODO Ticket: User Management\n      // Retrieve the session document corresponding with the user's email.\n      return sessions.findOne({ user_id: email })\n    } catch (e) {\n      console.error(`Error occurred while retrieving user session, ${e}`)\n      return null\n    }\n  }\n\n  /**\n   * Removes a user from the `sessions` and `users` collections\n   * @param {string} email - The email of the user to delete\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async deleteUser(email) {\n    try {\n      await users.deleteOne({ email })\n      await sessions.deleteOne({ user_id: email })\n      if (!(await this.getUser(email)) && !(await this.getUserSession(email))) {\n        return { success: true }\n      } else {\n        console.error(`Deletion unsuccessful`)\n        return { error: `Deletion unsuccessful` }\n      }\n    } catch (e) {\n      console.error(`Error occurred while deleting user, ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Given a user's email and an object of new preferences, update that user's\n   * data to include those preferences.\n   * @param {string} email - The email of the user to update.\n   * @param {Object} preferences - The preferences to include in the user's data.\n   * @returns {DAOResponse}\n   */\n  static async updatePreferences(email, preferences) {\n    try {\n      /**\n      Ticket: User Preferences\n\n      Update the \"preferences\" field in the corresponding user's document to\n      reflect the new information in preferences.\n      */\n\n      preferences = preferences || {}\n\n      // TODO Ticket: User Preferences\n      // Use the data in \"preferences\" to update the user's preferences.\n      const updateResponse = await users.updateOne(\n        { email: email },\n        { $set: { preferences: preferences } },\n      )\n\n      if (updateResponse.matchedCount === 0) {\n        return { error: \"No user found with that email\" }\n      }\n      return updateResponse\n    } catch (e) {\n      console.error(\n        `An error occurred while updating this user's preferences, ${e}`,\n      )\n      return { error: e }\n    }\n  }\n\n  static async checkAdmin(email) {\n    try {\n      const { isAdmin } = await this.getUser(email)\n      return isAdmin || false\n    } catch (e) {\n      return { error: e }\n    }\n  }\n\n  static async makeAdmin(email) {\n    try {\n      const updateResponse = users.updateOne(\n        { email },\n        { $set: { isAdmin: true } },\n      )\n      return updateResponse\n    } catch (e) {\n      return { error: e }\n    }\n  }\n}\n\n/**\n * Parameter passed to addUser method\n * @typedef UserInfo\n * @property {string} name\n * @property {string} email\n * @property {string} password\n */\n\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\n"],"mappings":"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"}},"mtime":1655973602829},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\dao\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\dao\\\\commentsDAO.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _bson = require(\"bson\");\n\nvar comments;\n\nvar CommentsDAO = /*#__PURE__*/function () {\n  function CommentsDAO() {\n    (0, _classCallCheck2[\"default\"])(this, CommentsDAO);\n  }\n\n  (0, _createClass2[\"default\"])(CommentsDAO, null, [{\n    key: \"injectDB\",\n    value: function () {\n      var _injectDB = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(conn) {\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!comments) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.prev = 2;\n                _context.next = 5;\n                return conn.db(process.env.MFLIX_NS).collection(\"comments\");\n\n              case 5:\n                comments = _context.sent;\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Unable to establish collection handles in userDAO: \".concat(_context.t0));\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 8]]);\n      }));\n\n      function injectDB(_x) {\n        return _injectDB.apply(this, arguments);\n      }\n\n      return injectDB;\n    }()\n    /**\n    Ticket: Create/Update Comments\n     For this ticket, you will need to implement the following two methods:\n     - addComment\n    - updateComment\n     You can find these methods below this docstring. Make sure to read the comments\n    to better understand the task.\n    */\n\n    /**\n     * Inserts a comment into the `comments` collection, with the following fields:\n        - \"name\", the name of the user posting the comment\n       - \"email\", the email of the user posting the comment\n       - \"movie_id\", the _id of the movie pertaining to the comment\n       - \"text\", the text of the comment\n       - \"date\", the date when the comment was posted\n      * @param {string} movieId - The _id of the movie in the `movies` collection.\n     * @param {Object} user - An object containing the user's name and email.\n     * @param {string} comment - The text of the comment.\n     * @param {string} date - The date on which the comment was posted.\n     * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n     */\n\n  }, {\n    key: \"addComment\",\n    value: function () {\n      var _addComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(movieId, user, comment, date) {\n        var commentDoc;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                // TODO Ticket: Create/Update Comments\n                // Construct the comment document to be inserted into MongoDB.\n                commentDoc = {\n                  movie_id: movieId,\n                  date: date,\n                  text: comment,\n                  name: user.name,\n                  email: user.email\n                };\n                _context2.next = 4;\n                return comments.insertOne(commentDoc);\n\n              case 4:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.error(\"Unable to post comment: \".concat(_context2.t0));\n                return _context2.abrupt(\"return\", {\n                  error: _context2.t0\n                });\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 7]]);\n      }));\n\n      function addComment(_x2, _x3, _x4, _x5) {\n        return _addComment.apply(this, arguments);\n      }\n\n      return addComment;\n    }()\n    /**\n     * Updates the comment in the comment collection. Queries for the comment\n     * based by both comment _id field as well as the email field to doubly ensure\n     * the user has permission to edit this comment.\n     * @param {string} commentId - The _id of the comment to update.\n     * @param {string} userEmail - The email of the user who owns the comment.\n     * @param {string} text - The updated text of the comment.\n     * @param {string} date - The date on which the comment was updated.\n     * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n     */\n\n  }, {\n    key: \"updateComment\",\n    value: function () {\n      var _updateComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(commentId, userEmail, text, date) {\n        var updateResponse;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return comments.updateOne({\n                  _id: commentId,\n                  email: userEmail\n                }, {\n                  $set: {\n                    date: date,\n                    text: text\n                  }\n                });\n\n              case 3:\n                updateResponse = _context3.sent;\n                return _context3.abrupt(\"return\", updateResponse);\n\n              case 7:\n                _context3.prev = 7;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.error(\"Unable to update comment: \".concat(_context3.t0));\n                return _context3.abrupt(\"return\", {\n                  error: _context3.t0\n                });\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 7]]);\n      }));\n\n      function updateComment(_x6, _x7, _x8, _x9) {\n        return _updateComment.apply(this, arguments);\n      }\n\n      return updateComment;\n    }()\n  }, {\n    key: \"deleteComment\",\n    value: function () {\n      var _deleteComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(commentId, userEmail) {\n        var deleteResponse;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return comments.deleteOne({\n                  _id: (0, _bson.ObjectId)(commentId),\n                  email: userEmail\n                });\n\n              case 3:\n                deleteResponse = _context4.sent;\n                return _context4.abrupt(\"return\", deleteResponse);\n\n              case 7:\n                _context4.prev = 7;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.error(\"Unable to delete comment: \".concat(_context4.t0));\n                return _context4.abrupt(\"return\", {\n                  error: _context4.t0\n                });\n\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 7]]);\n      }));\n\n      function deleteComment(_x10, _x11) {\n        return _deleteComment.apply(this, arguments);\n      }\n\n      return deleteComment;\n    }()\n  }, {\n    key: \"mostActiveCommenters\",\n    value: function () {\n      var _mostActiveCommenters = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n        var pipeline, readConcern, aggregateResult;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                // TODO Ticket: User Report\n                // Return the 20 users who have commented the most on MFlix.\n                pipeline = [{\n                  $match: {}\n                }, {\n                  $group: {\n                    _id: {\n                      email: \"$email\"\n                    },\n                    count: {\n                      $sum: 1\n                    }\n                  }\n                }, {\n                  $project: {\n                    _id: \"$_id.email\",\n                    count: \"$count\"\n                  }\n                }, {\n                  $sort: {\n                    count: -1\n                  }\n                }, {\n                  $limit: 20\n                }]; // TODO Ticket: User Report\n                // Use a more durable Read Concern here to make sure this data is not stale.\n\n                readConcern = comments.readConcern;\n                _context5.next = 5;\n                return comments.aggregate(pipeline, {\n                  readConcern: readConcern\n                });\n\n              case 5:\n                aggregateResult = _context5.sent;\n                _context5.next = 8;\n                return aggregateResult.toArray();\n\n              case 8:\n                return _context5.abrupt(\"return\", _context5.sent);\n\n              case 11:\n                _context5.prev = 11;\n                _context5.t0 = _context5[\"catch\"](0);\n                console.error(\"Unable to retrieve most active commenters: \".concat(_context5.t0));\n                return _context5.abrupt(\"return\", {\n                  error: _context5.t0\n                });\n\n              case 15:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 11]]);\n      }));\n\n      function mostActiveCommenters() {\n        return _mostActiveCommenters.apply(this, arguments);\n      }\n\n      return mostActiveCommenters;\n    }()\n  }]);\n  return CommentsDAO;\n}();\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\n\n\nexports[\"default\"] = CommentsDAO;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb21tZW50cyIsIkNvbW1lbnRzREFPIiwiY29ubiIsImRiIiwicHJvY2VzcyIsImVudiIsIk1GTElYX05TIiwiY29sbGVjdGlvbiIsImNvbnNvbGUiLCJlcnJvciIsIm1vdmllSWQiLCJ1c2VyIiwiY29tbWVudCIsImRhdGUiLCJjb21tZW50RG9jIiwibW92aWVfaWQiLCJ0ZXh0IiwibmFtZSIsImVtYWlsIiwiaW5zZXJ0T25lIiwiY29tbWVudElkIiwidXNlckVtYWlsIiwidXBkYXRlT25lIiwiX2lkIiwiJHNldCIsInVwZGF0ZVJlc3BvbnNlIiwiZGVsZXRlT25lIiwiT2JqZWN0SWQiLCJkZWxldGVSZXNwb25zZSIsInBpcGVsaW5lIiwiJG1hdGNoIiwiJGdyb3VwIiwiY291bnQiLCIkc3VtIiwiJHByb2plY3QiLCIkc29ydCIsIiRsaW1pdCIsInJlYWRDb25jZXJuIiwiYWdncmVnYXRlIiwiYWdncmVnYXRlUmVzdWx0IiwidG9BcnJheSJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFwzMzYxNlxcT25lRHJpdmVcXEJ1cmVhdVxcbWZsaXgtanNcXHNyY1xcZGFvXFwiLCJzb3VyY2VzIjpbImNvbW1lbnRzREFPLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9iamVjdElkIH0gZnJvbSBcImJzb25cIlxuXG5sZXQgY29tbWVudHNcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tbWVudHNEQU8ge1xuICBzdGF0aWMgYXN5bmMgaW5qZWN0REIoY29ubikge1xuICAgIGlmIChjb21tZW50cykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb21tZW50cyA9IGF3YWl0IGNvbm4uZGIocHJvY2Vzcy5lbnYuTUZMSVhfTlMpLmNvbGxlY3Rpb24oXCJjb21tZW50c1wiKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byBlc3RhYmxpc2ggY29sbGVjdGlvbiBoYW5kbGVzIGluIHVzZXJEQU86ICR7ZX1gKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICBUaWNrZXQ6IENyZWF0ZS9VcGRhdGUgQ29tbWVudHNcblxuICBGb3IgdGhpcyB0aWNrZXQsIHlvdSB3aWxsIG5lZWQgdG8gaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcgdHdvIG1ldGhvZHM6XG5cbiAgLSBhZGRDb21tZW50XG4gIC0gdXBkYXRlQ29tbWVudFxuXG4gIFlvdSBjYW4gZmluZCB0aGVzZSBtZXRob2RzIGJlbG93IHRoaXMgZG9jc3RyaW5nLiBNYWtlIHN1cmUgdG8gcmVhZCB0aGUgY29tbWVudHNcbiAgdG8gYmV0dGVyIHVuZGVyc3RhbmQgdGhlIHRhc2suXG4gICovXG5cbiAgLyoqXG4gICAqIEluc2VydHMgYSBjb21tZW50IGludG8gdGhlIGBjb21tZW50c2AgY29sbGVjdGlvbiwgd2l0aCB0aGUgZm9sbG93aW5nIGZpZWxkczpcblxuICAgICAtIFwibmFtZVwiLCB0aGUgbmFtZSBvZiB0aGUgdXNlciBwb3N0aW5nIHRoZSBjb21tZW50XG4gICAgIC0gXCJlbWFpbFwiLCB0aGUgZW1haWwgb2YgdGhlIHVzZXIgcG9zdGluZyB0aGUgY29tbWVudFxuICAgICAtIFwibW92aWVfaWRcIiwgdGhlIF9pZCBvZiB0aGUgbW92aWUgcGVydGFpbmluZyB0byB0aGUgY29tbWVudFxuICAgICAtIFwidGV4dFwiLCB0aGUgdGV4dCBvZiB0aGUgY29tbWVudFxuICAgICAtIFwiZGF0ZVwiLCB0aGUgZGF0ZSB3aGVuIHRoZSBjb21tZW50IHdhcyBwb3N0ZWRcblxuICAgKiBAcGFyYW0ge3N0cmluZ30gbW92aWVJZCAtIFRoZSBfaWQgb2YgdGhlIG1vdmllIGluIHRoZSBgbW92aWVzYCBjb2xsZWN0aW9uLlxuICAgKiBAcGFyYW0ge09iamVjdH0gdXNlciAtIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSB1c2VyJ3MgbmFtZSBhbmQgZW1haWwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb21tZW50IC0gVGhlIHRleHQgb2YgdGhlIGNvbW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRlIC0gVGhlIGRhdGUgb24gd2hpY2ggdGhlIGNvbW1lbnQgd2FzIHBvc3RlZC5cbiAgICogQHJldHVybnMge0RBT1Jlc3BvbnNlfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGVpdGhlciBEQiByZXNwb25zZSBvciBcImVycm9yXCJcbiAgICovXG4gIHN0YXRpYyBhc3luYyBhZGRDb21tZW50KG1vdmllSWQsIHVzZXIsIGNvbW1lbnQsIGRhdGUpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETyBUaWNrZXQ6IENyZWF0ZS9VcGRhdGUgQ29tbWVudHNcbiAgICAgIC8vIENvbnN0cnVjdCB0aGUgY29tbWVudCBkb2N1bWVudCB0byBiZSBpbnNlcnRlZCBpbnRvIE1vbmdvREIuXG4gICAgICBjb25zdCBjb21tZW50RG9jID0ge1xuICAgICAgICBtb3ZpZV9pZDogbW92aWVJZCxcbiAgICAgICAgZGF0ZTogZGF0ZSxcbiAgICAgICAgdGV4dDogY29tbWVudCxcbiAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGF3YWl0IGNvbW1lbnRzLmluc2VydE9uZShjb21tZW50RG9jKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byBwb3N0IGNvbW1lbnQ6ICR7ZX1gKVxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGUgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBjb21tZW50IGluIHRoZSBjb21tZW50IGNvbGxlY3Rpb24uIFF1ZXJpZXMgZm9yIHRoZSBjb21tZW50XG4gICAqIGJhc2VkIGJ5IGJvdGggY29tbWVudCBfaWQgZmllbGQgYXMgd2VsbCBhcyB0aGUgZW1haWwgZmllbGQgdG8gZG91Ymx5IGVuc3VyZVxuICAgKiB0aGUgdXNlciBoYXMgcGVybWlzc2lvbiB0byBlZGl0IHRoaXMgY29tbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbW1lbnRJZCAtIFRoZSBfaWQgb2YgdGhlIGNvbW1lbnQgdG8gdXBkYXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXNlckVtYWlsIC0gVGhlIGVtYWlsIG9mIHRoZSB1c2VyIHdobyBvd25zIHRoZSBjb21tZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRoZSB1cGRhdGVkIHRleHQgb2YgdGhlIGNvbW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRlIC0gVGhlIGRhdGUgb24gd2hpY2ggdGhlIGNvbW1lbnQgd2FzIHVwZGF0ZWQuXG4gICAqIEByZXR1cm5zIHtEQU9SZXNwb25zZX0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBlaXRoZXIgREIgcmVzcG9uc2Ugb3IgXCJlcnJvclwiXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ29tbWVudChjb21tZW50SWQsIHVzZXJFbWFpbCwgdGV4dCwgZGF0ZSkge1xuICAgIHRyeSB7XG4gICAgICAvLyBUT0RPIFRpY2tldDogQ3JlYXRlL1VwZGF0ZSBDb21tZW50c1xuICAgICAgLy8gVXNlIHRoZSBjb21tZW50SWQgYW5kIHVzZXJFbWFpbCB0byBzZWxlY3QgdGhlIHByb3BlciBjb21tZW50LCB0aGVuXG4gICAgICAvLyB1cGRhdGUgdGhlIFwidGV4dFwiIGFuZCBcImRhdGVcIiBmaWVsZHMgb2YgdGhlIHNlbGVjdGVkIGNvbW1lbnQuXG4gICAgICBjb25zdCB1cGRhdGVSZXNwb25zZSA9IGF3YWl0IGNvbW1lbnRzLnVwZGF0ZU9uZShcbiAgICAgICAgeyBfaWQ6IGNvbW1lbnRJZCwgZW1haWw6IHVzZXJFbWFpbCB9LFxuICAgICAgICB7ICRzZXQ6IHsgZGF0ZTogZGF0ZSwgdGV4dDogdGV4dCB9IH0sXG4gICAgICApXG5cbiAgICAgIHJldHVybiB1cGRhdGVSZXNwb25zZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byB1cGRhdGUgY29tbWVudDogJHtlfWApXG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZUNvbW1lbnQoY29tbWVudElkLCB1c2VyRW1haWwpIHtcbiAgICAvKipcbiAgICBUaWNrZXQ6IERlbGV0ZSBDb21tZW50c1xuXG4gICAgSW1wbGVtZW50IHRoZSBkZWxldGVPbmUoKSBjYWxsIGluIHRoaXMgbWV0aG9kLlxuXG4gICAgRW5zdXJlIHRoZSBkZWxldGUgb3BlcmF0aW9uIGlzIGxpbWl0ZWQgc28gb25seSB0aGUgdXNlciBjYW4gZGVsZXRlIHRoZWlyIG93blxuICAgIGNvbW1lbnRzLCBidXQgbm90IGFueW9uZSBlbHNlJ3MgY29tbWVudHMuXG4gICAgKi9cblxuICAgIHRyeSB7XG4gICAgICAvLyBUT0RPIFRpY2tldDogRGVsZXRlIENvbW1lbnRzXG4gICAgICAvLyBVc2UgdGhlIHVzZXJFbWFpbCBhbmQgY29tbWVudElkIHRvIGRlbGV0ZSB0aGUgcHJvcGVyIGNvbW1lbnQuXG4gICAgICBjb25zdCBkZWxldGVSZXNwb25zZSA9IGF3YWl0IGNvbW1lbnRzLmRlbGV0ZU9uZSh7XG4gICAgICAgIF9pZDogT2JqZWN0SWQoY29tbWVudElkKSxcbiAgICAgICAgZW1haWw6IHVzZXJFbWFpbCxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiBkZWxldGVSZXNwb25zZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byBkZWxldGUgY29tbWVudDogJHtlfWApXG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG1vc3RBY3RpdmVDb21tZW50ZXJzKCkge1xuICAgIC8qKlxuICAgIFRpY2tldDogVXNlciBSZXBvcnRcblxuICAgIEJ1aWxkIGEgcGlwZWxpbmUgdGhhdCByZXR1cm5zIHRoZSAyMCBtb3N0IGZyZXF1ZW50IGNvbW1lbnRlcnMgb24gdGhlIE1GbGl4XG4gICAgc2l0ZS4gWW91IGNhbiBkbyB0aGlzIGJ5IGNvdW50aW5nIHRoZSBudW1iZXIgb2Ygb2NjdXJyZW5jZXMgb2YgYSB1c2VyJ3NcbiAgICBlbWFpbCBpbiB0aGUgYGNvbW1lbnRzYCBjb2xsZWN0aW9uLlxuICAgICovXG4gICAgdHJ5IHtcbiAgICAgIC8vIFRPRE8gVGlja2V0OiBVc2VyIFJlcG9ydFxuICAgICAgLy8gUmV0dXJuIHRoZSAyMCB1c2VycyB3aG8gaGF2ZSBjb21tZW50ZWQgdGhlIG1vc3Qgb24gTUZsaXguXG4gICAgICBjb25zdCBwaXBlbGluZSA9IFtcbiAgICAgICAge1xuICAgICAgICAgICRtYXRjaDoge30sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAkZ3JvdXA6IHtcbiAgICAgICAgICAgIF9pZDoge1xuICAgICAgICAgICAgICBlbWFpbDogXCIkZW1haWxcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb3VudDogeyAkc3VtOiAxIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICRwcm9qZWN0OiB7XG4gICAgICAgICAgICBfaWQ6IFwiJF9pZC5lbWFpbFwiLFxuICAgICAgICAgICAgY291bnQ6IFwiJGNvdW50XCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICRzb3J0OiB7XG4gICAgICAgICAgICBjb3VudDogLTEsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgeyAkbGltaXQ6IDIwIH0sXG4gICAgICBdXG5cbiAgICAgIC8vIFRPRE8gVGlja2V0OiBVc2VyIFJlcG9ydFxuICAgICAgLy8gVXNlIGEgbW9yZSBkdXJhYmxlIFJlYWQgQ29uY2VybiBoZXJlIHRvIG1ha2Ugc3VyZSB0aGlzIGRhdGEgaXMgbm90IHN0YWxlLlxuICAgICAgY29uc3QgcmVhZENvbmNlcm4gPSBjb21tZW50cy5yZWFkQ29uY2VyblxuXG4gICAgICBjb25zdCBhZ2dyZWdhdGVSZXN1bHQgPSBhd2FpdCBjb21tZW50cy5hZ2dyZWdhdGUocGlwZWxpbmUsIHtcbiAgICAgICAgcmVhZENvbmNlcm4sXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gYXdhaXQgYWdncmVnYXRlUmVzdWx0LnRvQXJyYXkoKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byByZXRyaWV2ZSBtb3N0IGFjdGl2ZSBjb21tZW50ZXJzOiAke2V9YClcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBTdWNjZXNzL0Vycm9yIHJldHVybiBvYmplY3RcbiAqIEB0eXBlZGVmIERBT1Jlc3BvbnNlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzdWNjZXNzXSAtIFN1Y2Nlc3NcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZXJyb3JdIC0gRXJyb3JcbiAqL1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUVBLElBQUlBLFFBQUo7O0lBRXFCQyxXOzs7Ozs7OztvR0FDbkIsaUJBQXNCQyxJQUF0QjtRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUFBLEtBQ01GLFFBRE47a0JBQUE7a0JBQUE7Z0JBQUE7O2dCQUFBOztjQUFBO2dCQUFBO2dCQUFBO2dCQUFBLE9BS3FCRSxJQUFJLENBQUNDLEVBQUwsQ0FBUUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFFBQXBCLEVBQThCQyxVQUE5QixDQUF5QyxVQUF6QyxDQUxyQjs7Y0FBQTtnQkFLSVAsUUFMSjtnQkFBQTtnQkFBQTs7Y0FBQTtnQkFBQTtnQkFBQTtnQkFPSVEsT0FBTyxDQUFDQyxLQUFSOztjQVBKO2NBQUE7Z0JBQUE7WUFBQTtVQUFBO1FBQUE7TUFBQSxDOzs7Ozs7OztJQVdBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0lBS0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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","map":{"version":3,"names":["comments","CommentsDAO","conn","db","process","env","MFLIX_NS","collection","console","error","movieId","user","comment","date","commentDoc","movie_id","text","name","email","insertOne","commentId","userEmail","updateOne","_id","$set","updateResponse","deleteOne","ObjectId","deleteResponse","pipeline","$match","$group","count","$sum","$project","$sort","$limit","readConcern","aggregate","aggregateResult","toArray"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\dao\\","sources":["commentsDAO.js"],"sourcesContent":["import { ObjectId } from \"bson\"\n\nlet comments\n\nexport default class CommentsDAO {\n  static async injectDB(conn) {\n    if (comments) {\n      return\n    }\n    try {\n      comments = await conn.db(process.env.MFLIX_NS).collection(\"comments\")\n    } catch (e) {\n      console.error(`Unable to establish collection handles in userDAO: ${e}`)\n    }\n  }\n\n  /**\n  Ticket: Create/Update Comments\n\n  For this ticket, you will need to implement the following two methods:\n\n  - addComment\n  - updateComment\n\n  You can find these methods below this docstring. Make sure to read the comments\n  to better understand the task.\n  */\n\n  /**\n   * Inserts a comment into the `comments` collection, with the following fields:\n\n     - \"name\", the name of the user posting the comment\n     - \"email\", the email of the user posting the comment\n     - \"movie_id\", the _id of the movie pertaining to the comment\n     - \"text\", the text of the comment\n     - \"date\", the date when the comment was posted\n\n   * @param {string} movieId - The _id of the movie in the `movies` collection.\n   * @param {Object} user - An object containing the user's name and email.\n   * @param {string} comment - The text of the comment.\n   * @param {string} date - The date on which the comment was posted.\n   * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n   */\n  static async addComment(movieId, user, comment, date) {\n    try {\n      // TODO Ticket: Create/Update Comments\n      // Construct the comment document to be inserted into MongoDB.\n      const commentDoc = {\n        movie_id: movieId,\n        date: date,\n        text: comment,\n        name: user.name,\n        email: user.email,\n      }\n\n      return await comments.insertOne(commentDoc)\n    } catch (e) {\n      console.error(`Unable to post comment: ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Updates the comment in the comment collection. Queries for the comment\n   * based by both comment _id field as well as the email field to doubly ensure\n   * the user has permission to edit this comment.\n   * @param {string} commentId - The _id of the comment to update.\n   * @param {string} userEmail - The email of the user who owns the comment.\n   * @param {string} text - The updated text of the comment.\n   * @param {string} date - The date on which the comment was updated.\n   * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n   */\n  static async updateComment(commentId, userEmail, text, date) {\n    try {\n      // TODO Ticket: Create/Update Comments\n      // Use the commentId and userEmail to select the proper comment, then\n      // update the \"text\" and \"date\" fields of the selected comment.\n      const updateResponse = await comments.updateOne(\n        { _id: commentId, email: userEmail },\n        { $set: { date: date, text: text } },\n      )\n\n      return updateResponse\n    } catch (e) {\n      console.error(`Unable to update comment: ${e}`)\n      return { error: e }\n    }\n  }\n\n  static async deleteComment(commentId, userEmail) {\n    /**\n    Ticket: Delete Comments\n\n    Implement the deleteOne() call in this method.\n\n    Ensure the delete operation is limited so only the user can delete their own\n    comments, but not anyone else's comments.\n    */\n\n    try {\n      // TODO Ticket: Delete Comments\n      // Use the userEmail and commentId to delete the proper comment.\n      const deleteResponse = await comments.deleteOne({\n        _id: ObjectId(commentId),\n        email: userEmail,\n      })\n\n      return deleteResponse\n    } catch (e) {\n      console.error(`Unable to delete comment: ${e}`)\n      return { error: e }\n    }\n  }\n\n  static async mostActiveCommenters() {\n    /**\n    Ticket: User Report\n\n    Build a pipeline that returns the 20 most frequent commenters on the MFlix\n    site. You can do this by counting the number of occurrences of a user's\n    email in the `comments` collection.\n    */\n    try {\n      // TODO Ticket: User Report\n      // Return the 20 users who have commented the most on MFlix.\n      const pipeline = [\n        {\n          $match: {},\n        },\n        {\n          $group: {\n            _id: {\n              email: \"$email\",\n            },\n            count: { $sum: 1 },\n          },\n        },\n        {\n          $project: {\n            _id: \"$_id.email\",\n            count: \"$count\",\n          },\n        },\n        {\n          $sort: {\n            count: -1,\n          },\n        },\n        { $limit: 20 },\n      ]\n\n      // TODO Ticket: User Report\n      // Use a more durable Read Concern here to make sure this data is not stale.\n      const readConcern = comments.readConcern\n\n      const aggregateResult = await comments.aggregate(pipeline, {\n        readConcern,\n      })\n\n      return await aggregateResult.toArray()\n    } catch (e) {\n      console.error(`Unable to retrieve most active commenters: ${e}`)\n      return { error: e }\n    }\n  }\n}\n\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\n"],"mappings":"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"}},"mtime":1655995202238},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\users.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.User = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _usersDAO = _interopRequireDefault(require(\"../dao/usersDAO\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar hashPassword = /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(password) {\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _bcryptjs[\"default\"].hash(password, 10);\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function hashPassword(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar User = /*#__PURE__*/function () {\n  function User() {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        name = _ref2.name,\n        email = _ref2.email,\n        password = _ref2.password,\n        _ref2$preferences = _ref2.preferences,\n        preferences = _ref2$preferences === void 0 ? {} : _ref2$preferences;\n\n    (0, _classCallCheck2[\"default\"])(this, User);\n    this.name = name;\n    this.email = email;\n    this.password = password;\n    this.preferences = preferences;\n  }\n\n  (0, _createClass2[\"default\"])(User, [{\n    key: \"toJson\",\n    value: function toJson() {\n      return {\n        name: this.name,\n        email: this.email,\n        preferences: this.preferences\n      };\n    }\n  }, {\n    key: \"comparePassword\",\n    value: function () {\n      var _comparePassword = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(plainText) {\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _bcryptjs[\"default\"].compare(plainText, this.password);\n\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function comparePassword(_x2) {\n        return _comparePassword.apply(this, arguments);\n      }\n\n      return comparePassword;\n    }()\n  }, {\n    key: \"encoded\",\n    value: function encoded() {\n      return _jsonwebtoken[\"default\"].sign(_objectSpread({\n        exp: Math.floor(Date.now() / 1000) + 60 * 60 * 4\n      }, this.toJson()), process.env.SECRET_KEY);\n    }\n  }], [{\n    key: \"decoded\",\n    value: function () {\n      var _decoded = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(userJwt) {\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", _jsonwebtoken[\"default\"].verify(userJwt, process.env.SECRET_KEY, function (error, res) {\n                  if (error) {\n                    return {\n                      error: error\n                    };\n                  }\n\n                  return new User(res);\n                }));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function decoded(_x3) {\n        return _decoded.apply(this, arguments);\n      }\n\n      return decoded;\n    }()\n  }]);\n  return User;\n}();\n\nexports.User = User;\n\nvar UserController = /*#__PURE__*/function () {\n  function UserController() {\n    (0, _classCallCheck2[\"default\"])(this, UserController);\n  }\n\n  (0, _createClass2[\"default\"])(UserController, null, [{\n    key: \"register\",\n    value: function () {\n      var _register = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res) {\n        var userFromBody, errors, userInfo, insertResult, userFromDB, user;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                userFromBody = req.body;\n                errors = {};\n\n                if (userFromBody && userFromBody.password.length < 8) {\n                  errors.password = \"Your password must be at least 8 characters.\";\n                }\n\n                if (userFromBody && userFromBody.name.length < 3) {\n                  errors.name = \"You must specify a name of at least 3 characters.\";\n                }\n\n                if (!(Object.keys(errors).length > 0)) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                res.status(400).json(errors);\n                return _context4.abrupt(\"return\");\n\n              case 8:\n                _context4.t0 = _objectSpread;\n                _context4.t1 = _objectSpread({}, userFromBody);\n                _context4.t2 = {};\n                _context4.next = 13;\n                return hashPassword(userFromBody.password);\n\n              case 13:\n                _context4.t3 = _context4.sent;\n                _context4.t4 = {\n                  password: _context4.t3\n                };\n                userInfo = (0, _context4.t0)(_context4.t1, _context4.t2, _context4.t4);\n                _context4.next = 18;\n                return _usersDAO[\"default\"].addUser(userInfo);\n\n              case 18:\n                insertResult = _context4.sent;\n\n                if (!insertResult.success) {\n                  errors.email = insertResult.error;\n                }\n\n                _context4.next = 22;\n                return _usersDAO[\"default\"].getUser(userFromBody.email);\n\n              case 22:\n                userFromDB = _context4.sent;\n\n                if (!userFromDB) {\n                  errors.general = \"Internal error, please try again later\";\n                }\n\n                if (!(Object.keys(errors).length > 0)) {\n                  _context4.next = 27;\n                  break;\n                }\n\n                res.status(400).json(errors);\n                return _context4.abrupt(\"return\");\n\n              case 27:\n                user = new User(userFromDB);\n                res.json({\n                  auth_token: user.encoded(),\n                  info: user.toJson()\n                });\n                _context4.next = 34;\n                break;\n\n              case 31:\n                _context4.prev = 31;\n                _context4.t5 = _context4[\"catch\"](0);\n                res.status(500).json({\n                  error: _context4.t5\n                });\n\n              case 34:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 31]]);\n      }));\n\n      function register(_x4, _x5) {\n        return _register.apply(this, arguments);\n      }\n\n      return register;\n    }()\n  }, {\n    key: \"login\",\n    value: function () {\n      var _login = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(req, res, next) {\n        var _req$body, email, password, userData, user, loginResponse;\n\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _req$body = req.body, email = _req$body.email, password = _req$body.password;\n\n                if (!(!email || typeof email !== \"string\")) {\n                  _context5.next = 5;\n                  break;\n                }\n\n                res.status(400).json({\n                  error: \"Bad email format, expected string.\"\n                });\n                return _context5.abrupt(\"return\");\n\n              case 5:\n                if (!(!password || typeof password !== \"string\")) {\n                  _context5.next = 8;\n                  break;\n                }\n\n                res.status(400).json({\n                  error: \"Bad password format, expected string.\"\n                });\n                return _context5.abrupt(\"return\");\n\n              case 8:\n                _context5.next = 10;\n                return _usersDAO[\"default\"].getUser(email);\n\n              case 10:\n                userData = _context5.sent;\n\n                if (userData) {\n                  _context5.next = 14;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: \"Make sure your email is correct.\"\n                });\n                return _context5.abrupt(\"return\");\n\n              case 14:\n                user = new User(userData);\n                _context5.next = 17;\n                return user.comparePassword(password);\n\n              case 17:\n                if (_context5.sent) {\n                  _context5.next = 20;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: \"Make sure your password is correct.\"\n                });\n                return _context5.abrupt(\"return\");\n\n              case 20:\n                _context5.next = 22;\n                return _usersDAO[\"default\"].loginUser(user.email, user.encoded());\n\n              case 22:\n                loginResponse = _context5.sent;\n\n                if (loginResponse.success) {\n                  _context5.next = 26;\n                  break;\n                }\n\n                res.status(500).json({\n                  error: loginResponse.error\n                });\n                return _context5.abrupt(\"return\");\n\n              case 26:\n                res.json({\n                  auth_token: user.encoded(),\n                  info: user.toJson()\n                });\n                _context5.next = 33;\n                break;\n\n              case 29:\n                _context5.prev = 29;\n                _context5.t0 = _context5[\"catch\"](0);\n                res.status(400).json({\n                  error: _context5.t0\n                });\n                return _context5.abrupt(\"return\");\n\n              case 33:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 29]]);\n      }));\n\n      function login(_x6, _x7, _x8) {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }, {\n    key: \"logout\",\n    value: function () {\n      var _logout = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(req, res) {\n        var userJwt, userObj, error, logoutResult;\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context6.next = 4;\n                return User.decoded(userJwt);\n\n              case 4:\n                userObj = _context6.sent;\n                error = userObj.error;\n\n                if (!error) {\n                  _context6.next = 9;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: error\n                });\n                return _context6.abrupt(\"return\");\n\n              case 9:\n                _context6.next = 11;\n                return _usersDAO[\"default\"].logoutUser(userObj.email);\n\n              case 11:\n                logoutResult = _context6.sent;\n                error = logoutResult.error;\n\n                if (!error) {\n                  _context6.next = 16;\n                  break;\n                }\n\n                res.status(500).json({\n                  error: error\n                });\n                return _context6.abrupt(\"return\");\n\n              case 16:\n                res.json(logoutResult);\n                _context6.next = 22;\n                break;\n\n              case 19:\n                _context6.prev = 19;\n                _context6.t0 = _context6[\"catch\"](0);\n                res.status(500).json(_context6.t0);\n\n              case 22:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 19]]);\n      }));\n\n      function logout(_x9, _x10) {\n        return _logout.apply(this, arguments);\n      }\n\n      return logout;\n    }()\n  }, {\n    key: \"delete\",\n    value: function () {\n      var _delete2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(req, res) {\n        var password, userJwt, userClaim, error, user, deleteResult;\n        return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                password = req.body.password;\n\n                if (!(!password || typeof password !== \"string\")) {\n                  _context7.next = 5;\n                  break;\n                }\n\n                res.status(400).json({\n                  error: \"Bad password format, expected string.\"\n                });\n                return _context7.abrupt(\"return\");\n\n              case 5:\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context7.next = 8;\n                return User.decoded(userJwt);\n\n              case 8:\n                userClaim = _context7.sent;\n                error = userClaim.error;\n\n                if (!error) {\n                  _context7.next = 13;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: error\n                });\n                return _context7.abrupt(\"return\");\n\n              case 13:\n                _context7.t0 = User;\n                _context7.next = 16;\n                return _usersDAO[\"default\"].getUser(userClaim.email);\n\n              case 16:\n                _context7.t1 = _context7.sent;\n                user = new _context7.t0(_context7.t1);\n                _context7.next = 20;\n                return user.comparePassword(password);\n\n              case 20:\n                if (_context7.sent) {\n                  _context7.next = 23;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: \"Make sure your password is correct.\"\n                });\n                return _context7.abrupt(\"return\");\n\n              case 23:\n                _context7.next = 25;\n                return _usersDAO[\"default\"].deleteUser(userClaim.email);\n\n              case 25:\n                deleteResult = _context7.sent;\n                error = deleteResult.error;\n\n                if (!error) {\n                  _context7.next = 30;\n                  break;\n                }\n\n                res.status(500).json({\n                  error: error\n                });\n                return _context7.abrupt(\"return\");\n\n              case 30:\n                res.json(deleteResult);\n                _context7.next = 36;\n                break;\n\n              case 33:\n                _context7.prev = 33;\n                _context7.t2 = _context7[\"catch\"](0);\n                res.status(500).json(_context7.t2);\n\n              case 36:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, null, [[0, 33]]);\n      }));\n\n      function _delete(_x11, _x12) {\n        return _delete2.apply(this, arguments);\n      }\n\n      return _delete;\n    }()\n  }, {\n    key: \"save\",\n    value: function () {\n      var _save = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee8(req, res) {\n        var userJwt, userFromHeader, error, userFromDB, updatedUser;\n        return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context8.next = 4;\n                return User.decoded(userJwt);\n\n              case 4:\n                userFromHeader = _context8.sent;\n                error = userFromHeader.error;\n\n                if (!error) {\n                  _context8.next = 9;\n                  break;\n                }\n\n                res.status(401).json({\n                  error: error\n                });\n                return _context8.abrupt(\"return\");\n\n              case 9:\n                _context8.next = 11;\n                return _usersDAO[\"default\"].updatePreferences(userFromHeader.email, req.body.preferences);\n\n              case 11:\n                _context8.next = 13;\n                return _usersDAO[\"default\"].getUser(userFromHeader.email);\n\n              case 13:\n                userFromDB = _context8.sent;\n                updatedUser = new User(userFromDB);\n                res.json({\n                  auth_token: updatedUser.encoded(),\n                  info: updatedUser.toJson()\n                });\n                _context8.next = 21;\n                break;\n\n              case 18:\n                _context8.prev = 18;\n                _context8.t0 = _context8[\"catch\"](0);\n                res.status(500).json(_context8.t0);\n\n              case 21:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[0, 18]]);\n      }));\n\n      function save(_x13, _x14) {\n        return _save.apply(this, arguments);\n      }\n\n      return save;\n    }() // for internal use only\n\n  }, {\n    key: \"createAdminUser\",\n    value: function () {\n      var _createAdminUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee9(req, res) {\n        var userFromBody, errors, userInfo, insertResult, makeAdminResponse, userFromDB, user, _jwt, loginResponse;\n\n        return _regenerator[\"default\"].wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                userFromBody = req.body;\n                errors = {};\n\n                if (userFromBody && userFromBody.password.length < 8) {\n                  errors.password = \"Your password must be at least 8 characters.\";\n                }\n\n                if (userFromBody && userFromBody.name.length < 3) {\n                  errors.name = \"You must specify a name of at least 3 characters.\";\n                }\n\n                if (!(Object.keys(errors).length > 0)) {\n                  _context9.next = 8;\n                  break;\n                }\n\n                res.status(400).json(errors);\n                return _context9.abrupt(\"return\");\n\n              case 8:\n                _context9.t0 = _objectSpread;\n                _context9.t1 = _objectSpread({}, userFromBody);\n                _context9.t2 = {};\n                _context9.next = 13;\n                return hashPassword(userFromBody.password);\n\n              case 13:\n                _context9.t3 = _context9.sent;\n                _context9.t4 = {\n                  password: _context9.t3\n                };\n                userInfo = (0, _context9.t0)(_context9.t1, _context9.t2, _context9.t4);\n                _context9.next = 18;\n                return _usersDAO[\"default\"].addUser(userInfo);\n\n              case 18:\n                insertResult = _context9.sent;\n\n                if (!insertResult.success) {\n                  errors.email = insertResult.error;\n                }\n\n                if (!(Object.keys(errors).length > 0)) {\n                  _context9.next = 23;\n                  break;\n                }\n\n                res.status(400).json(errors);\n                return _context9.abrupt(\"return\");\n\n              case 23:\n                _context9.next = 25;\n                return _usersDAO[\"default\"].makeAdmin(userFromBody.email);\n\n              case 25:\n                makeAdminResponse = _context9.sent;\n                _context9.next = 28;\n                return _usersDAO[\"default\"].getUser(userFromBody.email);\n\n              case 28:\n                userFromDB = _context9.sent;\n\n                if (!userFromDB) {\n                  errors.general = \"Internal error, please try again later\";\n                }\n\n                if (!(Object.keys(errors).length > 0)) {\n                  _context9.next = 33;\n                  break;\n                }\n\n                res.status(400).json(errors);\n                return _context9.abrupt(\"return\");\n\n              case 33:\n                user = new User(userFromDB);\n                _jwt = user.encoded();\n                _context9.next = 37;\n                return _usersDAO[\"default\"].loginUser(user.email, _jwt);\n\n              case 37:\n                loginResponse = _context9.sent;\n                res.json({\n                  auth_token: _jwt,\n                  info: user.toJson()\n                });\n                _context9.next = 44;\n                break;\n\n              case 41:\n                _context9.prev = 41;\n                _context9.t5 = _context9[\"catch\"](0);\n                res.status(500).json(_context9.t5);\n\n              case 44:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, null, [[0, 41]]);\n      }));\n\n      function createAdminUser(_x15, _x16) {\n        return _createAdminUser.apply(this, arguments);\n      }\n\n      return createAdminUser;\n    }()\n  }]);\n  return UserController;\n}();\n\nexports[\"default\"] = UserController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsImJjcnlwdCIsImhhc2giLCJVc2VyIiwibmFtZSIsImVtYWlsIiwicHJlZmVyZW5jZXMiLCJwbGFpblRleHQiLCJjb21wYXJlIiwiand0Iiwic2lnbiIsImV4cCIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJ0b0pzb24iLCJwcm9jZXNzIiwiZW52IiwiU0VDUkVUX0tFWSIsInVzZXJKd3QiLCJ2ZXJpZnkiLCJlcnJvciIsInJlcyIsIlVzZXJDb250cm9sbGVyIiwicmVxIiwidXNlckZyb21Cb2R5IiwiYm9keSIsImVycm9ycyIsImxlbmd0aCIsIk9iamVjdCIsImtleXMiLCJzdGF0dXMiLCJqc29uIiwidXNlckluZm8iLCJVc2Vyc0RBTyIsImFkZFVzZXIiLCJpbnNlcnRSZXN1bHQiLCJzdWNjZXNzIiwiZ2V0VXNlciIsInVzZXJGcm9tREIiLCJnZW5lcmFsIiwidXNlciIsImF1dGhfdG9rZW4iLCJlbmNvZGVkIiwiaW5mbyIsIm5leHQiLCJ1c2VyRGF0YSIsImNvbXBhcmVQYXNzd29yZCIsImxvZ2luVXNlciIsImxvZ2luUmVzcG9uc2UiLCJnZXQiLCJzbGljZSIsImRlY29kZWQiLCJ1c2VyT2JqIiwibG9nb3V0VXNlciIsImxvZ291dFJlc3VsdCIsInVzZXJDbGFpbSIsImRlbGV0ZVVzZXIiLCJkZWxldGVSZXN1bHQiLCJ1c2VyRnJvbUhlYWRlciIsInVwZGF0ZVByZWZlcmVuY2VzIiwidXBkYXRlZFVzZXIiLCJtYWtlQWRtaW4iLCJtYWtlQWRtaW5SZXNwb25zZSJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFwzMzYxNlxcT25lRHJpdmVcXEJ1cmVhdVxcbWZsaXgtanNcXHNyY1xcYXBpXFwiLCJzb3VyY2VzIjpbInVzZXJzLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIlxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCJcbmltcG9ydCBVc2Vyc0RBTyBmcm9tIFwiLi4vZGFvL3VzZXJzREFPXCJcblxuY29uc3QgaGFzaFBhc3N3b3JkID0gYXN5bmMgcGFzc3dvcmQgPT4gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKVxuXG5leHBvcnQgY2xhc3MgVXNlciB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBwcmVmZXJlbmNlcyA9IHt9IH0gPSB7fSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICB0aGlzLmVtYWlsID0gZW1haWxcbiAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmRcbiAgICB0aGlzLnByZWZlcmVuY2VzID0gcHJlZmVyZW5jZXNcbiAgfVxuICB0b0pzb24oKSB7XG4gICAgcmV0dXJuIHsgbmFtZTogdGhpcy5uYW1lLCBlbWFpbDogdGhpcy5lbWFpbCwgcHJlZmVyZW5jZXM6IHRoaXMucHJlZmVyZW5jZXMgfVxuICB9XG4gIGFzeW5jIGNvbXBhcmVQYXNzd29yZChwbGFpblRleHQpIHtcbiAgICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGxhaW5UZXh0LCB0aGlzLnBhc3N3b3JkKVxuICB9XG4gIGVuY29kZWQoKSB7XG4gICAgcmV0dXJuIGp3dC5zaWduKFxuICAgICAge1xuICAgICAgICBleHA6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgNjAgKiA2MCAqIDQsXG4gICAgICAgIC4uLnRoaXMudG9Kc29uKCksXG4gICAgICB9LFxuICAgICAgcHJvY2Vzcy5lbnYuU0VDUkVUX0tFWSxcbiAgICApXG4gIH1cbiAgc3RhdGljIGFzeW5jIGRlY29kZWQodXNlckp3dCkge1xuICAgIHJldHVybiBqd3QudmVyaWZ5KHVzZXJKd3QsIHByb2Nlc3MuZW52LlNFQ1JFVF9LRVksIChlcnJvciwgcmVzKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHsgZXJyb3IgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBVc2VyKHJlcylcbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJDb250cm9sbGVyIHtcbiAgc3RhdGljIGFzeW5jIHJlZ2lzdGVyKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJGcm9tQm9keSA9IHJlcS5ib2R5XG4gICAgICBsZXQgZXJyb3JzID0ge31cbiAgICAgIGlmICh1c2VyRnJvbUJvZHkgJiYgdXNlckZyb21Cb2R5LnBhc3N3b3JkLmxlbmd0aCA8IDgpIHtcbiAgICAgICAgZXJyb3JzLnBhc3N3b3JkID0gXCJZb3VyIHBhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzLlwiXG4gICAgICB9XG4gICAgICBpZiAodXNlckZyb21Cb2R5ICYmIHVzZXJGcm9tQm9keS5uYW1lLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgZXJyb3JzLm5hbWUgPSBcIllvdSBtdXN0IHNwZWNpZnkgYSBuYW1lIG9mIGF0IGxlYXN0IDMgY2hhcmFjdGVycy5cIlxuICAgICAgfVxuXG4gICAgICBpZiAoT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKGVycm9ycylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXJJbmZvID0ge1xuICAgICAgICAuLi51c2VyRnJvbUJvZHksXG4gICAgICAgIHBhc3N3b3JkOiBhd2FpdCBoYXNoUGFzc3dvcmQodXNlckZyb21Cb2R5LnBhc3N3b3JkKSxcbiAgICAgIH1cblxuICAgICAgY29uc3QgaW5zZXJ0UmVzdWx0ID0gYXdhaXQgVXNlcnNEQU8uYWRkVXNlcih1c2VySW5mbylcbiAgICAgIGlmICghaW5zZXJ0UmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXJyb3JzLmVtYWlsID0gaW5zZXJ0UmVzdWx0LmVycm9yXG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyRnJvbURCID0gYXdhaXQgVXNlcnNEQU8uZ2V0VXNlcih1c2VyRnJvbUJvZHkuZW1haWwpXG4gICAgICBpZiAoIXVzZXJGcm9tREIpIHtcbiAgICAgICAgZXJyb3JzLmdlbmVyYWwgPSBcIkludGVybmFsIGVycm9yLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyXCJcbiAgICAgIH1cblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbihlcnJvcnMpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIodXNlckZyb21EQilcblxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBhdXRoX3Rva2VuOiB1c2VyLmVuY29kZWQoKSxcbiAgICAgICAgaW5mbzogdXNlci50b0pzb24oKSxcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZSB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBsb2dpbihyZXEsIHJlcywgbmV4dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHlcbiAgICAgIGlmICghZW1haWwgfHwgdHlwZW9mIGVtYWlsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQmFkIGVtYWlsIGZvcm1hdCwgZXhwZWN0ZWQgc3RyaW5nLlwiIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKCFwYXNzd29yZCB8fCB0eXBlb2YgcGFzc3dvcmQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJCYWQgcGFzc3dvcmQgZm9ybWF0LCBleHBlY3RlZCBzdHJpbmcuXCIgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBsZXQgdXNlckRhdGEgPSBhd2FpdCBVc2Vyc0RBTy5nZXRVc2VyKGVtYWlsKVxuICAgICAgaWYgKCF1c2VyRGF0YSkge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIk1ha2Ugc3VyZSB5b3VyIGVtYWlsIGlzIGNvcnJlY3QuXCIgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIodXNlckRhdGEpXG5cbiAgICAgIGlmICghKGF3YWl0IHVzZXIuY29tcGFyZVBhc3N3b3JkKHBhc3N3b3JkKSkpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJNYWtlIHN1cmUgeW91ciBwYXNzd29yZCBpcyBjb3JyZWN0LlwiIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBsb2dpblJlc3BvbnNlID0gYXdhaXQgVXNlcnNEQU8ubG9naW5Vc2VyKHVzZXIuZW1haWwsIHVzZXIuZW5jb2RlZCgpKVxuICAgICAgaWYgKCFsb2dpblJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogbG9naW5SZXNwb25zZS5lcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKHsgYXV0aF90b2tlbjogdXNlci5lbmNvZGVkKCksIGluZm86IHVzZXIudG9Kc29uKCkgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBlIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbG9nb3V0KHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJKd3QgPSByZXEuZ2V0KFwiQXV0aG9yaXphdGlvblwiKS5zbGljZShcIkJlYXJlciBcIi5sZW5ndGgpXG4gICAgICBjb25zdCB1c2VyT2JqID0gYXdhaXQgVXNlci5kZWNvZGVkKHVzZXJKd3QpXG4gICAgICB2YXIgeyBlcnJvciB9ID0gdXNlck9ialxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3IgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCBsb2dvdXRSZXN1bHQgPSBhd2FpdCBVc2Vyc0RBTy5sb2dvdXRVc2VyKHVzZXJPYmouZW1haWwpXG4gICAgICB2YXIgeyBlcnJvciB9ID0gbG9nb3V0UmVzdWx0XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKGxvZ291dFJlc3VsdClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbihlKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBkZWxldGUocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHsgcGFzc3dvcmQgfSA9IHJlcS5ib2R5XG4gICAgICBpZiAoIXBhc3N3b3JkIHx8IHR5cGVvZiBwYXNzd29yZCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkJhZCBwYXNzd29yZCBmb3JtYXQsIGV4cGVjdGVkIHN0cmluZy5cIiB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJKd3QgPSByZXEuZ2V0KFwiQXV0aG9yaXphdGlvblwiKS5zbGljZShcIkJlYXJlciBcIi5sZW5ndGgpXG4gICAgICBjb25zdCB1c2VyQ2xhaW0gPSBhd2FpdCBVc2VyLmRlY29kZWQodXNlckp3dClcbiAgICAgIHZhciB7IGVycm9yIH0gPSB1c2VyQ2xhaW1cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKGF3YWl0IFVzZXJzREFPLmdldFVzZXIodXNlckNsYWltLmVtYWlsKSlcbiAgICAgIGlmICghKGF3YWl0IHVzZXIuY29tcGFyZVBhc3N3b3JkKHBhc3N3b3JkKSkpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJNYWtlIHN1cmUgeW91ciBwYXNzd29yZCBpcyBjb3JyZWN0LlwiIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgZGVsZXRlUmVzdWx0ID0gYXdhaXQgVXNlcnNEQU8uZGVsZXRlVXNlcih1c2VyQ2xhaW0uZW1haWwpXG4gICAgICB2YXIgeyBlcnJvciB9ID0gZGVsZXRlUmVzdWx0XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKGRlbGV0ZVJlc3VsdClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbihlKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzYXZlKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJKd3QgPSByZXEuZ2V0KFwiQXV0aG9yaXphdGlvblwiKS5zbGljZShcIkJlYXJlciBcIi5sZW5ndGgpXG4gICAgICBjb25zdCB1c2VyRnJvbUhlYWRlciA9IGF3YWl0IFVzZXIuZGVjb2RlZCh1c2VySnd0KVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IHVzZXJGcm9tSGVhZGVyXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgYXdhaXQgVXNlcnNEQU8udXBkYXRlUHJlZmVyZW5jZXMoXG4gICAgICAgIHVzZXJGcm9tSGVhZGVyLmVtYWlsLFxuICAgICAgICByZXEuYm9keS5wcmVmZXJlbmNlcyxcbiAgICAgIClcbiAgICAgIGNvbnN0IHVzZXJGcm9tREIgPSBhd2FpdCBVc2Vyc0RBTy5nZXRVc2VyKHVzZXJGcm9tSGVhZGVyLmVtYWlsKVxuICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSBuZXcgVXNlcih1c2VyRnJvbURCKVxuXG4gICAgICByZXMuanNvbih7XG4gICAgICAgIGF1dGhfdG9rZW46IHVwZGF0ZWRVc2VyLmVuY29kZWQoKSxcbiAgICAgICAgaW5mbzogdXBkYXRlZFVzZXIudG9Kc29uKCksXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKGUpXG4gICAgfVxuICB9XG5cbiAgLy8gZm9yIGludGVybmFsIHVzZSBvbmx5XG4gIHN0YXRpYyBhc3luYyBjcmVhdGVBZG1pblVzZXIocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlckZyb21Cb2R5ID0gcmVxLmJvZHlcbiAgICAgIGxldCBlcnJvcnMgPSB7fVxuICAgICAgaWYgKHVzZXJGcm9tQm9keSAmJiB1c2VyRnJvbUJvZHkucGFzc3dvcmQubGVuZ3RoIDwgOCkge1xuICAgICAgICBlcnJvcnMucGFzc3dvcmQgPSBcIllvdXIgcGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMuXCJcbiAgICAgIH1cbiAgICAgIGlmICh1c2VyRnJvbUJvZHkgJiYgdXNlckZyb21Cb2R5Lm5hbWUubGVuZ3RoIDwgMykge1xuICAgICAgICBlcnJvcnMubmFtZSA9IFwiWW91IG11c3Qgc3BlY2lmeSBhIG5hbWUgb2YgYXQgbGVhc3QgMyBjaGFyYWN0ZXJzLlwiXG4gICAgICB9XG5cbiAgICAgIGlmIChPYmplY3Qua2V5cyhlcnJvcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oZXJyb3JzKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgdXNlckluZm8gPSB7XG4gICAgICAgIC4uLnVzZXJGcm9tQm9keSxcbiAgICAgICAgcGFzc3dvcmQ6IGF3YWl0IGhhc2hQYXNzd29yZCh1c2VyRnJvbUJvZHkucGFzc3dvcmQpLFxuICAgICAgfVxuXG4gICAgICBjb25zdCBpbnNlcnRSZXN1bHQgPSBhd2FpdCBVc2Vyc0RBTy5hZGRVc2VyKHVzZXJJbmZvKVxuICAgICAgaWYgKCFpbnNlcnRSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBlcnJvcnMuZW1haWwgPSBpbnNlcnRSZXN1bHQuZXJyb3JcbiAgICAgIH1cblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbihlcnJvcnMpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBtYWtlQWRtaW5SZXNwb25zZSA9IGF3YWl0IFVzZXJzREFPLm1ha2VBZG1pbih1c2VyRnJvbUJvZHkuZW1haWwpXG5cbiAgICAgIGNvbnN0IHVzZXJGcm9tREIgPSBhd2FpdCBVc2Vyc0RBTy5nZXRVc2VyKHVzZXJGcm9tQm9keS5lbWFpbClcbiAgICAgIGlmICghdXNlckZyb21EQikge1xuICAgICAgICBlcnJvcnMuZ2VuZXJhbCA9IFwiSW50ZXJuYWwgZXJyb3IsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXJcIlxuICAgICAgfVxuXG4gICAgICBpZiAoT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKGVycm9ycylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih1c2VyRnJvbURCKVxuICAgICAgY29uc3Qgand0ID0gdXNlci5lbmNvZGVkKClcbiAgICAgIGNvbnN0IGxvZ2luUmVzcG9uc2UgPSBhd2FpdCBVc2Vyc0RBTy5sb2dpblVzZXIodXNlci5lbWFpbCwgand0KVxuXG4gICAgICByZXMuanNvbih7XG4gICAgICAgIGF1dGhfdG9rZW46IGp3dCxcbiAgICAgICAgaW5mbzogdXNlci50b0pzb24oKSxcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oZSlcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7Ozs7QUFFQSxJQUFNQSxZQUFZO0VBQUEseUZBQUcsaUJBQU1DLFFBQU47SUFBQTtNQUFBO1FBQUE7VUFBQTtZQUFBO1lBQUEsT0FBd0JDLG9CQUFBLENBQU9DLElBQVAsQ0FBWUYsUUFBWixFQUFzQixFQUF0QixDQUF4Qjs7VUFBQTtZQUFBOztVQUFBO1VBQUE7WUFBQTtRQUFBO01BQUE7SUFBQTtFQUFBLENBQUg7O0VBQUEsZ0JBQVpELFlBQVk7SUFBQTtFQUFBO0FBQUEsR0FBbEI7O0lBRWFJLEk7RUFDWCxnQkFBOEQ7SUFBQSxnRkFBSixFQUFJO0lBQUEsSUFBaERDLElBQWdELFNBQWhEQSxJQUFnRDtJQUFBLElBQTFDQyxLQUEwQyxTQUExQ0EsS0FBMEM7SUFBQSxJQUFuQ0wsUUFBbUMsU0FBbkNBLFFBQW1DO0lBQUEsOEJBQXpCTSxXQUF5QjtJQUFBLElBQXpCQSxXQUF5QixrQ0FBWCxFQUFXOztJQUFBO0lBQzVELEtBQUtGLElBQUwsR0FBWUEsSUFBWjtJQUNBLEtBQUtDLEtBQUwsR0FBYUEsS0FBYjtJQUNBLEtBQUtMLFFBQUwsR0FBZ0JBLFFBQWhCO0lBQ0EsS0FBS00sV0FBTCxHQUFtQkEsV0FBbkI7RUFDRDs7OztXQUNELGtCQUFTO01BQ1AsT0FBTztRQUFFRixJQUFJLEVBQUUsS0FBS0EsSUFBYjtRQUFtQkMsS0FBSyxFQUFFLEtBQUtBLEtBQS9CO1FBQXNDQyxXQUFXLEVBQUUsS0FBS0E7TUFBeEQsQ0FBUDtJQUNEOzs7OzJHQUNELGtCQUFzQkMsU0FBdEI7UUFBQTtVQUFBO1lBQUE7Y0FBQTtnQkFBQTtnQkFBQSxPQUNlTixvQkFBQSxDQUFPTyxPQUFQLENBQWVELFNBQWYsRUFBMEIsS0FB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","map":{"version":3,"names":["hashPassword","password","bcrypt","hash","User","name","email","preferences","plainText","compare","jwt","sign","exp","Math","floor","Date","now","toJson","process","env","SECRET_KEY","userJwt","verify","error","res","UserController","req","userFromBody","body","errors","length","Object","keys","status","json","userInfo","UsersDAO","addUser","insertResult","success","getUser","userFromDB","general","user","auth_token","encoded","info","next","userData","comparePassword","loginUser","loginResponse","get","slice","decoded","userObj","logoutUser","logoutResult","userClaim","deleteUser","deleteResult","userFromHeader","updatePreferences","updatedUser","makeAdmin","makeAdminResponse"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\api\\","sources":["users.controller.js"],"sourcesContent":["import bcrypt from \"bcryptjs\"\nimport jwt from \"jsonwebtoken\"\nimport UsersDAO from \"../dao/usersDAO\"\n\nconst hashPassword = async password => await bcrypt.hash(password, 10)\n\nexport class User {\n  constructor({ name, email, password, preferences = {} } = {}) {\n    this.name = name\n    this.email = email\n    this.password = password\n    this.preferences = preferences\n  }\n  toJson() {\n    return { name: this.name, email: this.email, preferences: this.preferences }\n  }\n  async comparePassword(plainText) {\n    return await bcrypt.compare(plainText, this.password)\n  }\n  encoded() {\n    return jwt.sign(\n      {\n        exp: Math.floor(Date.now() / 1000) + 60 * 60 * 4,\n        ...this.toJson(),\n      },\n      process.env.SECRET_KEY,\n    )\n  }\n  static async decoded(userJwt) {\n    return jwt.verify(userJwt, process.env.SECRET_KEY, (error, res) => {\n      if (error) {\n        return { error }\n      }\n      return new User(res)\n    })\n  }\n}\n\nexport default class UserController {\n  static async register(req, res) {\n    try {\n      const userFromBody = req.body\n      let errors = {}\n      if (userFromBody && userFromBody.password.length < 8) {\n        errors.password = \"Your password must be at least 8 characters.\"\n      }\n      if (userFromBody && userFromBody.name.length < 3) {\n        errors.name = \"You must specify a name of at least 3 characters.\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const userInfo = {\n        ...userFromBody,\n        password: await hashPassword(userFromBody.password),\n      }\n\n      const insertResult = await UsersDAO.addUser(userInfo)\n      if (!insertResult.success) {\n        errors.email = insertResult.error\n      }\n      const userFromDB = await UsersDAO.getUser(userFromBody.email)\n      if (!userFromDB) {\n        errors.general = \"Internal error, please try again later\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const user = new User(userFromDB)\n\n      res.json({\n        auth_token: user.encoded(),\n        info: user.toJson(),\n      })\n    } catch (e) {\n      res.status(500).json({ error: e })\n    }\n  }\n\n  static async login(req, res, next) {\n    try {\n      const { email, password } = req.body\n      if (!email || typeof email !== \"string\") {\n        res.status(400).json({ error: \"Bad email format, expected string.\" })\n        return\n      }\n      if (!password || typeof password !== \"string\") {\n        res.status(400).json({ error: \"Bad password format, expected string.\" })\n        return\n      }\n      let userData = await UsersDAO.getUser(email)\n      if (!userData) {\n        res.status(401).json({ error: \"Make sure your email is correct.\" })\n        return\n      }\n      const user = new User(userData)\n\n      if (!(await user.comparePassword(password))) {\n        res.status(401).json({ error: \"Make sure your password is correct.\" })\n        return\n      }\n\n      const loginResponse = await UsersDAO.loginUser(user.email, user.encoded())\n      if (!loginResponse.success) {\n        res.status(500).json({ error: loginResponse.error })\n        return\n      }\n      res.json({ auth_token: user.encoded(), info: user.toJson() })\n    } catch (e) {\n      res.status(400).json({ error: e })\n      return\n    }\n  }\n\n  static async logout(req, res) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const userObj = await User.decoded(userJwt)\n      var { error } = userObj\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n      const logoutResult = await UsersDAO.logoutUser(userObj.email)\n      var { error } = logoutResult\n      if (error) {\n        res.status(500).json({ error })\n        return\n      }\n      res.json(logoutResult)\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n\n  static async delete(req, res) {\n    try {\n      let { password } = req.body\n      if (!password || typeof password !== \"string\") {\n        res.status(400).json({ error: \"Bad password format, expected string.\" })\n        return\n      }\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const userClaim = await User.decoded(userJwt)\n      var { error } = userClaim\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n      const user = new User(await UsersDAO.getUser(userClaim.email))\n      if (!(await user.comparePassword(password))) {\n        res.status(401).json({ error: \"Make sure your password is correct.\" })\n        return\n      }\n      const deleteResult = await UsersDAO.deleteUser(userClaim.email)\n      var { error } = deleteResult\n      if (error) {\n        res.status(500).json({ error })\n        return\n      }\n      res.json(deleteResult)\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n\n  static async save(req, res) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const userFromHeader = await User.decoded(userJwt)\n      var { error } = userFromHeader\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      await UsersDAO.updatePreferences(\n        userFromHeader.email,\n        req.body.preferences,\n      )\n      const userFromDB = await UsersDAO.getUser(userFromHeader.email)\n      const updatedUser = new User(userFromDB)\n\n      res.json({\n        auth_token: updatedUser.encoded(),\n        info: updatedUser.toJson(),\n      })\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n\n  // for internal use only\n  static async createAdminUser(req, res) {\n    try {\n      const userFromBody = req.body\n      let errors = {}\n      if (userFromBody && userFromBody.password.length < 8) {\n        errors.password = \"Your password must be at least 8 characters.\"\n      }\n      if (userFromBody && userFromBody.name.length < 3) {\n        errors.name = \"You must specify a name of at least 3 characters.\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const userInfo = {\n        ...userFromBody,\n        password: await hashPassword(userFromBody.password),\n      }\n\n      const insertResult = await UsersDAO.addUser(userInfo)\n      if (!insertResult.success) {\n        errors.email = insertResult.error\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const makeAdminResponse = await UsersDAO.makeAdmin(userFromBody.email)\n\n      const userFromDB = await UsersDAO.getUser(userFromBody.email)\n      if (!userFromDB) {\n        errors.general = \"Internal error, please try again later\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const user = new User(userFromDB)\n      const jwt = user.encoded()\n      const loginResponse = await UsersDAO.loginUser(user.email, jwt)\n\n      res.json({\n        auth_token: jwt,\n        info: user.toJson(),\n      })\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1655825402879},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"filename\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\\\\src\\\\api\\\\users.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\33616\\\\OneDrive\\\\Bureau\\\\mflix-js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _express = require(\"express\");\n\nvar _users = _interopRequireDefault(require(\"./users.controller\"));\n\nvar _comments = _interopRequireDefault(require(\"./comments.controller\"));\n\nvar router = new _express.Router(); // associate put, delete, and get(id)\n\nrouter.route(\"/register\").post(_users[\"default\"].register);\nrouter.route(\"/login\").post(_users[\"default\"].login);\nrouter.route(\"/logout\").post(_users[\"default\"].logout);\nrouter.route(\"/delete\")[\"delete\"](_users[\"default\"][\"delete\"]);\nrouter.route(\"/update-preferences\").put(_users[\"default\"].save);\nrouter.route(\"/comment-report\").get(_comments[\"default\"].apiCommentReport);\nrouter.route(\"/make-admin\").post(_users[\"default\"].createAdminUser);\nvar _default = router;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJyb3V0ZSIsInBvc3QiLCJ1c2Vyc0N0cmwiLCJyZWdpc3RlciIsImxvZ2luIiwibG9nb3V0IiwicHV0Iiwic2F2ZSIsImdldCIsImNvbW1lbnRzQ3RybCIsImFwaUNvbW1lbnRSZXBvcnQiLCJjcmVhdGVBZG1pblVzZXIiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcMzM2MTZcXE9uZURyaXZlXFxCdXJlYXVcXG1mbGl4LWpzXFxzcmNcXGFwaVxcIiwic291cmNlcyI6WyJ1c2Vycy5yb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiXG5pbXBvcnQgdXNlcnNDdHJsIGZyb20gXCIuL3VzZXJzLmNvbnRyb2xsZXJcIlxuaW1wb3J0IGNvbW1lbnRzQ3RybCBmcm9tIFwiLi9jb21tZW50cy5jb250cm9sbGVyXCJcblxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpXG5cbi8vIGFzc29jaWF0ZSBwdXQsIGRlbGV0ZSwgYW5kIGdldChpZClcbnJvdXRlci5yb3V0ZShcIi9yZWdpc3RlclwiKS5wb3N0KHVzZXJzQ3RybC5yZWdpc3RlcilcbnJvdXRlci5yb3V0ZShcIi9sb2dpblwiKS5wb3N0KHVzZXJzQ3RybC5sb2dpbilcbnJvdXRlci5yb3V0ZShcIi9sb2dvdXRcIikucG9zdCh1c2Vyc0N0cmwubG9nb3V0KVxucm91dGVyLnJvdXRlKFwiL2RlbGV0ZVwiKS5kZWxldGUodXNlcnNDdHJsLmRlbGV0ZSlcbnJvdXRlci5yb3V0ZShcIi91cGRhdGUtcHJlZmVyZW5jZXNcIikucHV0KHVzZXJzQ3RybC5zYXZlKVxucm91dGVyLnJvdXRlKFwiL2NvbW1lbnQtcmVwb3J0XCIpLmdldChjb21tZW50c0N0cmwuYXBpQ29tbWVudFJlcG9ydClcbnJvdXRlci5yb3V0ZShcIi9tYWtlLWFkbWluXCIpLnBvc3QodXNlcnNDdHJsLmNyZWF0ZUFkbWluVXNlcilcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUVBLElBQU1BLE1BQU0sR0FBRyxJQUFJQyxlQUFKLEVBQWYsQyxDQUVBOztBQUNBRCxNQUFNLENBQUNFLEtBQVAsQ0FBYSxXQUFiLEVBQTBCQyxJQUExQixDQUErQkMsaUJBQUEsQ0FBVUMsUUFBekM7QUFDQUwsTUFBTSxDQUFDRSxLQUFQLENBQWEsUUFBYixFQUF1QkMsSUFBdkIsQ0FBNEJDLGlCQUFBLENBQVVFLEtBQXRDO0FBQ0FOLE1BQU0sQ0FBQ0UsS0FBUCxDQUFhLFNBQWIsRUFBd0JDLElBQXhCLENBQTZCQyxpQkFBQSxDQUFVRyxNQUF2QztBQUNBUCxNQUFNLENBQUNFLEtBQVAsQ0FBYSxTQUFiLFlBQStCRSxpQkFBQSxVQUEvQjtBQUNBSixNQUFNLENBQUNFLEtBQVAsQ0FBYSxxQkFBYixFQUFvQ00sR0FBcEMsQ0FBd0NKLGlCQUFBLENBQVVLLElBQWxEO0FBQ0FULE1BQU0sQ0FBQ0UsS0FBUCxDQUFhLGlCQUFiLEVBQWdDUSxHQUFoQyxDQUFvQ0Msb0JBQUEsQ0FBYUMsZ0JBQWpEO0FBQ0FaLE1BQU0sQ0FBQ0UsS0FBUCxDQUFhLGFBQWIsRUFBNEJDLElBQTVCLENBQWlDQyxpQkFBQSxDQUFVUyxlQUEzQztlQUVlYixNIn0=","map":{"version":3,"names":["router","Router","route","post","usersCtrl","register","login","logout","put","save","get","commentsCtrl","apiCommentReport","createAdminUser"],"sourceRoot":"C:\\Users\\33616\\OneDrive\\Bureau\\mflix-js\\src\\api\\","sources":["users.route.js"],"sourcesContent":["import { Router } from \"express\"\nimport usersCtrl from \"./users.controller\"\nimport commentsCtrl from \"./comments.controller\"\n\nconst router = new Router()\n\n// associate put, delete, and get(id)\nrouter.route(\"/register\").post(usersCtrl.register)\nrouter.route(\"/login\").post(usersCtrl.login)\nrouter.route(\"/logout\").post(usersCtrl.logout)\nrouter.route(\"/delete\").delete(usersCtrl.delete)\nrouter.route(\"/update-preferences\").put(usersCtrl.save)\nrouter.route(\"/comment-report\").get(commentsCtrl.apiCommentReport)\nrouter.route(\"/make-admin\").post(usersCtrl.createAdminUser)\n\nexport default router\n"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,MAAM,GAAG,IAAIC,eAAJ,EAAf,C,CAEA;;AACAD,MAAM,CAACE,KAAP,CAAa,WAAb,EAA0BC,IAA1B,CAA+BC,iBAAA,CAAUC,QAAzC;AACAL,MAAM,CAACE,KAAP,CAAa,QAAb,EAAuBC,IAAvB,CAA4BC,iBAAA,CAAUE,KAAtC;AACAN,MAAM,CAACE,KAAP,CAAa,SAAb,EAAwBC,IAAxB,CAA6BC,iBAAA,CAAUG,MAAvC;AACAP,MAAM,CAACE,KAAP,CAAa,SAAb,YAA+BE,iBAAA,UAA/B;AACAJ,MAAM,CAACE,KAAP,CAAa,qBAAb,EAAoCM,GAApC,CAAwCJ,iBAAA,CAAUK,IAAlD;AACAT,MAAM,CAACE,KAAP,CAAa,iBAAb,EAAgCQ,GAAhC,CAAoCC,oBAAA,CAAaC,gBAAjD;AACAZ,MAAM,CAACE,KAAP,CAAa,aAAb,EAA4BC,IAA5B,CAAiCC,iBAAA,CAAUS,eAA3C;eAEeb,M"}},"mtime":1655825402896}}